{"version":3,"file":"kg-default-nodes.js","sources":["../lib/KoenigDecoratorNode.js","../lib/utils/read-text-content.js","../lib/utils/render-empty-container.js","../lib/utils/visibility.js","../lib/generate-decorator-node.js","../lib/utils/build-clean-basic-html-for-element.js","../lib/utils/read-caption-from-element.js","../lib/utils/read-image-attributes-from-element.js","../lib/nodes/image/image-parser.js","../lib/utils/get-available-image-widths.js","../lib/utils/is-local-content-image.js","../lib/utils/is-unsplash-image.js","../lib/utils/srcset-attribute.js","../lib/utils/get-resized-image-dimensions.js","../lib/utils/add-create-document-option.js","../lib/nodes/image/image-renderer.js","../lib/nodes/image/ImageNode.js","../lib/nodes/codeblock/codeblock-parser.js","../lib/nodes/codeblock/codeblock-renderer.js","../lib/nodes/codeblock/CodeBlockNode.js","../lib/nodes/markdown/markdown-renderer.js","../lib/nodes/markdown/MarkdownNode.js","../lib/nodes/video/video-parser.js","../lib/nodes/video/video-renderer.js","../lib/nodes/video/VideoNode.js","../lib/nodes/audio/audio-parser.js","../lib/nodes/audio/audio-renderer.js","../lib/nodes/audio/AudioNode.js","../lib/utils/clean-dom.js","../lib/nodes/callout/callout-renderer.js","../lib/nodes/callout/callout-parser.js","../lib/nodes/callout/CalloutNode.js","../lib/nodes/call-to-action/calltoaction-renderer.js","../lib/utils/rgb-to-hex.js","../lib/nodes/call-to-action/calltoaction-parser.js","../lib/nodes/call-to-action/CallToActionNode.js","../lib/nodes/aside/AsideParser.js","../lib/nodes/aside/AsideNode.js","../lib/nodes/horizontalrule/horizontalrule-renderer.js","../lib/nodes/horizontalrule/horizontalrule-parser.js","../lib/nodes/horizontalrule/HorizontalRuleNode.js","../lib/nodes/html/html-renderer.js","../lib/nodes/html/html-parser.js","../lib/nodes/html/HtmlNode.js","../lib/nodes/toggle/toggle-parser.js","../lib/utils/tagged-template-fns.mjs","../lib/nodes/toggle/toggle-renderer.js","../lib/nodes/toggle/ToggleNode.js","../lib/nodes/button/button-parser.js","../lib/utils/render-helpers/email-button.js","../lib/nodes/button/button-renderer.js","../lib/nodes/button/ButtonNode.js","../lib/nodes/bookmark/bookmark-parser.js","../lib/utils/escape-html.js","../lib/utils/truncate.js","../lib/nodes/bookmark/bookmark-renderer.js","../lib/nodes/bookmark/BookmarkNode.js","../lib/utils/size-byte-converter.js","../lib/nodes/file/file-renderer.js","../lib/nodes/file/file-parser.js","../lib/nodes/file/FileNode.js","../lib/utils/slugify.js","../lib/nodes/header/renderers/v1/header-renderer.js","../lib/nodes/header/parsers/header-parser.js","../lib/nodes/header/renderers/v2/header-renderer.js","../lib/nodes/header/HeaderNode.js","../lib/nodes/paywall/paywall-parser.js","../lib/nodes/paywall/paywall-renderer.js","../lib/nodes/paywall/PaywallNode.js","../lib/nodes/product/product-parser.js","../lib/nodes/product/product-renderer.js","../lib/nodes/product/ProductNode.js","../lib/nodes/embed/embed-parser.js","../lib/nodes/embed/types/twitter.js","../lib/nodes/embed/embed-renderer.js","../lib/nodes/embed/EmbedNode.js","../lib/utils/replacement-strings.js","../lib/nodes/email/email-renderer.js","../lib/nodes/email/EmailNode.js","../lib/nodes/gallery/gallery-parser.js","../lib/nodes/gallery/gallery-renderer.js","../lib/nodes/gallery/GalleryNode.js","../lib/nodes/email-cta/email-cta-renderer.js","../lib/nodes/email-cta/EmailCtaNode.js","../lib/nodes/signup/signup-parser.js","../lib/nodes/signup/signup-renderer.js","../lib/nodes/signup/SignupNode.js","../lib/nodes/ExtendedTextNode.js","../lib/nodes/ExtendedHeadingNode.js","../lib/nodes/ExtendedQuoteNode.js","../lib/nodes/TKNode.js","../lib/nodes/at-link/AtLinkNode.js","../lib/nodes/at-link/AtLinkSearchNode.js","../lib/nodes/zwnj/ZWNJNode.js","../lib/serializers/linebreak.js","../lib/serializers/paragraph.js","../lib/kg-default-nodes.js"],"sourcesContent":["/* eslint-disable ghost/filenames/match-exported-class */\n/* c8 ignore start */\nimport {DecoratorNode} from 'lexical';\n\nexport class KoenigDecoratorNode extends DecoratorNode {\n}\n\nexport function $isKoenigCard(node) {\n    return node instanceof KoenigDecoratorNode;\n}\n/* c8 ignore end */\n","import {$getRoot} from 'lexical';\n\n// when used nodes are used client-side their data attributes may be an editor\n// instance rather than a string in the case of nested editors\nexport default function readTextContent(node, property) {\n    const propertyName = `__${property}`;\n    const propertyEditorName = `${propertyName}Editor`;\n\n    // prefer the editor if it exists as the underlying value isn't written until export\n    const value = node[propertyEditorName] || node[propertyName];\n\n    if (!value) {\n        return '';\n    }\n\n    if (typeof value === 'string') {\n        return value;\n    }\n\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n\n    if (typeof value.getEditorState === 'function') {\n        let text = '';\n\n        value.getEditorState().read(() => {\n            text = $getRoot().getTextContent();\n        });\n\n        return text;\n    }\n\n    return '';\n}\n","/*\n * Renders an empty container element\n * In the returned object, `type: 'inner'` is picked up by the `@tryghost/kg-lexical-html-renderer` package\n * to render the inner content of the container element (in this case, nothing)\n *\n * @see @tryghost/kg-lexical-html-renderer package\n * @see https://github.com/TryGhost/Koenig/blob/e14c008e176f7a1036fe3f3deb924ed69a69191f/packages/kg-lexical-html-renderer/lib/convert-to-html-string.js#L29\n */\nexport function renderEmptyContainer(document) {\n    const emptyContainer = document.createElement('span');\n    return {element: emptyContainer, type: 'inner'};\n}\n","import {renderEmptyContainer} from './render-empty-container';\n\nexport const ALL_MEMBERS_SEGMENT = 'status:free,status:-free';\nexport const PAID_MEMBERS_SEGMENT = 'status:-free'; // paid + comped\nexport const FREE_MEMBERS_SEGMENT = 'status:free';\nexport const NO_MEMBERS_SEGMENT = '';\n\nconst DEFAULT_VISIBILITY = {\n    web: {\n        nonMember: true,\n        memberSegment: ALL_MEMBERS_SEGMENT\n    },\n    email: {\n        memberSegment: ALL_MEMBERS_SEGMENT\n    }\n};\n\nfunction isNullish(value) {\n    return value === null || value === undefined;\n}\n\n// ensure we always work with a deep copy to avoid accidental ref mutations\nexport function buildDefaultVisibility() {\n    return JSON.parse(JSON.stringify(DEFAULT_VISIBILITY));\n}\n\nexport function isOldVisibilityFormat(visibility) {\n    return !Object.prototype.hasOwnProperty.call(visibility, 'web')\n        || !Object.prototype.hasOwnProperty.call(visibility, 'email')\n        || !Object.prototype.hasOwnProperty.call(visibility.web, 'nonMember')\n        || isNullish(visibility.web.memberSegment)\n        || isNullish(visibility.email.memberSegment);\n}\n\nexport function isVisibilityRestricted(visibility) {\n    if (isOldVisibilityFormat(visibility)) {\n        return visibility.showOnEmail === false\n            || visibility.showOnWeb === false\n            || visibility.emailOnly === true\n            || visibility.segment !== '';\n    } else {\n        return visibility.web.nonMember === false\n            || visibility.web.memberSegment !== ALL_MEMBERS_SEGMENT\n            || visibility.email.memberSegment !== ALL_MEMBERS_SEGMENT;\n    }\n}\n\n// old formats...\n//\n// \"segment\" only applies to email visibility\n// {emailOnly: true/false, segment: ''}\n// {showOnWeb: true/false, showOnEmail: true/false, segment: 'status:free,status:-free'}\n//\n// segment: '' = everyone\n// segment: 'status:free' = free members\n// segment: 'status:paid' = paid members (incorrect, misses comped)\n// segment: 'status:-free' = paid members (correct, includes comped)\n// segment: 'status:-free+status:-paid' = no-one (incorrect, misses comped)\n//\n// new format...\n//\n// {\n//     web: {\n//         nonMember: true/false,\n//         memberSegment: 'status:free,status:-free'\n//     },\n//     email: {\n//         memberSegment: 'status:free,status:-free'\n//     }\n// }\n//\n// memberSegment: '' = no-one\n// memberSegment: 'status:free,status:-free' = everyone\n// memberSegment: 'status:free' = free members\n// memberSegment: 'status:-free' = paid + comped members\nexport function migrateOldVisibilityFormat(visibility) {\n    if (!visibility || !isOldVisibilityFormat(visibility)) {\n        return visibility;\n    }\n\n    // deep clone to avoid mutating the original object\n    const newVisibility = JSON.parse(JSON.stringify(visibility));\n\n    // ensure we have expected objects ready to populate\n    newVisibility.web ??= {};\n    newVisibility.email ??= {};\n\n    // convert web visibility, old formats only had on/off for web visibility rather than specific segments\n    if (isNullish(visibility.showOnWeb) && isNullish(visibility.emailOnly)) {\n        newVisibility.web = buildDefaultVisibility().web;\n    } else if (!isNullish(visibility.emailOnly)) {\n        newVisibility.web.nonMember = !visibility.emailOnly;\n        newVisibility.web.memberSegment = visibility.emailOnly ? NO_MEMBERS_SEGMENT : ALL_MEMBERS_SEGMENT;\n    } else {\n        newVisibility.web.nonMember = visibility.showOnWeb;\n        newVisibility.web.memberSegment = visibility.showOnWeb ? ALL_MEMBERS_SEGMENT : NO_MEMBERS_SEGMENT;\n    }\n\n    // convert email visibility, taking into account the old (and sometimes incorrect) segment formats\n    if (isNullish(visibility.showOnEmail) && isNullish(visibility.emailOnly)) {\n        newVisibility.email = buildDefaultVisibility().email;\n    } else if (visibility.showOnEmail === false) {\n        newVisibility.email.memberSegment = NO_MEMBERS_SEGMENT;\n    } else if (visibility.segment === 'status:-free+status:-paid') {\n        newVisibility.email.memberSegment = NO_MEMBERS_SEGMENT;\n    } else if (visibility.segment === 'status:free') {\n        newVisibility.email.memberSegment = FREE_MEMBERS_SEGMENT;\n    } else if (visibility.segment === 'status:paid' || visibility.segment === 'status:-free') {\n        newVisibility.email.memberSegment = PAID_MEMBERS_SEGMENT;\n    } else if (!visibility.segment) {\n        newVisibility.email.memberSegment = ALL_MEMBERS_SEGMENT;\n    }\n\n    return newVisibility;\n}\n\nexport function renderWithVisibility(originalRenderOutput, visibility, options) {\n    const document = originalRenderOutput.element.ownerDocument;\n    const content = _getRenderContent(originalRenderOutput);\n\n    visibility = migrateOldVisibilityFormat(visibility);\n\n    if (options.target === 'email') {\n        if (visibility.email.memberSegment === NO_MEMBERS_SEGMENT) {\n            return renderEmptyContainer(document);\n        }\n\n        if (visibility.email.memberSegment === ALL_MEMBERS_SEGMENT) {\n            return originalRenderOutput;\n        }\n\n        return _renderWithEmailVisibility(document, content, visibility.email);\n    }\n\n    const isNotVisibleOnWeb =\n        visibility.web.nonMember === false &&\n        visibility.web.memberSegment === NO_MEMBERS_SEGMENT;\n\n    if (isNotVisibleOnWeb) {\n        return renderEmptyContainer(document);\n    }\n\n    const hasWebVisibilityRestrictions =\n        visibility.web.nonMember !== true ||\n        visibility.web.memberSegment !== ALL_MEMBERS_SEGMENT;\n\n    if (hasWebVisibilityRestrictions) {\n        return _renderWithWebVisibility(document, content, visibility.web);\n    }\n\n    return originalRenderOutput;\n}\n\n/* Private functions -------------------------------------------------------- */\n\nfunction _getRenderContent({element, type}) {\n    if (type === 'inner') {\n        return element.innerHTML;\n    } else if (type === 'value') {\n        if ('value' in element) {\n            return element.value;\n        }\n        return '';\n    } else {\n        return element.outerHTML;\n    }\n}\n\nfunction _renderWithEmailVisibility(document, content, emailVisibility) {\n    const {memberSegment} = emailVisibility;\n    const container = document.createElement('div');\n    container.innerHTML = content;\n    container.setAttribute('data-gh-segment', memberSegment);\n    container.classList.add('kg-visibility-wrapper');\n    return {element: container, type: 'html'};\n}\n\nfunction _renderWithWebVisibility(document, content, webVisibility) {\n    const {nonMember, memberSegment} = webVisibility;\n    const wrappedContent = `\\n<!--kg-gated-block:begin nonMember:${nonMember} memberSegment:\"${memberSegment}\" -->${content}<!--kg-gated-block:end-->\\n`;\n    const textarea = document.createElement('textarea');\n    textarea.value = wrappedContent;\n    return {element: textarea, type: 'value'};\n}\n","import {KoenigDecoratorNode} from './KoenigDecoratorNode';\nimport readTextContent from './utils/read-text-content';\nimport {buildDefaultVisibility, isVisibilityRestricted, migrateOldVisibilityFormat} from './utils/visibility';\n/**\n * Validates the required arguments passed to `generateDecoratorNode`\n*/\nfunction validateArguments(nodeType, properties) {\n    /* eslint-disable ghost/ghost-custom/no-native-error */\n    /* c8 ignore start */\n    if (!nodeType) {\n        throw new Error({message: '[generateDecoratorNode] A unique \"nodeType\" should be provided'});\n    }\n\n    properties.forEach((prop) => {\n        if (!('name' in prop) || !('default' in prop)){\n            throw new Error({message: '[generateDecoratorNode] Properties should have both \"name\" and \"default\" attributes.'});\n        }\n\n        if (prop.urlType && !['url', 'html', 'markdown'].includes(prop.urlType)) {\n            throw new Error({message: '[generateDecoratorNode] \"urlType\" should be either \"url\", \"html\" or \"markdown\"'});\n        }\n\n        if ('wordCount' in prop && typeof prop.wordCount !== 'boolean') {\n            throw new Error({message: '[generateDecoratorNode] \"wordCount\" should be of boolean type.'});\n        }\n    });\n    /* c8 ignore stop */\n}\n\n/**\n * @typedef {Object} DecoratorNodeProperty\n * @property {string} name - The property's name.\n * @property {*} default - The property's default value\n * @property {('url'|'html'|'markdown'|null)} urlType - If the property contains a URL, the URL's type: 'url', 'html' or 'markdown'. Use 'url' is the property contains only a URL, 'html' or 'markdown' if the property contains HTML or markdown code, that may contain URLs.\n * @property {boolean} wordCount - Whether the property should be counted in the word count\n *\n * @param {string} nodeType – The node's type (must be unique)\n * @param {DecoratorNodeProperty[]} properties - An array of properties for the generated class\n * @param {boolean} hasVisibility - Whether to add a visibility property to the node\n * @param {Function} defaultRenderFn - A function that returns a @tryghost/kg-lexical-html-renderer compatible object, e.g. {element: Div, type: 'inner}\n * @returns {Object} - The generated class.\n */\nexport function generateDecoratorNode({nodeType, properties = [], defaultRenderFn, version = 1, hasVisibility = false}) {\n    validateArguments(nodeType, properties);\n\n    // Adds a `privateName` field to the properties for convenience (e.g. `__name`):\n    // properties: [{name: 'name', privateName: '__name', type: 'string', default: 'hello'}, {...}]\n    properties = properties.map((prop) => {\n        return {...prop, privateName: `__${prop.name}`};\n    });\n\n    // Adds `visibility` property to the properties array if `hasVisibility` is true\n    // uses a getter for `default` to avoid problems with mutation of nested objects\n    if (hasVisibility) {\n        properties.push({\n            name: 'visibility',\n            get default() {\n                return buildDefaultVisibility();\n            },\n            privateName: '__visibility'\n        });\n    }\n\n    class GeneratedDecoratorNode extends KoenigDecoratorNode {\n        constructor(data = {}, key) {\n            super(key);\n            properties.forEach((prop) => {\n                if (typeof prop.default === 'boolean') {\n                    this[prop.privateName] = data[prop.name] ?? prop.default;\n                } else {\n                    this[prop.privateName] = data[prop.name] || prop.default;\n                }\n            });\n        }\n\n        /**\n         * Returns the node's unique type\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         * @returns {string}\n         */\n        static getType() {\n            return nodeType;\n        }\n\n        /**\n         * Creates a copy of an existing node with all its properties\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         */\n        static clone(node) {\n            return new this(node.getDataset(), node.__key);\n        }\n\n        /**\n         * Returns default values for any properties, allowing our editor code\n         * to detect when a property has been changed\n         */\n        static getPropertyDefaults() {\n            return properties.reduce((obj, prop) => {\n                obj[prop.name] = prop.default;\n                return obj;\n            }, {});\n        }\n\n        /**\n         * Transforms URLs contained in the payload to relative paths (`__GHOST_URL__/relative/path/`),\n         * so that URLs to be changed without having to update the database\n         * @see https://github.com/TryGhost/SDK/tree/main/packages/url-utils\n         */\n        static get urlTransformMap() {\n            let map = {};\n\n            properties.forEach((prop) => {\n                if (prop.urlType) {\n                    if (prop.urlPath) {\n                        map[prop.urlPath] = prop.urlType;\n                    } else {\n                        map[prop.name] = prop.urlType;\n                    }\n                }\n            });\n\n            return map;\n        }\n\n        /**\n         * Convenience method to get all properties of the node\n         * @returns {Object} - The node's properties\n         */\n        getDataset() {\n            const self = this.getLatest();\n\n            let dataset = {};\n            properties.forEach((prop) => {\n                dataset[prop.name] = self[prop.privateName];\n            });\n\n            return dataset;\n        }\n\n        /**\n         * Converts JSON to a Lexical node\n         * @see https://lexical.dev/docs/concepts/serialization#lexicalnodeimportjson\n         * @extends DecoratorNode\n         * @param {Object} serializedNode - Lexical's representation of the node, in JSON format\n         */\n        static importJSON(serializedNode) {\n            const data = {};\n\n            // migrate older nodes that were saved with an earlier version of the visibility format\n            serializedNode.visibility = migrateOldVisibilityFormat(serializedNode.visibility);\n\n            properties.forEach((prop) => {\n                data[prop.name] = serializedNode[prop.name];\n            });\n\n            return new this(data);\n        }\n\n        /**\n         * Serializes a Lexical node to JSON. The JSON content is then saved to the database.\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/serialization#lexicalnodeexportjson\n         */\n        exportJSON() {\n            const dataset = {\n                type: nodeType,\n                version: version,\n                ...properties.reduce((obj, prop) => {\n                    obj[prop.name] = this[prop.name];\n                    return obj;\n                }, {})\n            };\n            return dataset;\n        }\n\n        exportDOM(options = {}) {\n            // this.__version is used when a node has a version property which\n            // means it's set from the serialized version data at runtime\n            const nodeVersion = this.__version || version;\n\n            if (options.nodeRenderers?.[nodeType]) {\n                const render = options.nodeRenderers[nodeType];\n\n                if (typeof render === 'object') {\n                    const versionRenderer = render[nodeVersion];\n                    if (!versionRenderer) {\n                        throw new Error(`[generateDecoratorNode] ${nodeType}: options.nodeRenderers['${nodeType}'] for version ${nodeVersion} is required`);\n                    }\n                    return versionRenderer(this, options);\n                } else {\n                    return render(this, options);\n                }\n            }\n\n            if (typeof defaultRenderFn === 'object') {\n                const render = defaultRenderFn[nodeVersion];\n                if (!render) {\n                    throw new Error(`[generateDecoratorNode] ${nodeType}: \"defaultRenderFn\" for version ${nodeVersion} is required`);\n                }\n                return render(this, options);\n            }\n\n            if (!defaultRenderFn) {\n                throw new Error(`[generateDecoratorNode] ${nodeType}: \"defaultRenderFn\" is required`);\n            }\n\n            const render = defaultRenderFn;\n\n            return render(this, options);\n        }\n\n        /* c8 ignore start */\n        /**\n         * Inserts node in the DOM. Required when extending the DecoratorNode.\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         */\n        createDOM() {\n            return document.createElement('div');\n        }\n\n        /**\n         * Required when extending the DecoratorNode\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         */\n        updateDOM() {\n            return false;\n        }\n\n        /**\n         * Defines whether a node is a top-level block.\n         * @see https://lexical.dev/docs/api/classes/lexical.DecoratorNode#isinline\n         */\n        isInline() {\n            // All our cards are top-level blocks. Override if needed.\n            return false;\n        }\n        /* c8 ignore stop */\n\n        /**\n         * Defines whether a node has dynamic data that needs to be fetched from the server when rendering\n         */\n        hasDynamicData() {\n            return false;\n        }\n\n        /**\n         * Defines whether a node has an edit mode in the editor UI\n         */\n        hasEditMode() {\n            // Most of our cards have an edit mode. Override if needed.\n            return true;\n        }\n\n        /*\n        * Returns the text content of the node, used by the editor to calculate the word count\n        * This method filters out properties without `wordCount: true`\n        */\n        getTextContent() {\n            const self = this.getLatest();\n            const propertiesWithText = properties.filter(prop => !!prop.wordCount);\n\n            const text = propertiesWithText.map(\n                prop => readTextContent(self, prop.name)\n            ).filter(Boolean).join('\\n');\n\n            return text ? `${text}\\n\\n` : '';\n        }\n\n        /**\n         * Returns true/false for whether the node's visibility property\n         * is active or not. Always false if a node has no visibility property\n         * @returns {boolean}\n         */\n        getIsVisibilityActive() {\n            if (!properties.some(prop => prop.name === 'visibility')) {\n                return false;\n            }\n\n            const self = this.getLatest();\n            const visibility = self.__visibility;\n\n            return isVisibilityRestricted(visibility);\n        }\n    }\n\n    /**\n     * Generates getters and setters for each property, following ES6 syntax\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set\n     *\n     * Example: for a given property 'content', the generated getter and setter will be:\n     * get content() {\n     *    const self = this.getLatest();\n     *    return self.__content;\n     * }\n     *\n     * set content(newVal) {\n     *   const writable = this.getWritable();\n     *   writable.__content = newVal;\n     * }\n     *\n     * They can be used as `node.content` (getter) and `node.content = 'new value'` (setter)\n     */\n    properties.forEach((prop) => {\n        Object.defineProperty(GeneratedDecoratorNode.prototype, prop.name, {\n            get: function () {\n                const self = this.getLatest();\n                return self[prop.privateName];\n            },\n            set: function (newVal) {\n                const writable = this.getWritable();\n                writable[prop.privateName] = newVal;\n            }\n        });\n    });\n\n    return GeneratedDecoratorNode;\n}\n","import cleanBasicHtml from '@tryghost/kg-clean-basic-html';\n\nexport function buildCleanBasicHtmlForElement(domNode) {\n    return function _cleanBasicHtml(html, additionalOptions = {}) {\n        const cleanedHtml = cleanBasicHtml(html, {\n            createDocument: (_html) => {\n                const newDoc = domNode.ownerDocument.implementation.createHTMLDocument();\n                newDoc.body.innerHTML = _html;\n                return newDoc;\n            },\n            ...additionalOptions\n        });\n        return cleanedHtml;\n    };\n}\n","import {buildCleanBasicHtmlForElement} from './build-clean-basic-html-for-element';\n\nexport function readCaptionFromElement(element, {selector = 'figcaption'} = {}) {\n    const cleanBasicHtml = buildCleanBasicHtmlForElement(element);\n\n    let caption;\n\n    const figcaptions = Array.from(element.querySelectorAll(selector));\n    if (figcaptions.length) {\n        figcaptions.forEach((figcaption) => {\n            const cleanHtml = cleanBasicHtml(figcaption.innerHTML);\n            caption = caption ? `${caption} / ${cleanHtml}` : cleanHtml;\n        });\n    }\n\n    return caption;\n}\n","export function readImageAttributesFromElement(element) {\n    const attrs = {};\n\n    if (element.src) {\n        attrs.src = element.src;\n    }\n\n    if (element.width) {\n        attrs.width = element.width;\n    } else if (element.dataset && element.dataset.width) {\n        attrs.width = parseInt(element.dataset.width, 10);\n    }\n\n    if (element.height) {\n        attrs.height = element.height;\n    } else if (element.dataset && element.dataset.height) {\n        attrs.height = parseInt(element.dataset.height, 10);\n    }\n\n    if ((!element.width && !element.height) && element.getAttribute('data-image-dimensions')) {\n        const [, width, height] = (/^(\\d*)x(\\d*)$/gi).exec(element.getAttribute('data-image-dimensions'));\n        attrs.width = parseInt(width, 10);\n        attrs.height = parseInt(height, 10);\n    }\n\n    if (element.alt) {\n        attrs.alt = element.alt;\n    }\n\n    if (element.title) {\n        attrs.title = element.title;\n    }\n\n    if (element.parentNode.tagName === 'A') {\n        const href = element.parentNode.href;\n\n        if (href !== attrs.src) {\n            attrs.href = href;\n        }\n    }\n\n    return attrs;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element.js';\nimport {readImageAttributesFromElement} from '../../utils/read-image-attributes-from-element.js';\n\nexport function parseImageNode(ImageNode) {\n    return {\n        img: () => ({\n            conversion(domNode) {\n                if (domNode.tagName === 'IMG') {\n                    const {src, width, height, alt, title, href} = readImageAttributesFromElement(domNode);\n\n                    const node = new ImageNode({alt, src, title, width, height, href});\n                    return {node};\n                }\n\n                return null;\n            },\n            priority: 1\n        }),\n        figure: (nodeElem) => {\n            const img = nodeElem.querySelector('img');\n            if (img) {\n                return {\n                    conversion(domNode) {\n                        const kgClass = domNode.className.match(/kg-width-(wide|full)/);\n                        const grafClass = domNode.className.match(/graf--layout(FillWidth|OutsetCenter)/);\n\n                        if (!img) {\n                            return null;\n                        }\n\n                        const payload = readImageAttributesFromElement(img);\n\n                        if (kgClass) {\n                            payload.cardWidth = kgClass[1];\n                        } else if (grafClass) {\n                            payload.cardWidth = grafClass[1] === 'FillWidth' ? 'full' : 'wide';\n                        }\n\n                        payload.caption = readCaptionFromElement(domNode);\n\n                        const {src, width, height, alt, title, caption, cardWidth, href} = payload;\n                        const node = new ImageNode({alt, src, title, width, height, caption, cardWidth, href});\n                        return {node};\n                    },\n                    priority: 0 // since we are generically parsing figure elements, we want this to run after others (like the gallery)\n                };\n            }\n            return null;\n        }\n    };\n}\n","export const getAvailableImageWidths = function (image, imageSizes) {\n    // get a sorted list of the available responsive widths\n    const imageWidths = Object.values(imageSizes)\n        .map(({width}) => width)\n        .sort((a, b) => a - b);\n\n    // select responsive widths that are usable based on the image width\n    const availableImageWidths = imageWidths\n        .filter(width => width <= image.width);\n\n    // add the original image size to the responsive list if it's not captured by largest responsive size\n    // - we can't know the width/height of the original `src` image because we don't know if it was resized\n    //   or not. Adding the original image to the responsive list ensures we're not showing smaller sized\n    //   images than we need to be\n    if (image.width > availableImageWidths[availableImageWidths.length - 1] && image.width < imageWidths[imageWidths.length - 1]) {\n        availableImageWidths.push(image.width);\n    }\n\n    return availableImageWidths;\n};\n","export const isLocalContentImage = function (url, siteUrl = '') {\n    const normalizedSiteUrl = siteUrl.replace(/\\/$/, '');\n    const imagePath = url.replace(normalizedSiteUrl, '');\n    return /^(\\/.*|__GHOST_URL__)\\/?content\\/images\\//.test(imagePath);\n};\n","export const isUnsplashImage = function (url) {\n    return /images\\.unsplash\\.com/.test(url);\n};\n","import {isLocalContentImage} from './is-local-content-image';\nimport {getAvailableImageWidths} from './get-available-image-widths';\nimport {isUnsplashImage} from './is-unsplash-image';\n\n// default content sizes: [600, 1000, 1600, 2400]\n\nexport const getSrcsetAttribute = function ({src, width, options}) {\n    if (!options.imageOptimization || options.imageOptimization.srcsets === false || !width || !options.imageOptimization.contentImageSizes) {\n        return;\n    }\n\n    if (isLocalContentImage(src, options.siteUrl) && options.canTransformImage && !options.canTransformImage(src)) {\n        return;\n    }\n\n    const srcsetWidths = getAvailableImageWidths({width}, options.imageOptimization.contentImageSizes);\n\n    // apply srcset if this is a relative image that matches Ghost's image url structure\n    if (isLocalContentImage(src, options.siteUrl)) {\n        const [, imagesPath, filename] = src.match(/(.*\\/content\\/images)\\/(.*)/);\n        const srcs = [];\n\n        srcsetWidths.forEach((srcsetWidth) => {\n            if (srcsetWidth === width) {\n                // use original image path if width matches exactly (avoids 302s from size->original)\n                srcs.push(`${src} ${srcsetWidth}w`);\n            } else if (srcsetWidth <= width) {\n                // avoid creating srcset sizes larger than intrinsic image width\n                srcs.push(`${imagesPath}/size/w${srcsetWidth}/${filename} ${srcsetWidth}w`);\n            }\n        });\n\n        if (srcs.length) {\n            return srcs.join(', ');\n        }\n    }\n\n    // apply srcset if this is an Unsplash image\n    if (isUnsplashImage(src)) {\n        const unsplashUrl = new URL(src);\n        const srcs = [];\n\n        srcsetWidths.forEach((srcsetWidth) => {\n            unsplashUrl.searchParams.set('w', srcsetWidth);\n            srcs.push(`${unsplashUrl.href} ${srcsetWidth}w`);\n        });\n\n        return srcs.join(', ');\n    }\n};\n\nexport const setSrcsetAttribute = function (elem, image, options) {\n    if (!elem || !['IMG', 'SOURCE'].includes(elem.tagName) || !elem.getAttribute('src') || !image) {\n        return;\n    }\n\n    const {src, width} = image;\n    const srcset = getSrcsetAttribute({src, width, options});\n\n    if (srcset) {\n        elem.setAttribute('srcset', srcset);\n    }\n};\n","export const getResizedImageDimensions = function (image, {width: desiredWidth, height: desiredHeight} = {}) {\n    const {width, height} = image;\n    const ratio = width / height;\n\n    if (desiredWidth) {\n        const resizedHeight = Math.round(desiredWidth / ratio);\n\n        return {\n            width: desiredWidth,\n            height: resizedHeight\n        };\n    }\n\n    if (desiredHeight) {\n        const resizedWidth = Math.round(desiredHeight * ratio);\n\n        return {\n            width: resizedWidth,\n            height: desiredHeight\n        };\n    }\n};\n","// If we're in a browser environment, we can use the global document object,\n// but if we're in a non-browser environment, we need to be passed a `createDocument` function\nexport function addCreateDocumentOption(options) {\n    if (!options.createDocument && options.dom) {\n        options.createDocument = function () {\n            return options.dom.window.document;\n        };\n    }\n\n    if (!options.createDocument) {\n        /* c8 ignore start */\n        let document = typeof window !== 'undefined' && window.document;\n\n        if (!document) {\n            throw new Error('Must be passed a `createDocument` function as an option when used in a non-browser environment'); // eslint-disable-line\n        }\n\n        options.createDocument = function () {\n            return document;\n        };\n        /* c8 ignore end */\n    }\n}\n","import {getAvailableImageWidths} from '../../utils/get-available-image-widths';\nimport {isLocalContentImage} from '../../utils/is-local-content-image';\nimport {setSrcsetAttribute} from '../../utils/srcset-attribute';\nimport {getResizedImageDimensions} from '../../utils/get-resized-image-dimensions';\nimport {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderImageNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const figure = document.createElement('figure');\n\n    let figureClasses = 'kg-card kg-image-card';\n    if (node.cardWidth !== 'regular') {\n        figureClasses += ` kg-width-${node.cardWidth}`;\n    }\n    if (node.caption) {\n        figureClasses += ' kg-card-hascaption';\n    }\n\n    figure.setAttribute('class', figureClasses);\n\n    const img = document.createElement('img');\n    img.setAttribute('src', node.src);\n    img.setAttribute('class', 'kg-image');\n    img.setAttribute('alt', node.alt);\n    img.setAttribute('loading', 'lazy');\n\n    if (node.title) {\n        img.setAttribute('title', node.title);\n    }\n\n    if (node.width && node.height) {\n        img.setAttribute('width', node.width);\n        img.setAttribute('height', node.height);\n    }\n\n    // images can be resized to max width, if that's the case output\n    // the resized width/height attrs to ensure 3rd party gallery plugins\n    // aren't affected by differing sizes\n    const {canTransformImage} = options;\n    const {defaultMaxWidth} = options.imageOptimization || {};\n    if (\n        defaultMaxWidth &&\n            node.width > defaultMaxWidth &&\n            isLocalContentImage(node.src, options.siteUrl) &&\n            canTransformImage &&\n            canTransformImage(node.src)\n    ) {\n        const imageDimensions = {\n            width: node.width,\n            height: node.height\n        };\n        const {width, height} = getResizedImageDimensions(imageDimensions, {width: defaultMaxWidth});\n        img.setAttribute('width', width);\n        img.setAttribute('height', height);\n    }\n\n    if (options.target !== 'email') {\n        const imgAttributes = {\n            src: node.src,\n            width: node.width,\n            height: node.height\n        };\n        setSrcsetAttribute(img, imgAttributes, options);\n\n        if (img.getAttribute('srcset') && node.width && node.width >= 720) {\n            // standard size\n            if (!node.cardWidth || node.cardWidth === 'regular') {\n                img.setAttribute('sizes', '(min-width: 720px) 720px');\n            }\n\n            if (node.cardWidth === 'wide' && node.width >= 1200) {\n                img.setAttribute('sizes', '(min-width: 1200px) 1200px');\n            }\n        }\n    }\n\n    // Outlook is unable to properly resize images without a width/height\n    // so we add that at the expected size in emails (600px) and use a higher\n    // resolution image to keep images looking good on retina screens\n    if (options.target === 'email' && node.width && node.height) {\n        let imageDimensions = {\n            width: node.width,\n            height: node.height\n        };\n        if (node.width >= 600) {\n            imageDimensions = getResizedImageDimensions(imageDimensions, {width: 600});\n        }\n        img.setAttribute('width', imageDimensions.width);\n        img.setAttribute('height', imageDimensions.height);\n\n        if (isLocalContentImage(node.src, options.siteUrl) && options.canTransformImage?.(node.src)) {\n            // find available image size next up from 2x600 so we can use it for the \"retina\" src\n            const availableImageWidths = getAvailableImageWidths(node, options.imageOptimization.contentImageSizes);\n            const srcWidth = availableImageWidths.find(width => width >= 1200);\n\n            if (!srcWidth || srcWidth === node.width) {\n                // do nothing, width is smaller than retina or matches the original node src\n            } else {\n                const [, imagesPath, filename] = node.src.match(/(.*\\/content\\/images)\\/(.*)/);\n                img.setAttribute('src', `${imagesPath}/size/w${srcWidth}/${filename}`);\n            }\n        }\n    }\n\n    if (node.href) {\n        const a = document.createElement('a');\n        a.setAttribute('href', node.href);\n        a.appendChild(img);\n        figure.appendChild(a);\n    } else {\n        figure.appendChild(img);\n    }\n\n    if (node.caption) {\n        const caption = document.createElement('figcaption');\n        caption.innerHTML = node.caption;\n        figure.appendChild(caption);\n    }\n\n    return {element: figure};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseImageNode} from './image-parser';\nimport {renderImageNode} from './image-renderer';\nexport class ImageNode extends generateDecoratorNode({\n    nodeType: 'image',\n    properties: [\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'caption', default: '', urlType: 'html', wordCount: true},\n        {name: 'title', default: ''},\n        {name: 'alt', default: ''},\n        {name: 'cardWidth', default: 'regular'},\n        {name: 'width', default: null},\n        {name: 'height', default: null},\n        {name: 'href', default: '', urlType: 'url'}\n    ],\n    defaultRenderFn: renderImageNode\n}) {\n    /* @override */\n    exportJSON() {\n        // checks if src is a data string\n        const {src, width, height, title, alt, caption, cardWidth, href} = this;\n        const isBlob = src && src.startsWith('data:');\n\n        const dataset = {\n            type: 'image',\n            version: 1,\n            src: isBlob ? '<base64String>' : src,\n            width,\n            height,\n            title,\n            alt,\n            caption,\n            cardWidth,\n            href\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        return parseImageNode(this);\n    }\n\n    hasEditMode() {\n        return false;\n    }\n}\n\nexport const $createImageNode = (dataset) => {\n    return new ImageNode(dataset);\n};\n\nexport function $isImageNode(node) {\n    return node instanceof ImageNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element';\n\nexport function parseCodeBlockNode(CodeBlockNode) {\n    return {\n        figure: (nodeElem) => {\n            const pre = nodeElem.querySelector('pre');\n            if (nodeElem.tagName === 'FIGURE' && pre) {\n                return {\n                    conversion(domNode) {        \n                        let code = pre.querySelector('code');\n                        let figcaption = domNode.querySelector('figcaption');\n    \n                        // if there's no caption the pre key should pick it up\n                        if (!code || !figcaption) {\n                            return null;\n                        }\n    \n                        let payload = {\n                            code: code.textContent,\n                            caption: readCaptionFromElement(domNode)\n                        };\n    \n                        let preClass = pre.getAttribute('class') || '';\n                        let codeClass = code.getAttribute('class') || '';\n                        let langRegex = /lang(?:uage)?-(.*?)(?:\\s|$)/i;\n                        let languageMatches = preClass.match(langRegex) || codeClass.match(langRegex);\n                        if (languageMatches) {\n                            payload.language = languageMatches[1].toLowerCase();\n                        }\n    \n                        const node = new CodeBlockNode(payload);\n                        return {node};\n                    },\n                    priority: 2 // falls back to pre if no caption\n                };\n            }\n            return null;\n        },\n        pre: () => ({\n            conversion(domNode) {\n                if (domNode.tagName === 'PRE') {\n                    let [codeElement] = domNode.children;\n\n                    if (codeElement && codeElement.tagName === 'CODE') {\n                        let payload = {code: codeElement.textContent};\n                        let preClass = domNode.getAttribute('class') || '';\n                        let codeClass = codeElement.getAttribute('class') || '';\n                        let langRegex = /lang(?:uage)?-(.*?)(?:\\s|$)/i;\n                        let languageMatches = preClass.match(langRegex) || codeClass.match(langRegex);\n                        if (languageMatches) {\n                            payload.language = languageMatches[1].toLowerCase();\n                        }\n                        const node = new CodeBlockNode(payload);\n                        return {node};\n                    }\n                }\n\n                return null;\n            },\n            priority: 1\n        })\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderCodeBlockNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.code || node.code.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const pre = document.createElement('pre');\n    const code = document.createElement('code');\n\n    if (node.language) {\n        code.setAttribute('class', `language-${node.language}`);\n    }\n\n    code.appendChild(document.createTextNode(node.code));\n    pre.appendChild(code);\n\n    if (node.caption) {\n        let figure = document.createElement('figure');\n        figure.setAttribute('class', 'kg-card kg-code-card');\n        figure.appendChild(pre);\n\n        let figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = node.caption;\n        figure.appendChild(figcaption);\n\n        return {element: figure};\n    } else {\n        return {element: pre};\n    }\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseCodeBlockNode} from './codeblock-parser';\nimport {renderCodeBlockNode} from './codeblock-renderer';\n\nexport class CodeBlockNode extends generateDecoratorNode({\n    nodeType: 'codeblock',\n    properties: [\n        {name: 'code', default: '', wordCount: true},\n        {name: 'language', default: ''},\n        {name: 'caption', default: '', urlType: 'html', wordCount: true}\n    ],\n    defaultRenderFn: renderCodeBlockNode\n}) {\n    static importDOM() {\n        return parseCodeBlockNode(this);\n    }\n\n    isEmpty() {\n        return !this.__code;\n    }\n}\n\nexport function $createCodeBlockNode(dataset) {\n    return new CodeBlockNode(dataset);\n}\n\nexport function $isCodeBlockNode(node) {\n    return node instanceof CodeBlockNode;\n}\n","import markdownHtmlRenderer from '@tryghost/kg-markdown-html-renderer';\nimport {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nexport function renderMarkdownNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const html = markdownHtmlRenderer.render(node.markdown || '', options);\n\n    const element = document.createElement('div');\n    element.innerHTML = html;\n\n    // `type: 'inner'` will render only the innerHTML of the element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element, type: 'inner'};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderMarkdownNode} from './markdown-renderer';\n\nexport class MarkdownNode extends generateDecoratorNode({\n    nodeType: 'markdown',\n    properties: [\n        {name: 'markdown', default: '', urlType: 'markdown', wordCount: true}\n    ],\n    defaultRenderFn: renderMarkdownNode\n}) {\n    isEmpty() {\n        return !this.__markdown;\n    }\n}\n\nexport function $createMarkdownNode(dataset) {\n    return new MarkdownNode(dataset);\n}\n\nexport function $isMarkdownNode(node) {\n    return node instanceof MarkdownNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element';\n\nexport function parseVideoNode(VideoNode) {\n    return {\n        figure: (nodeElem) => {\n            const isKgVideoCard = nodeElem.classList?.contains('kg-video-card');\n            if (nodeElem.tagName === 'FIGURE' && isKgVideoCard) {\n                return {\n                    conversion(domNode) {\n                        const videoNode = domNode.querySelector('.kg-video-container video');\n                        const durationNode = domNode.querySelector('.kg-video-duration');\n                        const videoSrc = videoNode && videoNode.src;\n                        const videoWidth = videoNode && videoNode.width;\n                        const videoHeight = videoNode && videoNode.height;\n                        const durationText = durationNode && durationNode.innerHTML.trim();\n                        const captionText = readCaptionFromElement(domNode);\n\n                        if (!videoSrc) {\n                            return null;\n                        }\n\n                        const payload = {\n                            src: videoSrc,\n                            loop: !!videoNode.loop,\n                            cardWidth: getCardWidth(videoNode)\n                        };\n\n                        if (durationText) {\n                            const [minutes, seconds] = durationText.split(':');\n                            try {\n                                payload.duration = parseInt(minutes) * 60 + parseInt(seconds);\n                            } catch (e) {\n                                // ignore duration\n                            }\n                        }\n\n                        if (domNode.dataset.kgThumbnail) {\n                            payload.thumbnailSrc = domNode.dataset.kgThumbnail;\n                        }\n\n                        if (domNode.dataset.kgCustomThumbnail) {\n                            payload.customThumbnailSrc = domNode.dataset.kgCustomThumbnail;\n                        }\n\n                        if (captionText) {\n                            payload.caption = captionText;\n                        }\n\n                        if (videoWidth) {\n                            payload.width = videoWidth;\n                        }\n\n                        if (videoHeight) {\n                            payload.height = videoHeight;\n                        }\n\n                        const node = new VideoNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n\nfunction getCardWidth(domNode) {\n    if (domNode.classList.contains('kg-width-full')) {\n        return 'full';\n    } else if (domNode.classList.contains('kg-width-wide')) {\n        return 'wide';\n    } else {\n        return 'regular';\n    }\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderVideoNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const cardClasses = getCardClasses(node).join(' ');\n\n    const htmlString = options.target === 'email'\n        ? emailCardTemplate({node, options, cardClasses})\n        : cardTemplate({node, cardClasses});\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString.trim();\n\n    return {element: element.firstElementChild};\n}\n\nexport function cardTemplate({node, cardClasses}) {\n    const width = node.width;\n    const height = node.height;\n    const posterSpacerSrc = `https://img.spacergif.org/v1/${width}x${height}/0a/spacer.png`;\n    const autoplayAttr = node.loop ? 'loop autoplay muted' : '';\n    const thumbnailSrc = node.customThumbnailSrc || node.thumbnailSrc;\n    const hideControlsClass = node.loop ? ' kg-video-hide' : '';\n\n    return (\n        `\n        <figure class=\"${cardClasses}\" data-kg-thumbnail=${node.thumbnailSrc} data-kg-custom-thumbnail=${node.customThumbnailSrc}>\n            <div class=\"kg-video-container\">\n                <video\n                    src=\"${node.src}\"\n                    poster=\"${posterSpacerSrc}\"\n                    width=\"${width}\"\n                    height=\"${height}\"\n                    ${autoplayAttr}\n                    playsinline\n                    preload=\"metadata\"\n                    style=\"background: transparent url('${thumbnailSrc}') 50% 50% / cover no-repeat;\"\n                ></video>\n                <div class=\"kg-video-overlay\">\n                    <button class=\"kg-video-large-play-icon\" aria-label=\"Play video\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                            <path d=\"M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z\"/>\n                        </svg>\n                    </button>\n                </div>\n                <div class=\"kg-video-player-container${hideControlsClass}\">\n                    <div class=\"kg-video-player\">\n                        <button class=\"kg-video-play-icon\" aria-label=\"Play video\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"kg-video-pause-icon kg-video-hide\" aria-label=\"Pause video\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <rect x=\"3\" y=\"1\" width=\"7\" height=\"22\" rx=\"1.5\" ry=\"1.5\"></rect>\n                                <rect x=\"14\" y=\"1\" width=\"7\" height=\"22\" rx=\"1.5\" ry=\"1.5\"></rect>\n                            </svg>\n                        </button>\n                        <span class=\"kg-video-current-time\">0:00</span>\n                        <div class=\"kg-video-time\">\n                            /<span class=\"kg-video-duration\">${node.formattedDuration}</span>\n                        </div>\n                        <input type=\"range\" class=\"kg-video-seek-slider\" max=\"100\" value=\"0\">\n                        <button class=\"kg-video-playback-rate\" aria-label=\"Adjust playback speed\">1&#215;</button>\n                        <button class=\"kg-video-unmute-icon\" aria-label=\"Unmute\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"kg-video-mute-icon kg-video-hide\" aria-label=\"Mute\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z\"></path>\n                            </svg>\n                        </button>\n                        <input type=\"range\" class=\"kg-video-volume-slider\" max=\"100\" value=\"100\"/>\n                    </div>\n                </div>\n            </div>\n            ${node.caption ? `<figcaption>${node.caption}</figcaption>` : ''}\n        </figure>\n    `\n    );\n}\n\nexport function emailCardTemplate({node, options, cardClasses}) {\n    const thumbnailSrc = node.customThumbnailSrc || node.thumbnailSrc;\n    const emailTemplateMaxWidth = 600;\n    const aspectRatio = node.width / node.height;\n    const emailSpacerWidth = Math.round(emailTemplateMaxWidth / 4);\n    const emailSpacerHeight = Math.round(emailTemplateMaxWidth / aspectRatio);\n    const posterSpacerSrc = `https://img.spacergif.org/v1/${emailSpacerWidth}x${emailSpacerHeight}/0a/spacer.png`;\n    const outlookCircleLeft = Math.round((emailTemplateMaxWidth / 2) - 39);\n    const outlookCircleTop = Math.round((emailSpacerHeight / 2) - 39);\n    const outlookPlayLeft = Math.round((emailTemplateMaxWidth / 2) - 11);\n    const outlookPlayTop = Math.round((emailSpacerHeight / 2) - 17);\n\n    return (\n        `\n         <figure class=\"${cardClasses}\">\n            <!--[if !mso !vml]-->\n            <a class=\"kg-video-preview\" href=\"${options.postUrl}\" aria-label=\"Play video\" style=\"mso-hide: all\">\n                <table\n                    cellpadding=\"0\"\n                    cellspacing=\"0\"\n                    border=\"0\"\n                    width=\"100%\"\n                    background=\"${thumbnailSrc}\"\n                    role=\"presentation\"\n                    style=\"background: url('${thumbnailSrc}') left top / cover; mso-hide: all\"\n                >\n                    <tr style=\"mso-hide: all\">\n                        <td width=\"25%\" style=\"visibility: hidden; mso-hide: all\">\n                            <img src=\"${posterSpacerSrc}\" alt=\"\" width=\"100%\" border=\"0\" style=\"display:block; height: auto; opacity: 0; visibility: hidden; mso-hide: all;\">\n                        </td>\n                        <td width=\"50%\" align=\"center\" valign=\"middle\" style=\"vertical-align: middle; mso-hide: all;\">\n                            <div class=\"kg-video-play-button\" style=\"mso-hide: all\"><div style=\"mso-hide: all\"></div></div>\n                        </td>\n                        <td width=\"25%\" style=\"mso-hide: all\">&nbsp;</td>\n                    </tr>\n                </table>\n            </a>\n            <!--[endif]-->\n\n            <!--[if vml]>\n            <v:group xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" coordsize=\"${emailTemplateMaxWidth},${emailSpacerHeight}\" coordorigin=\"0,0\" href=\"${options.postUrl}\" style=\"width:${emailTemplateMaxWidth}px;height:${emailSpacerHeight}px;\">\n                <v:rect fill=\"t\" stroked=\"f\" style=\"position:absolute;width:${emailTemplateMaxWidth};height:${emailSpacerHeight};\"><v:fill src=\"${thumbnailSrc}\" type=\"frame\"/></v:rect>\n                <v:oval fill=\"t\" strokecolor=\"white\" strokeweight=\"4px\" style=\"position:absolute;left:${outlookCircleLeft};top:${outlookCircleTop};width:78;height:78\"><v:fill color=\"black\" opacity=\"30%\" /></v:oval>\n                <v:shape coordsize=\"24,32\" path=\"m,l,32,24,16,xe\" fillcolor=\"white\" stroked=\"f\" style=\"position:absolute;left:${outlookPlayLeft};top:${outlookPlayTop};width:30;height:34;\" />\n            </v:group>\n            <![endif]-->\n\n            ${node.caption ? `<figcaption>${node.caption}</figcaption>` : ''}\n        </figure>\n        `\n    );\n}\n\nexport function getCardClasses(node) {\n    let cardClasses = ['kg-card kg-video-card'];\n\n    if (node.cardWidth) {\n        cardClasses.push(`kg-width-${node.cardWidth}`);\n    }\n    if (node.caption) {\n        cardClasses.push(`kg-card-hascaption`);\n    }\n\n    return cardClasses;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseVideoNode} from './video-parser';\nimport {renderVideoNode} from './video-renderer';\nexport class VideoNode extends generateDecoratorNode({\n    nodeType: 'video',\n    properties: [\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'caption', default: '', urlType: 'html', wordCount: true},\n        {name: 'fileName', default: ''},\n        {name: 'mimeType', default: ''},\n        {name: 'width', default: null},\n        {name: 'height', default: null},\n        {name: 'duration', default: 0},\n        {name: 'thumbnailSrc', default: '', urlType: 'url'},\n        {name: 'customThumbnailSrc', default: '', urlType: 'url'},\n        {name: 'thumbnailWidth', default: null},\n        {name: 'thumbnailHeight', default: null},\n        {name: 'cardWidth', default: 'regular'},\n        {name: 'loop', default: false}\n    ],\n    defaultRenderFn: renderVideoNode\n}) {\n    /* override */\n    exportJSON() {\n        const {src, caption, fileName, mimeType, width, height, duration, thumbnailSrc, customThumbnailSrc, thumbnailWidth, thumbnailHeight, cardWidth, loop} = this;\n        // checks if src is a data string\n        const isBlob = src && src.startsWith('data:');\n\n        const dataset = {\n            type: 'video',\n            version: 1,\n            src: isBlob ? '<base64String>' : src,\n            caption,\n            fileName,\n            mimeType,\n            width,\n            height,\n            duration,\n            thumbnailSrc,\n            customThumbnailSrc,\n            thumbnailWidth,\n            thumbnailHeight,\n            cardWidth,\n            loop\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        return parseVideoNode(this);\n    }\n\n    get formattedDuration() {\n        const minutes = Math.floor(this.duration / 60);\n        const seconds = Math.floor(this.duration - (minutes * 60));\n        const paddedSeconds = String(seconds).padStart(2, '0');\n        const formattedDuration = `${minutes}:${paddedSeconds}`;\n        return formattedDuration;\n    }\n}\n\nexport const $createVideoNode = (dataset) => {\n    return new VideoNode(dataset);\n};\n\nexport function $isVideoNode(node) {\n    return node instanceof VideoNode;\n}\n","export function parseAudioNode(AudioNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgAudioCard = nodeElem.classList?.contains('kg-audio-card');\n            if (nodeElem.tagName === 'DIV' && isKgAudioCard) {\n                return {\n                    conversion(domNode) {\n                        const titleNode = domNode?.querySelector('.kg-audio-title');\n                        const audioNode = domNode?.querySelector('.kg-audio-player-container audio');\n                        const durationNode = domNode?.querySelector('.kg-audio-duration');\n                        const thumbnailNode = domNode?.querySelector('.kg-audio-thumbnail');\n                        const title = titleNode && titleNode.innerHTML.trim();\n                        const audioSrc = audioNode && audioNode.src;\n                        const thumbnailSrc = thumbnailNode && thumbnailNode.src;\n                        const durationText = durationNode && durationNode.innerHTML.trim();\n                        const payload = {\n                            src: audioSrc,\n                            title: title\n                        };\n                        if (thumbnailSrc) {\n                            payload.thumbnailSrc = thumbnailSrc;\n                        }\n\n                        if (durationText) {\n                            const [minutes, seconds = 0] = durationText.split(':');\n                            try {\n                                payload.duration = parseInt(minutes) * 60 + parseInt(seconds);\n                            } catch (e) {\n                                // ignore duration\n                            }\n                        }\n\n                        const node = new AudioNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderAudioNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const thumbnailCls = getThumbnailCls(node);\n    const emptyThumbnailCls = getEmptyThumbnailCls(node);\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document, options, thumbnailCls, emptyThumbnailCls);\n    } else {\n        return frontendTemplate(node, document, thumbnailCls, emptyThumbnailCls);\n    }\n}\n\nfunction frontendTemplate(node, document, thumbnailCls, emptyThumbnailCls) {\n    const element = document.createElement('div');\n    element.setAttribute('class', 'kg-card kg-audio-card');\n    const img = document.createElement('img');\n    img.src = node.thumbnailSrc;\n    img.alt = 'audio-thumbnail';\n    img.setAttribute('class', thumbnailCls);\n    element.appendChild(img);\n\n    const emptyThumbnailDiv = document.createElement('div');\n    emptyThumbnailDiv.setAttribute('class', emptyThumbnailCls);\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', '24');\n    svg.setAttribute('height', '24');\n    svg.setAttribute('fill', 'none');\n    const path1 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path1.setAttribute('fill-rule', 'evenodd');\n    path1.setAttribute('clip-rule', 'evenodd');\n    path1.setAttribute('d', 'M7.5 15.33a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-2.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM15 13.83a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-2.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z');\n    svg.appendChild(path1);\n    const path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path2.setAttribute('fill-rule', 'evenodd');\n    path2.setAttribute('clip-rule', 'evenodd');\n    path2.setAttribute('d', 'M14.486 6.81A2.25 2.25 0 0 1 17.25 9v5.579a.75.75 0 0 1-1.5 0v-5.58a.75.75 0 0 0-.932-.727.755.755 0 0 1-.059.013l-4.465.744a.75.75 0 0 0-.544.72v6.33a.75.75 0 0 1-1.5 0v-6.33a2.25 2.25 0 0 1 1.763-2.194l4.473-.746Z');\n    svg.appendChild(path2);\n    const path3 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path3.setAttribute('fill-rule', 'evenodd');\n    path3.setAttribute('clip-rule', 'evenodd');\n    path3.setAttribute('d', 'M3 1.5a.75.75 0 0 0-.75.75v19.5a.75.75 0 0 0 .75.75h18a.75.75 0 0 0 .75-.75V5.133a.75.75 0 0 0-.225-.535l-.002-.002-3-2.883A.75.75 0 0 0 18 1.5H3ZM1.409.659A2.25 2.25 0 0 1 3 0h15a2.25 2.25 0 0 1 1.568.637l.003.002 3 2.883a2.25 2.25 0 0 1 .679 1.61V21.75A2.25 2.25 0 0 1 21 24H3a2.25 2.25 0 0 1-2.25-2.25V2.25c0-.597.237-1.169.659-1.591Z');\n    svg.appendChild(path3);\n    emptyThumbnailDiv.appendChild(svg);\n\n    element.appendChild(emptyThumbnailDiv);\n\n    const audioPlayerContainer = document.createElement('div');\n    audioPlayerContainer.setAttribute('class', 'kg-audio-player-container');\n\n    const audioElement = document.createElement('audio');\n    audioElement.setAttribute('src', node.src);\n    audioElement.setAttribute('preload', 'metadata');\n    audioPlayerContainer.appendChild(audioElement);\n\n    const audioTitle = document.createElement('div');\n    audioTitle.setAttribute('class', 'kg-audio-title');\n    audioTitle.textContent = node.title;\n    audioPlayerContainer.appendChild(audioTitle);\n\n    const audioPlayer = document.createElement('div');\n    audioPlayer.setAttribute('class', 'kg-audio-player');\n    const audioPlayIcon = document.createElement('button');\n    audioPlayIcon.setAttribute('class', 'kg-audio-play-icon');\n    audioPlayIcon.setAttribute('aria-label', 'Play audio');\n    const audioPlayIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    audioPlayIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const playPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    playPath.setAttribute('d', 'M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z');\n    audioPlayIconSvg.appendChild(playPath);\n    audioPlayIcon.appendChild(audioPlayIconSvg);\n    audioPlayer.appendChild(audioPlayIcon);\n\n    const audioPauseIcon = document.createElement('button');\n    audioPauseIcon.setAttribute('class', 'kg-audio-pause-icon kg-audio-hide');\n    audioPauseIcon.setAttribute('aria-label', 'Pause audio');\n    const audioPauseIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    audioPauseIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const rectSvg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rectSvg.setAttribute('x', '3');\n    rectSvg.setAttribute('y', '1');\n    rectSvg.setAttribute('width', '7');\n    rectSvg.setAttribute('height', '22');\n    rectSvg.setAttribute('rx', '1.5');\n    rectSvg.setAttribute('ry', '1.5');\n    audioPauseIconSvg.appendChild(rectSvg);\n    const rectSvg2 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rectSvg2.setAttribute('x', '14');\n    rectSvg2.setAttribute('y', '1');\n    rectSvg2.setAttribute('width', '7');\n    rectSvg2.setAttribute('height', '22');\n    rectSvg2.setAttribute('rx', '1.5');\n    rectSvg2.setAttribute('ry', '1.5');\n    audioPauseIconSvg.appendChild(rectSvg2);\n    audioPauseIcon.appendChild(audioPauseIconSvg);\n    audioPlayer.appendChild(audioPauseIcon);\n\n    const audioDuration = document.createElement('span');\n    audioDuration.setAttribute('class', 'kg-audio-current-time');\n    audioDuration.textContent = '0:00';\n    audioPlayer.appendChild(audioDuration);\n\n    const audioDurationTotal = document.createElement('div');\n    audioDurationTotal.setAttribute('class', 'kg-audio-time');\n    audioDurationTotal.textContent = '/';\n    const audioDUrationNode = document.createElement('span');\n    audioDUrationNode.setAttribute('class', 'kg-audio-duration');\n    audioDUrationNode.textContent = node.duration;\n    audioDurationTotal.appendChild(audioDUrationNode);\n    audioPlayer.appendChild(audioDurationTotal);\n\n    const audioSlider = document.createElement('input');\n    audioSlider.setAttribute('type', 'range');\n    audioSlider.setAttribute('class', 'kg-audio-seek-slider');\n    audioSlider.setAttribute('max', '100');\n    audioSlider.setAttribute('value', '0');\n    audioPlayer.appendChild(audioSlider);\n\n    const playbackRate = document.createElement('button');\n    playbackRate.setAttribute('class', 'kg-audio-playback-rate');\n    playbackRate.setAttribute('aria-label', 'Adjust playback speed');\n    playbackRate.innerHTML = '1&#215;'; // innerHTML not textContent because we need the HTML entity\n    audioPlayer.appendChild(playbackRate);\n\n    const unmuteIcon = document.createElement('button');\n    unmuteIcon.setAttribute('class', 'kg-audio-unmute-icon');\n    unmuteIcon.setAttribute('aria-label', 'Unmute');\n    const unmuteIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    unmuteIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const unmutePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    unmutePath.setAttribute('d', 'M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z');\n    unmuteIconSvg.appendChild(unmutePath);\n    unmuteIcon.appendChild(unmuteIconSvg);\n    audioPlayer.appendChild(unmuteIcon);\n\n    const muteIcon = document.createElement('button');\n    muteIcon.setAttribute('class', 'kg-audio-mute-icon kg-audio-hide');\n    muteIcon.setAttribute('aria-label', 'Mute');\n\n    const muteIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    muteIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const mutePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    mutePath.setAttribute('d', 'M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z');\n    muteIconSvg.appendChild(mutePath);\n    muteIcon.appendChild(muteIconSvg);\n    audioPlayer.appendChild(muteIcon);\n\n    const volumeSlider = document.createElement('input');\n    volumeSlider.setAttribute('type', 'range');\n    volumeSlider.setAttribute('class', 'kg-audio-volume-slider');\n    volumeSlider.setAttribute('max', '100');\n    volumeSlider.setAttribute('value', '100');\n    audioPlayer.appendChild(volumeSlider);\n\n    audioPlayerContainer.appendChild(audioPlayer);\n    element.appendChild(audioPlayerContainer);\n\n    return {element};\n}\n\nfunction emailTemplate(node, document, options, thumbnailCls, emptyThumbnailCls) {\n    const html = (`\n        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"kg-audio-card\">\n                <tr>\n                    <td>\n                        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                            <tr>\n                                <td width=\"60\">\n                                    <a href=\"${options.postUrl}\" style=\"display: block; width: 60px; height: 60px; padding-top: 4px; padding-right: 16px; padding-bottom: 4px; padding-left: 4px; border-radius: 2px;\">\n                                        ${node.thumbnailSrc ? `\n                                        <img src=\"${node.thumbnailSrc}\" class=\"${thumbnailCls}\" style=\"width: 60px; height: 60px; object-fit: cover; border: 0; border-radius: 2px;\">\n                                        ` : `\n                                        <img src=\"https://static.ghost.org/v4.0.0/images/audio-file-icon.png\" class=\"${emptyThumbnailCls}\" style=\"width: 24px; height: 24px; padding: 18px; border-radius: 2px;\">\n                                        `}\n                                    </a>\n                                </td>\n                                <td style=\"position: relative; vertical-align: center;\" valign=\"middle\">\n                                    <a href=\"${options.postUrl}\" style=\"position: absolute; display: block; top: 0; right: 0; bottom: 0; left: 0;\"></a>\n                                    <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                                        <tr>\n                                            <td>\n                                                <a href=\"${options.postUrl}\" class=\"kg-audio-title\">${node.title}</a>\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td>\n                                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                                                    <tr>\n                                                        <td width=\"24\" style=\"vertical-align: middle;\" valign=\"middle\">\n                                                            <a href=\"${options.postUrl}\" class=\"kg-audio-play-button\"></a>\n                                                        </td>\n                                                        <td style=\"vertical-align: middle;\" valign=\"middle\">\n                                                            <a href=\"${options.postUrl}\" class=\"kg-audio-duration\">${getFormattedDuration(node.duration)}<span class=\"kg-audio-link\"> • Click to play audio</span></a>\n                                                        </td>\n                                                    </tr>\n                                                </table>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n            `);\n\n    const container = document.createElement('div');\n    container.innerHTML = html.trim();\n\n    return {element: container.firstElementChild};\n}\n\nfunction getThumbnailCls(node) {\n    let thumbnailCls = 'kg-audio-thumbnail';\n\n    if (!node.thumbnailSrc) {\n        thumbnailCls += ' kg-audio-hide';\n    }\n\n    return thumbnailCls;\n}\n\nfunction getEmptyThumbnailCls(node) {\n    let emptyThumbnailCls = 'kg-audio-thumbnail placeholder';\n\n    if (node.thumbnailSrc) {\n        emptyThumbnailCls += ' kg-audio-hide';\n    }\n\n    return emptyThumbnailCls;\n}\n\nfunction getFormattedDuration(duration = 200) {\n    const minutes = Math.floor(duration / 60);\n    const seconds = Math.floor(duration - (minutes * 60));\n    const paddedSeconds = String(seconds).padStart(2, '0');\n    const formattedDuration = `${minutes}:${paddedSeconds}`;\n    return formattedDuration;\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseAudioNode} from './audio-parser';\nimport {renderAudioNode} from './audio-renderer';\n\nexport class AudioNode extends generateDecoratorNode({\n    nodeType: 'audio',\n    properties: [\n        {name: 'duration', default: 0},\n        {name: 'mimeType', default: ''},\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'title', default: ''},\n        {name: 'thumbnailSrc', default: ''}\n    ],\n    defaultRenderFn: renderAudioNode\n}) {\n    static importDOM() {\n        return parseAudioNode(this);\n    }\n}\n\nexport const $createAudioNode = (dataset) => {\n    return new AudioNode(dataset);\n};\n\nexport function $isAudioNode(node) {\n    return node instanceof AudioNode;\n}\n","export function cleanDOM(node, allowedTags) {\n    for (let i = 0; i < node.childNodes.length; i++) {\n        let child = node.childNodes[i];\n        if (child.nodeType === 1 && !allowedTags.includes(child.tagName)) {\n            while (child.firstChild) {\n                node.insertBefore(child.firstChild, child);\n            }\n            node.removeChild(child);\n            i -= 1;\n        } else if (child.nodeType === 1) {\n            cleanDOM(child, allowedTags);\n        }\n    }\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {cleanDOM} from '../../utils/clean-dom';\n\nexport function renderCalloutNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n    const element = document.createElement('div');\n\n    // backgroundColor can end up with `rgba(0, 0, 0, 0)` from old mobiledoc copy/paste\n    // that is invalid when used in a class name so fall back to `white` when we don't have\n    // something that looks like a valid class\n    if (!node.backgroundColor || !node.backgroundColor.match(/^[a-zA-Z\\d-]+$/)) {\n        node.backgroundColor = 'white';\n    }\n\n    element.classList.add('kg-card', 'kg-callout-card', `kg-callout-card-${node.backgroundColor}`);\n\n    if (node.calloutEmoji) {\n        const emojiElement = document.createElement('div');\n        emojiElement.classList.add('kg-callout-emoji');\n        emojiElement.textContent = node.calloutEmoji;\n        element.appendChild(emojiElement);\n    }\n\n    const textElement = document.createElement('div');\n    textElement.classList.add('kg-callout-text');\n\n    const temporaryContainer = document.createElement('div');\n    temporaryContainer.innerHTML = node.calloutText;\n\n    const allowedTags = ['A', 'STRONG', 'EM', 'B', 'I', 'BR', 'CODE', 'MARK', 'S', 'DEL', 'U', 'SUP', 'SUB'];\n    cleanDOM(temporaryContainer, allowedTags);\n\n    textElement.innerHTML = temporaryContainer.innerHTML;\n    element.appendChild(textElement);\n\n    return {element};\n}\n","const getColorTag = (nodeElem) => {\n    const colorClass = nodeElem.classList?.value?.match(/kg-callout-card-(\\w+)/);\n    return colorClass && colorClass[1];\n};\n\nexport function parseCalloutNode(CalloutNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgCalloutCard = nodeElem.classList?.contains('kg-callout-card');\n            if (nodeElem.tagName === 'DIV' && isKgCalloutCard) {\n                return {\n                    conversion(domNode) {\n                        const textNode = domNode?.querySelector('.kg-callout-text');\n                        const emojiNode = domNode?.querySelector('.kg-callout-emoji');\n                        const color = getColorTag(domNode);\n\n                        const payload = {\n                            calloutText: textNode && textNode.innerHTML.trim() || '',\n                            calloutEmoji: emojiNode && emojiNode.innerHTML.trim() || '',\n                            backgroundColor: color\n                        };\n\n                        const node = new CalloutNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderCalloutNode} from './callout-renderer';\nimport {parseCalloutNode} from './callout-parser';\n\nexport class CalloutNode extends generateDecoratorNode({\n    nodeType: 'callout',\n    properties: [\n        {name: 'calloutText', default: '', wordCount: true},\n        {name: 'calloutEmoji', default: '💡'},\n        {name: 'backgroundColor', default: 'blue'}\n    ],\n    defaultRenderFn: renderCalloutNode\n}) {\n    /* override */\n    constructor({calloutText, calloutEmoji, backgroundColor} = {}, key) {\n        super(key);\n        this.__calloutText = calloutText || '';\n        this.__calloutEmoji = calloutEmoji !== undefined ? calloutEmoji : '💡';\n        this.__backgroundColor = backgroundColor || 'blue';\n    }\n\n    static importDOM() {\n        return parseCalloutNode(this);\n    }\n}\n\nexport function $isCalloutNode(node) {\n    return node instanceof CalloutNode;\n}\n\nexport const $createCalloutNode = (dataset) => {\n    return new CalloutNode(dataset);\n};\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderWithVisibility} from '../../utils/visibility';\nimport {getResizedImageDimensions} from '../../utils/get-resized-image-dimensions';\nimport {isLocalContentImage} from '../../utils/is-local-content-image';\nimport {buildCleanBasicHtmlForElement} from '../../utils/build-clean-basic-html-for-element';\n\nconst showButton = dataset => dataset.showButton && dataset.buttonUrl && dataset.buttonText;\n\nconst wrapWithLink = (dataset, content) => {\n    if (!showButton(dataset)) {\n        return content;\n    }\n\n    return `<a href=\"${dataset.buttonUrl}\">${content}</a>`;\n};\n\nfunction ctaCardTemplate(dataset) {\n    // Add validation for buttonColor\n    if (!dataset.buttonColor || !dataset.buttonColor.match(/^[a-zA-Z\\d-]+|#([a-fA-F\\d]{3}|[a-fA-F\\d]{6})$/)) {\n        dataset.buttonColor = 'accent';\n    }\n    const buttonAccent = dataset.buttonColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonStyle = dataset.buttonColor === 'accent'\n        ? `style=\"color: ${dataset.buttonTextColor};\"`\n        : `style=\"background-color: ${dataset.buttonColor}; color: ${dataset.buttonTextColor};\"`;\n\n    return `\n        <div class=\"kg-card kg-cta-card kg-cta-bg-${dataset.backgroundColor} kg-cta-${dataset.layout} ${dataset.showDividers ? '' : 'kg-cta-no-dividers'} ${dataset.imageUrl ? 'kg-cta-has-img' : ''} ${dataset.linkColor === 'accent' ? 'kg-cta-link-accent' : ''} ${dataset.alignment === 'center' ? 'kg-cta-centered' : ''}\" data-layout=\"${dataset.layout}\">\n            ${dataset.hasSponsorLabel ? `\n                <div class=\"kg-cta-sponsor-label-wrapper\">\n                    <div class=\"kg-cta-sponsor-label\">\n                        ${dataset.sponsorLabel}\n                    </div>\n                </div>\n            ` : ''}\n            <div class=\"kg-cta-content\">\n                ${dataset.imageUrl ? `\n                    <div class=\"kg-cta-image-container\">\n                        ${wrapWithLink(dataset, `<img src=\"${dataset.imageUrl}\" alt=\"CTA Image\" ${dataset?.imageWidth && dataset.imageHeight ? `data-image-dimensions=\"${dataset.imageWidth}x${dataset.imageHeight}\"` : '' }>`)}\n                    </div>\n                ` : ''}\n                ${dataset.textValue || dataset.showButton ? `\n                    <div class=\"kg-cta-content-inner\">\n                    ${dataset.textValue ? `\n                        <div class=\"kg-cta-text\">\n                            ${dataset.textValue}\n                        </div>\n                    ` : ''}\n                    ${showButton(dataset) ? `\n                        <a href=\"${dataset.buttonUrl}\" class=\"kg-cta-button ${buttonAccent}\" ${buttonStyle}>\n                            ${dataset.buttonText}\n                        </a>\n                        ` : ''}\n                    </div>\n                ` : ''}\n            </div>\n        </div>\n    `;\n}\n\nfunction emailCTATemplate(dataset, options = {}) {\n    // accent button color backgrounds are set in main template styles,\n    // for other button colors we need to set the background color explicitly\n    let buttonStyle = dataset.buttonColor === 'accent'\n        ? `color: ${dataset.buttonTextColor};`\n        : `background-color: ${dataset.buttonColor}; color: ${dataset.buttonTextColor};`;\n    // by default we duplicate style across the <td> and <a> tags, but\n    // we separate the variables to allow <a> tag style overrides for outline buttons\n    let buttonLinkStyle = buttonStyle;\n\n    if (\n        (options?.feature?.emailCustomization || options?.feature?.emailCustomizationAlpha) &&\n        options?.design?.buttonStyle === 'outline' &&\n        // accent buttons are fully handled by main template CSS\n        dataset.buttonColor !== 'accent'\n    ) {\n        buttonStyle = `\n            border: 1px solid ${dataset.buttonColor};\n            background-color: transparent;\n            color: ${dataset.buttonColor};\n        `;\n        buttonLinkStyle = `\n            background-color: transparent;\n            color: ${dataset.buttonColor};\n        `;\n    }\n\n    let imageDimensions;\n\n    if (dataset.imageUrl && dataset.imageWidth && dataset.imageHeight) {\n        imageDimensions = {\n            width: dataset.imageWidth,\n            height: dataset.imageHeight\n        };\n\n        if (dataset.imageWidth >= 560) {\n            imageDimensions = getResizedImageDimensions(imageDimensions, {width: 560});\n        }\n    }\n\n    if (dataset.layout === 'minimal' && dataset.imageUrl) {\n        if (isLocalContentImage(dataset.imageUrl, options.siteUrl) && options.canTransformImage?.(dataset.imageUrl)) {\n            const [, imagesPath, filename] = dataset.imageUrl.match(/(.*\\/content\\/images)\\/(.*)/);\n            const iconSize = options?.imageOptimization?.internalImageSizes?.['email-cta-minimal-image'] || {width: 256, height: 256}; // default to 256 since we know the image is a square\n            dataset.imageUrl = `${imagesPath}/size/w${iconSize.width}h${iconSize.height}/${filename}`;\n        }\n    }\n\n    if (options.feature?.emailCustomization || options.feature?.emailCustomizationAlpha) {\n        const renderContent = () => {\n            if (dataset.layout === 'minimal') {\n                return `\n                    <tr>\n                        <td class=\"kg-cta-content\">\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" class=\"kg-cta-content-wrapper\">\n                                <tr>\n                                    ${dataset.imageUrl ? `\n                                        <td class=\"kg-cta-image-container\" width=\"64\">\n                                            ${wrapWithLink(dataset, `<img src=\"${dataset.imageUrl}\" alt=\"CTA Image\" class=\"kg-cta-image\" width=\"64\" height=\"64\">`)}\n                                        </td>\n                                    ` : ''}\n                                    <td class=\"kg-cta-content-inner\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                            ${dataset.textValue ? `\n                                                <tr>\n                                                    <td class=\"kg-cta-text\">\n                                                        ${dataset.textValue}\n                                                    </td>\n                                                </tr>\n                                            ` : ''}\n                                            ${showButton(dataset) ? `\n                                            <tr>\n                                                <td class=\"kg-cta-button-container\">\n                                                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"btn\">\n                                                        <tr>\n                                                            <td class=\"${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\" style=\"${buttonStyle}\">\n                                                                <a href=\"${dataset.buttonUrl}\"\n                                                                   class=\"${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\"\n                                                                   style=\"${buttonLinkStyle}\"\n                                                                >\n                                                                    ${dataset.buttonText}\n                                                                </a>\n                                                            </td>\n                                                        </tr>\n                                                    </table>\n                                                </td>\n                                            </tr>\n                                            ` : ''}\n                                        </table>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                `;\n            }\n\n            return `\n                <tr>\n                    <td class=\"kg-cta-content\">\n                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" class=\"kg-cta-content-wrapper\">\n                            ${dataset.imageUrl ? `\n                                <tr>\n                                    <td class=\"kg-cta-image-container\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                            <tr>\n                                                <td>\n                                                    ${wrapWithLink(dataset, `<img src=\"${dataset.imageUrl}\" alt=\"CTA Image\" class=\"kg-cta-image\" ${imageDimensions ? `width=\"${imageDimensions.width}\"` : ''} ${imageDimensions ? `height=\"${imageDimensions.height}\"` : ''}>`)}\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </td>\n                                </tr>\n                            ` : ''}\n                            <tr>\n                                <td class=\"kg-cta-text\">\n                                    ${dataset.textValue}\n                                </td>\n                            </tr>\n                            ${showButton(dataset) ? `\n                                <tr>\n                                    <td class=\"kg-cta-button-container\" align=\"${dataset.alignment}\">\n                                        <table class=\"btn\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                                            <tr>\n                                                <td class=\"${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\" style=\"${buttonStyle}\" align=\"${dataset.alignment}\">\n                                                    <a href=\"${dataset.buttonUrl}\"\n                                                       class=\"${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\"\n                                                       style=\"${buttonLinkStyle}\"\n                                                    >\n                                                        ${dataset.buttonText}\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </td>\n                                </tr>\n                            ` : ''}\n                        </table>\n                    </td>\n                </tr>\n            `;\n        };\n\n        return `\n            <table class=\"kg-card kg-cta-card kg-cta-bg-${dataset.backgroundColor} ${dataset.showDividers ? '' : 'kg-cta-no-dividers'} kg-cta-${dataset.layout} ${dataset.hasSponsorLabel ? '' : 'kg-cta-no-label'} ${dataset.textValue ? '' : 'kg-cta-no-text'} ${dataset.imageUrl ? 'kg-cta-has-img' : ''} ${dataset.linkColor === 'accent' ? 'kg-cta-link-accent' : ''} ${dataset.alignment === 'center' ? 'kg-cta-centered' : ''}\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                ${dataset.hasSponsorLabel ? `\n                    <tr>\n                        <td>\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                <tr>\n                                    <td class=\"kg-cta-sponsor-label\">\n                                        ${dataset.sponsorLabel}\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                ` : ''}\n                ${renderContent()}\n            </table>\n        `;\n    } else {\n        const renderContent = () => {\n            if (dataset.layout === 'minimal') {\n                return `\n                    <tr>\n                        <td class=\"kg-cta-content\">\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" class=\"kg-cta-content-wrapper\">\n                                <tr>\n                                    ${dataset.imageUrl ? `\n                                        <td class=\"kg-cta-image-container\" width=\"64\">\n                                            ${wrapWithLink(dataset, `<img src=\"${dataset.imageUrl}\" alt=\"CTA Image\" class=\"kg-cta-image\" width=\"64\" height=\"64\">`)}\n                                        </td>\n                                    ` : ''}\n                                    <td class=\"kg-cta-content-inner\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                            ${dataset.textValue ? `\n                                                <tr>\n                                                    <td class=\"kg-cta-text\">\n                                                        ${dataset.textValue}\n                                                    </td>\n                                                </tr>\n                                            ` : ''}\n                                            ${showButton(dataset) ? `\n                                            <tr>\n                                                <td class=\"kg-cta-button-container\">\n                                                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"kg-cta-button-wrapper\">\n                                                        <tr>\n                                                            <td class=\"${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\" style=\"${buttonStyle}\">\n                                                                <a href=\"${dataset.buttonUrl}\"\n                                                                   class=\"kg-cta-button ${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\"\n                                                                   style=\"${buttonStyle}\"\n                                                                >\n                                                                    ${dataset.buttonText}\n                                                                </a>\n                                                            </td>\n                                                        </tr>\n                                                    </table>\n                                                </td>\n                                            </tr>\n                                            ` : ''}\n                                        </table>\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                `;\n            }\n\n            return `\n                <tr>\n                    <td class=\"kg-cta-content\">\n                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" class=\"kg-cta-content-wrapper\">\n                            ${dataset.imageUrl ? `\n                                <tr>\n                                    <td class=\"kg-cta-image-container\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                            <tr>\n                                                <td>\n                                                    ${wrapWithLink(dataset, `<img src=\"${dataset.imageUrl}\" alt=\"CTA Image\" class=\"kg-cta-image\" ${imageDimensions ? `width=\"${imageDimensions.width}\"` : ''} ${imageDimensions ? `height=\"${imageDimensions.height}\"` : ''}>`)}\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </td>\n                                </tr>\n                            ` : ''}\n                            <tr>\n                                <td class=\"kg-cta-text\">\n                                    ${dataset.textValue}\n                                </td>\n                            </tr>\n                            ${showButton(dataset) ? `\n                                <tr>\n                                    <td class=\"kg-cta-button-container\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                                            <tr>\n                                                <td class=\"kg-cta-button-wrapper ${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\" style=\"${buttonStyle}\">\n                                                    <a href=\"${dataset.buttonUrl}\"\n                                                       class=\"kg-cta-button ${dataset.buttonColor === 'accent' ? 'kg-style-accent' : ''}\"\n                                                       style=\"${buttonStyle}\"\n                                                    >\n                                                        ${dataset.buttonText}\n                                                    </a>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </td>\n                                </tr>\n                            ` : ''}\n                        </table>\n                    </td>\n                </tr>\n            `;\n        };\n\n        return `\n            <table class=\"kg-card kg-cta-card kg-cta-bg-${dataset.backgroundColor} ${dataset.showDividers ? '' : 'kg-cta-no-dividers'} kg-cta-${dataset.layout} ${dataset.hasSponsorLabel ? '' : 'kg-cta-no-label'} ${dataset.textValue ? '' : 'kg-cta-no-text'} ${dataset.imageUrl ? 'kg-cta-has-img' : ''} ${dataset.linkColor === 'accent' ? 'kg-cta-link-accent' : ''} ${dataset.alignment === 'center' ? 'kg-cta-centered' : ''}\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                ${dataset.hasSponsorLabel ? `\n                    <tr>\n                        <td>\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                <tr>\n                                    <td class=\"kg-cta-sponsor-label\">\n                                        ${dataset.sponsorLabel}\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                ` : ''}\n                ${renderContent()}\n            </table>\n        `;\n    }\n}\n\nexport function renderCallToActionNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n    const dataset = {\n        layout: node.layout,\n        alignment: node.alignment,\n        textValue: node.textValue,\n        showButton: node.showButton,\n        showDividers: node.showDividers,\n        buttonText: node.buttonText,\n        buttonUrl: node.buttonUrl,\n        buttonColor: node.buttonColor,\n        buttonTextColor: node.buttonTextColor,\n        hasSponsorLabel: node.hasSponsorLabel,\n        backgroundColor: node.backgroundColor,\n        sponsorLabel: node.sponsorLabel,\n        imageUrl: node.imageUrl,\n        imageWidth: node.imageWidth,\n        imageHeight: node.imageHeight,\n        linkColor: node.linkColor\n    };\n\n    // Add validation for backgroundColor\n\n    if (!dataset.backgroundColor || !dataset.backgroundColor.match(/^[a-zA-Z\\d-]+|#([a-fA-F\\d]{3}|[a-fA-F\\d]{6})$/)) {\n        dataset.backgroundColor = 'white';\n    }\n\n    if (options.target === 'email') {\n        const emailDoc = options.createDocument();\n        const emailDiv = emailDoc.createElement('div');\n\n        emailDiv.innerHTML = emailCTATemplate(dataset, options);\n\n        return renderWithVisibility({element: emailDiv.firstElementChild}, node.visibility, options);\n    }\n\n    const element = document.createElement('div');\n\n    if (dataset.hasSponsorLabel) {\n        const cleanBasicHtml = buildCleanBasicHtmlForElement(element);\n        const cleanedHtml = cleanBasicHtml(dataset.sponsorLabel, {firstChildInnerContent: true});\n        dataset.sponsorLabel = cleanedHtml;\n    }\n    const htmlString = ctaCardTemplate(dataset);\n\n    element.innerHTML = htmlString?.trim();\n\n    return renderWithVisibility({element: element.firstElementChild}, node.visibility, options);\n}\n","export const rgbToHex = (rgb) => {\n    if (rgb === 'transparent') {\n        return rgb;\n    }\n\n    try {\n        // Extract the red, green, and blue values from the RGB string\n        const [r, g, b] = rgb.match(/\\d+/g);\n        // Convert each component to hexadecimal\n        const red = parseInt(r, 10).toString(16).padStart(2, '0');\n        const green = parseInt(g, 10).toString(16).padStart(2, '0');\n        const blue = parseInt(b, 10).toString(16).padStart(2, '0');\n        // Concatenate the hexadecimal values\n        const hex = `#${red}${green}${blue}`;\n        return hex;\n    } catch (e) {\n        return null;\n    }\n};\n","import {rgbToHex} from '../../utils/rgb-to-hex';\nimport {readImageAttributesFromElement} from '../../utils/read-image-attributes-from-element.js';\n\nexport function parseCallToActionNode(CallToActionNode) {\n    return {\n        div: (nodeElem) => {\n            const isCallToActionElement = nodeElem.classList?.contains('kg-cta-card');\n            if (isCallToActionElement) {\n                return {\n                    conversion(domNode) {\n                        const div = domNode;\n                        const layout = div.getAttribute('data-layout') || 'minimal';\n                        const alignment = div.getAttribute('data-alignment') || 'left';\n                        const textValueElement = domNode.querySelector('.kg-cta-text');\n                        const buttonElement = domNode.querySelector('.kg-cta-button');\n                        const buttonStyles = buttonElement?.style || {};\n                        const buttonColor = buttonStyles.backgroundColor || '#000000';\n                        const buttonTextColor = buttonStyles.color || '#ffffff';\n                        const sponsorLabelElement = domNode.querySelector('.kg-cta-sponsor-label');\n\n                        const bgMatch = div.className.match(/kg-cta-bg-(\\w+)/);\n                        const backgroundColor = bgMatch ? bgMatch[1] : 'grey';\n                        const showDividers = div.classList.contains('kg-cta-has-dividers');\n                        const imageContainer = domNode.querySelector('.kg-cta-image-container');\n                        const imageElement = imageContainer?.querySelector('img');\n                        let imageData = {\n                            imageUrl: '',\n                            imageWidth: null,\n                            imageHeight: null\n                        };\n\n                        if (imageElement) {\n                            const {src, width, height} = readImageAttributesFromElement(imageElement);\n                            imageData.imageUrl = src;\n                            imageData.imageWidth = width || null;\n                            imageData.imageHeight = height || null;\n                        }\n\n                        // sponsorLabel gets rendered without <p> in the web rendered version.\n                        // however we need to keep the <p> tag in the lexical stored version to ensure\n                        // consistency in the editor when a CTA card is copied and pasted into the editor.\n                        if (sponsorLabelElement) {\n                            sponsorLabelElement.innerHTML = `<p>${sponsorLabelElement.innerHTML.trim()}</p>`;\n                        }\n\n                        const payload = {\n                            layout: layout,\n                            alignment: alignment,\n                            textValue: textValueElement.textContent.trim() || '',\n                            showButton: buttonElement ? true : false,\n                            showDividers: showDividers,\n                            buttonText: buttonElement?.textContent.trim() || '',\n                            buttonUrl: buttonElement?.getAttribute('href'),\n                            buttonColor: rgbToHex(buttonColor),\n                            buttonTextColor: rgbToHex(buttonTextColor),\n                            hasSponsorLabel: sponsorLabelElement ? true : false,\n                            sponsorLabel: sponsorLabelElement?.innerHTML || '',\n                            backgroundColor: backgroundColor,\n                            imageUrl: imageData.imageUrl,\n                            imageWidth: imageData.imageWidth,\n                            imageHeight: imageData.imageHeight\n                        };\n\n                        const node = new CallToActionNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","// eslint-disable-next-line ghost/filenames/match-exported-class\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderCallToActionNode} from './calltoaction-renderer';\nimport {parseCallToActionNode} from './calltoaction-parser';\n\nexport class CallToActionNode extends generateDecoratorNode({\n    nodeType: 'call-to-action',\n    hasVisibility: true,\n    properties: [\n        {name: 'layout', default: 'minimal'},\n        {name: 'alignment', default: 'left'},\n        {name: 'textValue', default: '', wordCount: true},\n        {name: 'showButton', default: true},\n        {name: 'showDividers', default: true},\n        {name: 'buttonText', default: 'Learn more'},\n        {name: 'buttonUrl', default: ''},\n        {name: 'buttonColor', default: '#000000'}, // Where colour is customisable, we should use hex values\n        {name: 'buttonTextColor', default: '#ffffff'},\n        {name: 'hasSponsorLabel', default: true},\n        {name: 'sponsorLabel', default: '<p><span style=\"white-space: pre-wrap;\">SPONSORED</span></p>'},\n        {name: 'backgroundColor', default: 'grey'}, // Since this is one of a few fixed options, we stick to colour names.\n        {name: 'linkColor', default: 'text'},\n        {name: 'imageUrl', default: ''},\n        {name: 'imageWidth', default: null},\n        {name: 'imageHeight', default: null}\n    ],\n    defaultRenderFn: renderCallToActionNode\n}) {\n    static importDOM() {\n        return parseCallToActionNode(this);\n    }\n}\n\nexport const $createCallToActionNode = (dataset) => {\n    return new CallToActionNode(dataset);\n};\n\nexport const $isCallToActionNode = (node) => {\n    return node instanceof CallToActionNode;\n};\n","export class AsideParser {\n    constructor(NodeClass) {\n        this.NodeClass = NodeClass;\n    }\n\n    get DOMConversionMap() {\n        const self = this;\n\n        return {\n            blockquote: () => ({\n                conversion(domNode) {\n                    const isBigQuote = domNode.classList?.contains('kg-blockquote-alt');\n                    if (domNode.tagName === 'BLOCKQUOTE' && isBigQuote) {\n                        const node = new self.NodeClass();\n                        return {node};\n                    }\n\n                    return null;\n                },\n                priority: 0\n            })\n        };\n    }\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {ElementNode} from 'lexical';\nimport {AsideParser} from './AsideParser';\n\nexport class AsideNode extends ElementNode {\n    static getType() {\n        return 'aside';\n    }\n\n    static clone(node) {\n        return new this(\n            node.__key\n        );\n    }\n\n    static get urlTransformMap() {\n        return {};\n    }\n\n    constructor(key) {\n        super(key);\n    }\n\n    static importJSON(serializedNode) {\n        const node = new this();\n        node.setFormat(serializedNode.format);\n        node.setIndent(serializedNode.indent);\n        node.setDirection(serializedNode.direction);\n        return node;\n    }\n\n    exportJSON() {\n        const dataset = {\n            ...super.exportJSON(),\n            type: 'aside',\n            version: 1\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        const parser = new AsideParser(this);\n        return parser.DOMConversionMap;\n    }\n\n    /* c8 ignore start */\n    createDOM() {\n        return document.createElement('div');\n    }\n\n    updateDOM() {\n        return false;\n    }\n\n    isInline() {\n        return false;\n    }\n\n    extractWithChild() {\n        return true;\n    }\n    /* c8 ignore stop */\n}\n\nexport function $createAsideNode() {\n    return new AsideNode();\n}\n\nexport function $isAsideNode(node) {\n    return node instanceof AsideNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nexport function renderHorizontalRuleNode(_, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const element = document.createElement('hr');\n    return {element};\n}","export function parseHorizontalRuleNode(HorizontalRuleNode) {\n    return {\n        hr: () => ({\n            conversion() {\n                const node = new HorizontalRuleNode();\n                return {node};\n            },\n            priority: 0\n        })\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderHorizontalRuleNode} from './horizontalrule-renderer';\nimport {parseHorizontalRuleNode} from './horizontalrule-parser';\n\nexport class HorizontalRuleNode extends generateDecoratorNode({\n    nodeType: 'horizontalrule',\n    defaultRenderFn: renderHorizontalRuleNode\n}) {\n    static importDOM() {\n        return parseHorizontalRuleNode(this);\n    }\n\n    getTextContent() {\n        return '---\\n\\n';\n    }\n\n    hasEditMode() {\n        return false;\n    }\n}\n\nexport function $createHorizontalRuleNode() {\n    return new HorizontalRuleNode();\n}\n\nexport function $isHorizontalRuleNode(node) {\n    return node instanceof HorizontalRuleNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport {renderWithVisibility} from '../../utils/visibility';\n\nexport function renderHtmlNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const html = node.html;\n\n    if (!html) {\n        return renderEmptyContainer(document);\n    }\n\n    const wrappedHtml = `\\n<!--kg-card-begin: html-->\\n${html}\\n<!--kg-card-end: html-->\\n`;\n\n    const textarea = document.createElement('textarea');\n    textarea.value = wrappedHtml;\n\n    if (options.feature?.contentVisibility || node.visibility) {\n        const renderOutput = {element: textarea, type: 'value'};\n        return renderWithVisibility(renderOutput, node.visibility, options);\n    }\n\n    // `type: 'value'` will render the value of the textarea element\n    return {element: textarea, type: 'value'};\n}\n","export function parseHtmlNode(HtmlNode) {\n    return {\n        '#comment': (nodeElem) => {\n            if (nodeElem.nodeType === 8 && nodeElem.nodeValue.trim().match(/^kg-card-begin:\\s?html$/)) {\n                return {\n                    conversion(domNode) {\n                        let html = [];\n                        let nextNode = domNode.nextSibling;\n\n                        while (nextNode && !isHtmlEndComment(nextNode)) {\n                            let currentNode = nextNode;\n                            html.push(currentNode.outerHTML);\n                            nextNode = currentNode.nextSibling;\n                            // remove nodes as we go so that they don't go through the parser\n                            currentNode.remove();\n                        }\n\n                        let payload = {html: html.join('\\n').trim()};\n                        const node = new HtmlNode(payload);\n                        return {node};\n                    },\n                    priority: 0\n                };\n            }\n\n            return null;\n        },\n        table: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'TABLE' && nodeElem.parentNode.tagName !== 'TABLE') {\n                return {\n                    conversion(domNode) {\n                        const payload = {html: domNode.outerHTML};\n                        const node = new HtmlNode(payload);\n                        return {node};\n                    },\n                    priority: 0\n                };\n            }\n\n            return null;\n        }\n    };\n}\n\nfunction isHtmlEndComment(node) {\n    return node && node.nodeType === 8 && node.nodeValue.trim().match(/^kg-card-end:\\s?html$/);\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderHtmlNode} from './html-renderer';\nimport {parseHtmlNode} from './html-parser';\n\nexport class HtmlNode extends generateDecoratorNode({\n    nodeType: 'html',\n    hasVisibility: true,\n    properties: [\n        {name: 'html', default: '', urlType: 'html', wordCount: true}\n    ],\n    defaultRenderFn: renderHtmlNode\n}) {\n    static importDOM() {\n        return parseHtmlNode(this);\n    }\n\n    isEmpty() {\n        return !this.__html;\n    }\n}\n\nexport function $createHtmlNode(dataset) {\n    return new HtmlNode(dataset);\n}\n\nexport function $isHtmlNode(node) {\n    return node instanceof HtmlNode;\n}\n","export function parseToggleNode(ToggleNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgToggleCard = nodeElem.classList?.contains('kg-toggle-card');\n            if (nodeElem.tagName === 'DIV' && isKgToggleCard) {\n                return {\n                    conversion(domNode) {\n                        const headingNode = domNode.querySelector('.kg-toggle-heading-text');\n                        const heading = headingNode.textContent;\n\n                        const contentNode = domNode.querySelector('.kg-toggle-content');\n                        const content = contentNode.textContent;\n\n                        const payload = {\n                            heading,\n                            content\n                        };\n\n                        const node = new ToggleNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}","const oneline = function (strings, ...values) {\n    // Handle case where a plain string is passed\n    if (typeof strings === 'string') {\n        return strings.replace(/\\n\\s+/g, '').trim();\n    }\n\n    // Handle tagged template literal case\n    const result = strings.reduce((acc, str, i) => {\n        return acc + str + (values[i] || '');\n    }, '');\n    // Remove newline+indentation patterns while preserving intentional whitespace\n    return result.replace(/\\n\\s+/g, '').trim();\n};\n\n// Using `html` as a synonym for `oneline` in order to get syntax highlighting in editors\nconst html = oneline;\n\nexport {oneline, html};","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {html} from '../../utils/tagged-template-fns.mjs';\n\nfunction cardTemplate({node}) {\n    return (\n        `\n        <div class=\"kg-card kg-toggle-card\" data-kg-toggle-state=\"close\">\n            <div class=\"kg-toggle-heading\">\n                <h4 class=\"kg-toggle-heading-text\">${node.heading}</h4>\n                <button class=\"kg-toggle-card-icon\" aria-label=\"Expand toggle to read content\">\n                    <svg id=\"Regular\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                        <path class=\"cls-1\" d=\"M23.25,7.311,12.53,18.03a.749.749,0,0,1-1.06,0L.75,7.311\"></path>\n                    </svg>\n                </button>\n            </div>\n            <div class=\"kg-toggle-content\">${node.content}</div>\n        </div>\n        `\n    );\n}\n\nfunction emailCardTemplate({node}, options = {}) {\n    if (options.feature?.emailCustomization || options.feature?.emailCustomizationAlpha) {\n        return (\n            html`\n            <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" class=\"kg-toggle-card\">\n                <tbody>\n                    <tr>\n                        <td class=\"kg-toggle-heading\">\n                            <h4>${node.heading}</h4>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"kg-toggle-content\">\n                            ${node.content}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            `\n        );\n    }\n\n    return (\n        `\n        <div style=\"background: transparent;\n        border: 1px solid rgba(124, 139, 154, 0.25); border-radius: 4px; padding: 20px; margin-bottom: 1.5em;\">\n            <h4 style=\"font-size: 1.375rem; font-weight: 600; margin-bottom: 8px; margin-top:0px\">${node.heading}</h4>\n            <div style=\"font-size: 1rem; line-height: 1.5; margin-bottom: -1.5em;\">${node.content}</div>\n        </div>\n        `\n    );\n}\n\nexport function renderToggleNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    const htmlString = options.target === 'email'\n        ? emailCardTemplate({node}, options)\n        : cardTemplate({node});\n\n    const container = document.createElement('div');\n    container.innerHTML = htmlString.trim();\n\n    const element = container.firstElementChild;\n    return {element};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseToggleNode} from './toggle-parser';\nimport {renderToggleNode} from './toggle-renderer';\n\nexport class ToggleNode extends generateDecoratorNode({\n    nodeType: 'toggle',\n    properties: [\n        {name: 'heading', default: '', urlType: 'html', wordCount: true},\n        {name: 'content', default: '', urlType: 'html', wordCount: true}\n    ],\n    defaultRenderFn: renderToggleNode\n}) {\n    static importDOM() {\n        return parseToggleNode(this);\n    }\n}\n\nexport const $createToggleNode = (dataset) => {\n    return new ToggleNode(dataset);\n};\n\nexport function $isToggleNode(node) {\n    return node instanceof ToggleNode;\n}\n","export function parseButtonNode(ButtonNode) {\n    return {\n        div: (nodeElem) => {\n            const isButtonCard = nodeElem.classList?.contains('kg-button-card');\n            if (nodeElem.tagName === 'DIV' && isButtonCard) {\n                return {\n                    conversion(domNode) {\n                        const alignmentClass = nodeElem.className.match(/kg-align-(left|center)/);\n\n                        let alignment;\n                        if (alignmentClass) {\n                            alignment = alignmentClass[1];\n                        }\n\n                        const buttonNode = domNode?.querySelector('.kg-btn');\n                        const buttonUrl = buttonNode.getAttribute('href');\n                        const buttonText = buttonNode.textContent;\n\n                        const payload = {\n                            buttonText: buttonText,\n                            alignment: alignment,\n                            buttonUrl: buttonUrl\n                        };\n\n                        const node = new ButtonNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import clsx from 'clsx';\nimport {html} from '../tagged-template-fns.mjs';\n\n/**\n * @param {Object} options\n * @param {string} [options.alignment]\n * @param {string} [options.color='accent']\n * @param {string} [options.text='']\n * @param {string} [options.textColor]\n * @param {string} [options.url='']\n * @returns {string}\n */\nexport function renderEmailButton({\n    alignment = '',\n    color = 'accent',\n    text = '',\n    url = ''\n} = {}) {\n    const buttonClasses = clsx(\n        'btn',\n        color === 'accent' && 'btn-accent'\n    );\n\n    return html`\n        <table class=\"${buttonClasses}\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"${alignment}\">\n            <tbody>\n                <tr>\n                    <td align=\"center\">\n                        <a href=\"${url}\">${text}</a>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    `;\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport {renderEmailButton} from '../../utils/render-helpers/email-button';\nimport {html} from '../../utils/tagged-template-fns.mjs';\n\nexport function renderButtonNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.buttonUrl || node.buttonUrl.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    if (options.target === 'email') {\n        return emailTemplate(node, options, document);\n    } else {\n        return frontendTemplate(node, document);\n    }\n}\n\nfunction frontendTemplate(node, document) {\n    const cardClasses = getCardClasses(node);\n\n    const cardDiv = document.createElement('div');\n    cardDiv.setAttribute('class', cardClasses);\n\n    const button = document.createElement('a');\n    button.setAttribute('href', node.buttonUrl);\n    button.setAttribute('class', 'kg-btn kg-btn-accent');\n    button.textContent = node.buttonText || 'Button Title';\n\n    cardDiv.appendChild(button);\n    return {element: cardDiv};\n}\n\nfunction emailTemplate(node, options, document) {\n    const {buttonUrl, buttonText} = node;\n\n    let cardHtml;\n    if (options.feature?.emailCustomization) {\n        cardHtml = html`\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n            <tr>\n                <td>\n                    <table class=\"btn btn-accent\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"${node.alignment}\">\n                        <tr>\n                            <td align=\"center\">\n                                <a href=\"${buttonUrl}\">${buttonText}</a>\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n        </table>`;\n\n        const element = document.createElement('p');\n        element.innerHTML = cardHtml;\n        return {element};\n    } else if (options.feature?.emailCustomizationAlpha) {\n        const buttonHtml = renderEmailButton({\n            alignment: node.alignment,\n            color: 'accent',\n            url: buttonUrl,\n            text: buttonText\n        });\n\n        cardHtml = html`\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n            <tbody>\n                <tr>\n                    <td>\n                        ${buttonHtml}\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        `;\n\n        const element = document.createElement('div');\n        element.innerHTML = cardHtml;\n        return {element, type: 'inner'};\n    } else {\n        cardHtml = html`\n        <div class=\"btn btn-accent\">\n            <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"${node.alignment}\">\n                <tr>\n                    <td align=\"center\">\n                        <a href=\"${buttonUrl}\">${buttonText}</a>\n                    </td>\n                </tr>\n            </table>\n        </div>\n        `;\n\n        const element = document.createElement('p');\n        element.innerHTML = cardHtml;\n        return {element};\n    }\n}\n\nfunction getCardClasses(node) {\n    let cardClasses = ['kg-card kg-button-card'];\n\n    if (node.alignment) {\n        cardClasses.push(`kg-align-${node.alignment}`);\n    }\n\n    return cardClasses.join(' ');\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseButtonNode} from './button-parser';\nimport {renderButtonNode} from './button-renderer';\n\nexport class ButtonNode extends generateDecoratorNode({\n    nodeType: 'button',\n    properties: [\n        {name: 'buttonText', default: ''},\n        {name: 'alignment', default: 'center'},\n        {name: 'buttonUrl', default: '', urlType: 'url'}\n    ],\n    defaultRenderFn: renderButtonNode\n}) {\n    static importDOM() {\n        return parseButtonNode(this);\n    }\n}\n\nexport const $createButtonNode = (dataset) => {\n    return new ButtonNode(dataset);\n};\n\nexport function $isButtonNode(node) {\n    return node instanceof ButtonNode;\n}\n","export function parseBookmarkNode(BookmarkNode) {\n    return {\n        figure: (nodeElem) => {\n            const isKgBookmarkCard = nodeElem.classList?.contains('kg-bookmark-card');\n            if (nodeElem.tagName === 'FIGURE' && isKgBookmarkCard) {\n                return {\n                    conversion(domNode) {\n                        const url = domNode?.querySelector('.kg-bookmark-container')?.getAttribute('href');\n                        const icon = domNode?.querySelector('.kg-bookmark-icon')?.src;\n                        const title = domNode?.querySelector('.kg-bookmark-title')?.textContent;\n                        const description = domNode?.querySelector('.kg-bookmark-description')?.textContent;\n                        const author = domNode?.querySelector('.kg-bookmark-publisher')?.textContent; // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n                        const publisher = domNode?.querySelector('.kg-bookmark-author')?.textContent; // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n                        const thumbnail = domNode?.querySelector('.kg-bookmark-thumbnail img')?.src;\n                        const caption = domNode?.querySelector('figure.kg-bookmark-card figcaption')?.textContent;\n                        const payload = {\n                            url: url,\n                            metadata: {\n                                icon: icon,\n                                title: title,\n                                description: description,\n                                author: author,\n                                publisher: publisher,\n                                thumbnail: thumbnail\n                            },\n                            caption: caption\n                        };\n                        const node = new BookmarkNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        },\n        div: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'DIV' && nodeElem.className.match(/graf--mixtapeEmbed/)) {\n                return {\n                    conversion(domNode) {\n                        // Grab the relevant elements - Anchor wraps most of the data\n                        const anchorElement = domNode.querySelector('.markup--mixtapeEmbed-anchor');\n                        const titleElement = anchorElement.querySelector('.markup--mixtapeEmbed-strong');\n                        const descElement = anchorElement.querySelector('.markup--mixtapeEmbed-em');\n                        // Image is a top level field inside it's own a tag\n                        const imgElement = domNode.querySelector('.mixtapeImage');\n\n                        domNode.querySelector('br').remove();\n\n                        // Grab individual values from the elements\n                        const url = anchorElement.getAttribute('href');\n                        let title = '';\n                        let description = '';\n                        let thumbnail = '';\n\n                        if (titleElement && titleElement.innerHTML) {\n                            title = titleElement.innerHTML.trim();\n                            // Cleanup anchor so we can see what's left now that we've processed title\n                            anchorElement.removeChild(titleElement);\n                        }\n\n                        if (descElement && descElement.innerHTML) {\n                            description = descElement.innerHTML.trim();\n                            // Cleanup anchor so we can see what's left now that we've processed description\n                            anchorElement.removeChild(descElement);\n                        }\n\n                        // Publisher is the remaining text in the anchor, once title & desc are removed\n                        let publisher = anchorElement.innerHTML.trim();\n\n                        // Image is optional,\n                        // The element usually still exists with an additional has.mixtapeImage--empty class and has no background image\n                        if (imgElement && imgElement.style['background-image']) {\n                            thumbnail = imgElement.style['background-image'].match(/url\\(([^)]*?)\\)/)[1];\n                        }\n\n                        let payload = {url,\n                            metadata: {\n                                title,\n                                description,\n                                publisher,\n                                thumbnail\n                            }};\n                        const node = new BookmarkNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","/**\n * Escape HTML special characters\n * @param {string} unsafe\n * @returns string\n */\nexport function escapeHtml(unsafe) {\n    return unsafe\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n}","import {escapeHtml} from './escape-html';\n\nexport function truncateText(text, maxLength) {\n    if (text && text.length > maxLength) {\n        return text.substring(0, maxLength - 1).trim() + '…';\n    } else {\n        return text ?? '';\n    }\n}\n\nexport function truncateHtml(text, maxLength, maxLengthMobile) {\n    // If no mobile length specified or mobile length is larger than desktop,\n    // just do a simple truncate\n    if (!maxLengthMobile || maxLength <= maxLengthMobile) {\n        return escapeHtml(truncateText(text, maxLength));\n    }\n\n    // Handle text shorter than mobile length\n    if (text.length <= maxLengthMobile) {\n        return escapeHtml(text);\n    }\n\n    if (text && text.length > maxLengthMobile) {\n        let ellipsis = '';\n\n        if (text.length > maxLengthMobile && text.length <= maxLength) {\n            ellipsis = '<span class=\"hide-desktop\">…</span>';\n        } else if (text.length > maxLength) {\n            ellipsis = '…';\n        }\n\n        return escapeHtml(text.substring(0, maxLengthMobile - 1)) + '<span class=\"desktop-only\">' + escapeHtml(text.substring(maxLengthMobile - 1, maxLength - 1)) + '</span>' + ellipsis;\n    } else {\n        return escapeHtml(text ?? '');\n    }\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport {escapeHtml} from '../../utils/escape-html';\nimport {truncateHtml} from '../../utils/truncate';\n\nexport function renderBookmarkNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.url || node.url.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document);\n    } else {\n        return frontendTemplate(node, document);\n    }\n}\n\nfunction emailTemplate(node, document) {\n    const title = escapeHtml(node.title);\n    const publisher = escapeHtml(node.publisher);\n    const author = escapeHtml(node.author);\n    const description = escapeHtml(node.description);\n\n    const icon = node.icon;\n    const url = node.url;\n    const thumbnail = node.thumbnail;\n    const caption = node.caption;\n\n    const element = document.createElement('div');\n\n    const html =\n        `\n        <!--[if !mso !vml]-->\n            <figure class=\"kg-card kg-bookmark-card ${caption ? `kg-card-hascaption` : ''}\">\n                <a class=\"kg-bookmark-container\" href=\"${url}\">\n                    <div class=\"kg-bookmark-content\">\n                        <div class=\"kg-bookmark-title\">${title}</div>\n                        <div class=\"kg-bookmark-description\">${truncateHtml(description, 120, 90)}</div>\n                        <div class=\"kg-bookmark-metadata\">\n                            ${icon ? `<img class=\"kg-bookmark-icon\" src=\"${icon}\" alt=\"\">` : ''}\n                            ${publisher ? `<span class=\"kg-bookmark-author\" src=\"${publisher}\">${publisher}</span>` : ''}\n                            ${author ? `<span class=\"kg-bookmark-publisher\" src=\"${author}\">${author}</span>` : ''}\n                        </div>\n                    </div>\n                    ${thumbnail ? `<div class=\"kg-bookmark-thumbnail\" style=\"background-image: url('${thumbnail}')\">\n                        <img src=\"${thumbnail}\" alt=\"\" onerror=\"this.style.display='none'\"></div>` : ''}\n                </a>\n                ${caption ? `<figcaption>${caption}</figcaption>` : ''}\n            </figure>\n        <!--[endif]-->\n        <!--[if vml]>\n            <table class=\"kg-card kg-bookmark-card--outlook\" style=\"margin: 0; padding: 0; width: 100%; border: 1px solid #e5eff5; background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; border-collapse: collapse; border-spacing: 0;\" width=\"100%\">\n                <tr>\n                    <td width=\"100%\" style=\"padding: 20px;\">\n                        <table style=\"margin: 0; padding: 0; border-collapse: collapse; border-spacing: 0;\">\n                            <tr>\n                                <td class=\"kg-bookmark-title--outlook\">\n                                    <a href=\"${url}\" style=\"text-decoration: none; color: #15212A; font-size: 15px; line-height: 1.5em; font-weight: 600;\">\n                                        ${title}\n                                    </a>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>\n                                    <div class=\"kg-bookmark-description--outlook\">\n                                        <a href=\"${url}\" style=\"text-decoration: none; margin-top: 12px; color: #738a94; font-size: 13px; line-height: 1.5em; font-weight: 400;\">\n                                            ${truncateHtml(description, 120, 90)}\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td class=\"kg-bookmark-metadata--outlook\" style=\"padding-top: 14px; color: #15212A; font-size: 13px; font-weight: 400; line-height: 1.5em;\">\n                                    <table style=\"margin: 0; padding: 0; border-collapse: collapse; border-spacing: 0;\">\n                                        <tr>\n                                            ${icon ? `\n                                                <td valign=\"middle\" class=\"kg-bookmark-icon--outlook\" style=\"padding-right: 8px; font-size: 0; line-height: 1.5em;\">\n                                                    <a href=\"${url}\" style=\"text-decoration: none; color: #15212A;\">\n                                                        <img src=\"${icon}\" width=\"22\" height=\"22\" alt=\" \">\n                                                    </a>\n                                                </td>\n                                            ` : ''}\n                                            <td valign=\"middle\" class=\"kg-bookmark-byline--outlook\">\n                                                <a href=\"${url}\" style=\"text-decoration: none; color: #15212A;\">\n                                                    ${publisher}\n                                                    ${author ? `&nbsp;&#x2022;&nbsp;` : ''}\n                                                    ${author}\n                                                </a>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n            <div class=\"kg-bookmark-spacer--outlook\" style=\"height: 1.5em;\">&nbsp;</div>\n        <![endif]-->`;\n\n    element.innerHTML = html;\n    return {element};\n}\n\nfunction frontendTemplate(node, document) {\n    const element = document.createElement('figure');\n    const caption = node.caption;\n    let cardClass = 'kg-card kg-bookmark-card';\n    if (caption) {\n        cardClass += ' kg-card-hascaption';\n    }\n    element.setAttribute('class', cardClass);\n\n    const container = document.createElement('a');\n    container.setAttribute('class','kg-bookmark-container');\n    container.href = node.url;\n    element.appendChild(container);\n\n    const content = document.createElement('div');\n    content.setAttribute('class','kg-bookmark-content');\n    container.appendChild(content);\n\n    const title = document.createElement('div');\n    title.setAttribute('class','kg-bookmark-title');\n    title.textContent = node.title;\n    content.appendChild(title);\n\n    const description = document.createElement('div');\n    description.setAttribute('class','kg-bookmark-description');\n    description.textContent = node.description;\n    content.appendChild(description);\n\n    const metadata = document.createElement('div');\n    metadata.setAttribute('class','kg-bookmark-metadata');\n    content.appendChild(metadata);\n\n    metadata.icon = node.icon;\n    if (metadata.icon) {\n        const icon = document.createElement('img');\n        icon.setAttribute('class','kg-bookmark-icon');\n        icon.src = metadata.icon;\n        icon.alt = '';\n        metadata.appendChild(icon);\n    }\n\n    metadata.publisher = node.publisher;\n    if (metadata.publisher) {\n        const publisher = document.createElement('span');\n        publisher.setAttribute('class','kg-bookmark-author'); // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n        publisher.textContent = metadata.publisher;\n        metadata.appendChild(publisher);\n    }\n\n    metadata.author = node.author;\n    if (metadata.author) {\n        const author = document.createElement('span');\n        author.setAttribute('class','kg-bookmark-publisher'); // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n        author.textContent = metadata.author;\n        metadata.appendChild(author);\n    }\n\n    metadata.thumbnail = node.thumbnail;\n    if (metadata.thumbnail) {\n        const thumbnailDiv = document.createElement('div');\n        thumbnailDiv.setAttribute('class','kg-bookmark-thumbnail');\n        container.appendChild(thumbnailDiv);\n\n        const thumbnail = document.createElement('img');\n        thumbnail.src = metadata.thumbnail;\n        thumbnail.alt = '';\n        thumbnail.setAttribute('onerror',`this.style.display = 'none'`); // Hide thumbnail div if image fails to load\n        thumbnailDiv.appendChild(thumbnail);\n    }\n\n    if (caption) {\n        const figCaption = document.createElement('figcaption');\n        figCaption.innerHTML = caption;\n        element.appendChild(figCaption);\n    }\n\n    return {element};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseBookmarkNode} from './bookmark-parser';\nimport {renderBookmarkNode} from './bookmark-renderer';\n\nexport class BookmarkNode extends generateDecoratorNode({\n    nodeType: 'bookmark',\n    properties: [\n        {name: 'title', default: '', wordCount: true},\n        {name: 'description', default: '', wordCount: true},\n        {name: 'url', default: '', urlType: 'url', wordCount: true},\n        {name: 'caption', default: '', wordCount: true},\n        {name: 'author', default: ''},\n        {name: 'publisher', default: ''},\n        {name: 'icon', urlPath: 'metadata.icon', default: '', urlType: 'url'},\n        {name: 'thumbnail', urlPath: 'metadata.thumbnail', default: '', urlType: 'url'}\n    ],\n    defaultRenderFn: renderBookmarkNode\n}) {\n    static importDOM() {\n        return parseBookmarkNode(this);\n    }\n\n    /* override */\n    constructor({url, metadata, caption} = {}, key) {\n        super(key);\n        this.__url = url || '';\n        this.__icon = metadata?.icon || '';\n        this.__title = metadata?.title || '';\n        this.__description = metadata?.description || '';\n        this.__author = metadata?.author || '';\n        this.__publisher = metadata?.publisher || '';\n        this.__thumbnail = metadata?.thumbnail || '';\n        this.__caption = caption || '';\n    }\n\n    /* @override */\n    getDataset() {\n        const self = this.getLatest();\n        return {\n            url: self.__url,\n            metadata: {\n                icon: self.__icon,\n                title: self.__title,\n                description: self.__description,\n                author: self.__author,\n                publisher: self.__publisher,\n                thumbnail: self.__thumbnail\n            },\n            caption: self.__caption\n        };\n    }\n\n    /* @override */\n    static importJSON(serializedNode) {\n        const {url, metadata, caption} = serializedNode;\n        const node = new this({\n            url,\n            metadata,\n            caption\n        });\n        return node;\n    }\n\n    /* @override */\n    exportJSON() {\n        const dataset = {\n            type: 'bookmark',\n            version: 1,\n            url: this.url,\n            metadata: {\n                icon: this.icon,\n                title: this.title,\n                description: this.description,\n                author: this.author,\n                publisher: this.publisher,\n                thumbnail: this.thumbnail\n            },\n            caption: this.caption\n        };\n        return dataset;\n    }\n\n    isEmpty() {\n        return !this.url;\n    }\n}\n\nexport const $createBookmarkNode = (dataset) => {\n    return new BookmarkNode(dataset);\n};\n\nexport function $isBookmarkNode(node) {\n    return node instanceof BookmarkNode;\n}\n","export function sizeToBytes(size) {\n    if (!size) {\n        return 0;\n    }\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const sizeParts = size.split(' ');\n    const sizeNumber = parseFloat(sizeParts[0]);\n    const sizeUnit = sizeParts[1];\n    const sizeUnitIndex = sizes.indexOf(sizeUnit);\n    if (sizeUnitIndex === -1) {\n        return 0;\n    }\n    return Math.round(sizeNumber * Math.pow(1024, sizeUnitIndex));\n}\n\nexport function bytesToSize(bytes) {\n    if (!bytes) {\n        return '0 Byte';\n    }\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n        return '0 Byte';\n    }\n    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round((bytes / Math.pow(1024, i))) + ' ' + sizes[i];\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport {escapeHtml} from '../../utils/escape-html';\nimport {bytesToSize} from '../../utils/size-byte-converter';\n\nexport function renderFileNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document, options);\n    } else {\n        return cardTemplate(node, document);\n    }\n}\n\nfunction emailTemplate(node, document, options) {\n    let iconCls;\n    if (!node.fileTitle && !node.fileCaption) {\n        iconCls = 'margin-top: 6px; height: 20px; width: 20px; max-width: 20px; padding-top: 4px; padding-bottom: 4px;';\n    } else {\n        iconCls = 'margin-top: 6px; height: 24px; width: 24px; max-width: 24px;';\n    }\n\n    const html = (`\n        <table cellspacing=\"0\" cellpadding=\"4\" border=\"0\" class=\"kg-file-card\" width=\"100%\">\n            <tr>\n                <td>\n                    <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                        <tr>\n                            <td valign=\"middle\" style=\"vertical-align: middle;\">\n                                ${node.fileTitle ? `\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"><tr><td>\n                                    <a href=\"${escapeHtml(options.postUrl)}\" class=\"kg-file-title\">${escapeHtml(node.fileTitle)}</a>\n                                </td></tr></table>\n                                ` : ``}\n                                ${node.fileCaption ? `\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"><tr><td>\n                                    <a href=\"${escapeHtml(options.postUrl)}\" class=\"kg-file-description\">${escapeHtml(node.fileCaption)}</a>\n                                </td></tr></table>\n                                ` : ``}\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"><tr><td>\n                                    <a href=\"${escapeHtml(options.postUrl)}\" class=\"kg-file-meta\"><span class=\"kg-file-name\">${escapeHtml(node.fileName)}</span> &bull; ${bytesToSize(node.fileSize)}</a>\n                                </td></tr></table>\n                            </td>\n                            <td width=\"80\" valign=\"middle\" class=\"kg-file-thumbnail\">\n                                <a href=\"${escapeHtml(options.postUrl)}\" style=\"display: block; top: 0; right: 0; bottom: 0; left: 0;\">\n                                    <img src=\"https://static.ghost.org/v4.0.0/images/download-icon-darkmode.png\" style=\"${escapeHtml(iconCls)}\">\n                                </a>\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n        </table>\n    `);\n\n    const container = document.createElement('div');\n    container.innerHTML = html.trim();\n\n    return {element: container.firstElementChild};\n}\n\nfunction cardTemplate(node, document) {\n    const card = document.createElement('div');\n    card.setAttribute('class', 'kg-card kg-file-card');\n\n    const container = document.createElement('a');\n    container.setAttribute('class', 'kg-file-card-container');\n    container.setAttribute('href', node.src);\n    container.setAttribute('title', 'Download');\n    container.setAttribute('download', '');\n\n    const contents = document.createElement('div');\n    contents.setAttribute('class', 'kg-file-card-contents');\n\n    const title = document.createElement('div');\n    title.setAttribute('class', 'kg-file-card-title');\n    title.textContent = node.fileTitle || '';\n\n    const caption = document.createElement('div');\n    caption.setAttribute('class', 'kg-file-card-caption');\n    caption.textContent = node.fileCaption || '';\n\n    const metadata = document.createElement('div');\n    metadata.setAttribute('class', 'kg-file-card-metadata');\n\n    const filename = document.createElement('div');\n    filename.setAttribute('class', 'kg-file-card-filename');\n    filename.textContent = node.fileName || '';\n\n    const filesize = document.createElement('div');\n    filesize.setAttribute('class', 'kg-file-card-filesize');\n    filesize.textContent = node.formattedFileSize || '';\n\n    metadata.appendChild(filename);\n    metadata.appendChild(filesize);\n\n    contents.appendChild(title);\n    contents.appendChild(caption);\n    contents.appendChild(metadata);\n\n    container.appendChild(contents);\n\n    const icon = document.createElement('div');\n    icon.setAttribute('class', 'kg-file-card-icon');\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('viewBox', '0 0 24 24');\n\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n\n    const style = document.createElementNS('http://www.w3.org/2000/svg', 'style');\n    style.textContent = '.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}';\n\n    defs.appendChild(style);\n\n    const titleElement = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n    titleElement.textContent = 'download-circle';\n\n    const polyline = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');\n    polyline.setAttribute('class', 'a');\n    polyline.setAttribute('points', '8.25 14.25 12 18 15.75 14.25');\n\n    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n    line.setAttribute('class', 'a');\n    line.setAttribute('x1', '12');\n    line.setAttribute('y1', '6.75');\n    line.setAttribute('x2', '12');\n    line.setAttribute('y2', '18');\n\n    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n    circle.setAttribute('class', 'a');\n    circle.setAttribute('cx', '12');\n    circle.setAttribute('cy', '12');\n    circle.setAttribute('r', '11.25');\n\n    svg.appendChild(defs);\n    svg.appendChild(titleElement);\n    svg.appendChild(polyline);\n    svg.appendChild(line);\n    svg.appendChild(circle);\n\n    icon.appendChild(svg);\n    container.appendChild(icon);\n    card.appendChild(container);\n\n    return {element: card};\n}","import {sizeToBytes} from '../../utils/size-byte-converter';\n\nexport function parseFileNode(FileNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgFileCard = nodeElem.classList?.contains('kg-file-card');\n            if (nodeElem.tagName === 'DIV' && isKgFileCard) {\n                return {\n                    conversion(domNode) {\n                        const link = domNode.querySelector('a');\n                        const src = link.getAttribute('href');\n                        const fileTitle = domNode.querySelector('.kg-file-card-title')?.textContent || '';\n                        const fileCaption = domNode.querySelector('.kg-file-card-caption')?.textContent || '';\n                        const fileName = domNode.querySelector('.kg-file-card-filename')?.textContent || '';\n                        let fileSize = sizeToBytes(domNode.querySelector('.kg-file-card-filesize')?.textContent || '');\n                        const payload = {\n                            src,\n                            fileTitle,\n                            fileCaption,\n                            fileName,\n                            fileSize\n                        };\n\n                        const node = new FileNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderFileNode} from './file-renderer';\nimport {parseFileNode} from './file-parser';\nimport {bytesToSize} from '../../utils/size-byte-converter';\n\nexport class FileNode extends generateDecoratorNode({\n    nodeType: 'file',\n    properties: [\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'fileTitle', default: '', wordCount: true},\n        {name: 'fileCaption', default: '', wordCount: true},\n        {name: 'fileName', default: ''},\n        {name: 'fileSize', default: ''}\n    ],\n    defaultRenderFn: renderFileNode\n}) {\n    /* @override */\n    exportJSON() {\n        const {src, fileTitle, fileCaption, fileName, fileSize} = this;\n        const isBlob = src && src.startsWith('data:');\n\n        return {\n            type: 'file',\n            src: isBlob ? '<base64String>' : src,\n            fileTitle,\n            fileCaption,\n            fileName,\n            fileSize\n        };\n    }\n\n    static importDOM() {\n        return parseFileNode(this);\n    }\n\n    get formattedFileSize() {\n        return bytesToSize(this.fileSize);\n    }\n}\n\nexport function $isFileNode(node) {\n    return node instanceof FileNode;\n}\n\nexport const $createFileNode = (dataset) => {\n    return new FileNode(dataset);\n};\n","export function slugify(str) {\n    // Remove HTML tags\n    str = str.replace(/<[^>]*>?/gm, '');\n\n    // Remove any non-word character with whitespace\n    str = str.replace(/[^\\w\\s]/gi, '');\n\n    // Replace any whitespace character with a dash\n    str = str.replace(/\\s+/g, '-');\n\n    // Convert to lowercase\n    str = str.toLowerCase();\n\n    return str;\n}\n","import {addCreateDocumentOption} from '../../../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../../../utils/render-empty-container';\nimport {slugify} from '../../../../utils/slugify';\n\nexport function renderHeaderNodeV1(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.header && !node.subheader && (!node.buttonEnabled || (!node.buttonUrl || !node.buttonText))) {\n        return renderEmptyContainer(document);\n    }\n\n    const templateData = {\n        size: node.size,\n        style: node.style,\n        buttonEnabled: node.buttonEnabled && Boolean(node.buttonUrl) && Boolean(node.buttonText),\n        buttonUrl: node.buttonUrl,\n        buttonText: node.buttonText,\n        header: node.header,\n        headerSlug: slugify(node.header),\n        subheader: node.subheader,\n        subheaderSlug: slugify(node.subheader),\n        hasHeader: !!node.header,\n        hasSubheader: !!node.subheader && !!node.subheader.replace(/(<br>)+$/g).trim(),\n        backgroundImageStyle: node.style === 'image' ? `background-image: url(${node.backgroundImageSrc})` : '',\n        backgroundImageSrc: node.backgroundImageSrc\n    };\n\n    const div = document.createElement('div');\n    div.classList.add('kg-card', 'kg-header-card', 'kg-width-full', `kg-size-${templateData.size}`, `kg-style-${templateData.style}`);\n    div.setAttribute('data-kg-background-image', templateData.backgroundImageSrc);\n    div.setAttribute('style', templateData.backgroundImageStyle);\n\n    if (templateData.hasHeader) {\n        const headerElement = document.createElement('h2');\n        headerElement.classList.add('kg-header-card-header');\n        headerElement.setAttribute('id', templateData.headerSlug);\n        headerElement.innerHTML = templateData.header;\n        div.appendChild(headerElement);\n    }\n\n    if (templateData.hasSubheader) {\n        const subheaderElement = document.createElement('h3');\n        subheaderElement.classList.add('kg-header-card-subheader');\n        subheaderElement.setAttribute('id', templateData.subheaderSlug);\n        subheaderElement.innerHTML = templateData.subheader;\n        div.appendChild(subheaderElement);\n    }\n\n    if (templateData.buttonEnabled) {\n        const buttonElement = document.createElement('a');\n        buttonElement.classList.add('kg-header-card-button');\n        buttonElement.setAttribute('href', templateData.buttonUrl);\n        buttonElement.textContent = templateData.buttonText;\n        div.appendChild(buttonElement);\n    }\n\n    return {element: div};\n}\n","export function parseHeaderNode(HeaderNode) {\n    return {\n        div: (nodeElem) => {\n            const isHeaderCardv1 = nodeElem.classList?.contains('kg-header-card') && !nodeElem.classList?.contains('kg-v2');\n            const isHeaderCardv2 = nodeElem.classList?.contains('kg-header-card') && nodeElem.classList?.contains('kg-v2');\n            // v1 parser\n            if (nodeElem.tagName === 'DIV' && isHeaderCardv1) {\n                return {\n                    conversion(domNode) {\n                        const div = domNode;\n                        const headerElement = domNode.querySelector('.kg-header-card-header');\n                        const subheaderElement = domNode.querySelector('.kg-header-card-subheader');\n                        const buttonElement = domNode.querySelector('.kg-header-card-button');\n                        const size = div.classList.contains('kg-size-large') ? 'large' : 'small';\n                        const style = div.classList.contains('kg-style-image') ? 'image' : 'text';\n                        const backgroundImageSrc = div.getAttribute('data-kg-background-image');\n                        const hasHeader = !!headerElement;\n                        const header = hasHeader ? headerElement.textContent : '';\n                        const hasSubheader = !!subheaderElement;\n                        const subheader = hasSubheader ? subheaderElement.textContent : '';\n                        const buttonEnabled = !!buttonElement;\n                        const buttonUrl = buttonEnabled ? buttonElement.getAttribute('href') : '';\n                        const buttonText = buttonEnabled ? buttonElement.textContent : '';\n\n                        const payload = {\n                            size,\n                            style,\n                            backgroundImageSrc,\n                            header,\n                            subheader,\n                            buttonEnabled,\n                            buttonUrl,\n                            buttonText,\n                            version: 1\n                        };\n\n                        const node = new HeaderNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            // V2 parser\n            if (nodeElem.tagName === 'DIV' && isHeaderCardv2) {\n                return {\n                    conversion(domNode) {\n                        const div = domNode;\n                        const headerElement = div.querySelector('.kg-header-card-heading');\n                        const subheaderElement = div.querySelector('.kg-header-card-subheading');\n                        const buttonElement = div.querySelector('.kg-header-card-button');\n                        const alignment = div.classList.contains('kg-align-center') ? 'center' : '';\n                        const backgroundImageSrc = div.querySelector('.kg-header-card-image')?.getAttribute('src');\n                        const layout = backgroundImageSrc ? 'split' : '';\n                        const backgroundColor = div.classList.contains('kg-style-accent') ? 'accent' : div.getAttribute('data-background-color');\n                        const buttonColor = buttonElement?.getAttribute('data-button-color') || '';\n                        const textColor = headerElement?.getAttribute('data-text-color') || '';\n                        const buttonTextColor = buttonElement?.getAttribute('data-button-text-color') || '';\n                        const header = headerElement?.textContent || '';\n                        const subheader = subheaderElement?.textContent || '';\n                        const buttonEnabled = !!buttonElement;\n                        const buttonUrl = buttonEnabled ? buttonElement.getAttribute('href') : '';\n                        const buttonText = buttonEnabled ? buttonElement.textContent : '';\n\n                        const payload = {\n                            backgroundColor,\n                            buttonColor,\n                            alignment,\n                            backgroundImageSrc,\n                            layout,\n                            textColor,\n                            header,\n                            subheader,\n                            buttonEnabled,\n                            buttonUrl,\n                            buttonText,\n                            buttonTextColor,\n                            version: 2\n                        };\n\n                        const node = new HeaderNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../../../utils/add-create-document-option';\nimport {slugify} from '../../../../utils/slugify';\nimport {getSrcsetAttribute} from '../../../../utils/srcset-attribute';\n\nfunction cardTemplate(nodeData, options = {}) {\n    const cardClasses = getCardClasses(nodeData).join(' ');\n\n    const backgroundAccent = nodeData.backgroundColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonAccent = nodeData.buttonColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonStyle = nodeData.buttonColor !== 'accent' ? `background-color: ${nodeData.buttonColor};` : ``;\n    const alignment = nodeData.alignment === 'center' ? 'kg-align-center' : '';\n    const backgroundImageStyle = nodeData.backgroundColor !== 'accent' && (!nodeData.backgroundImageSrc || nodeData.layout === 'split') ? `background-color: ${nodeData.backgroundColor}` : '';\n\n    let imgTemplate = '';\n    if (nodeData.backgroundImageSrc) {\n        const bgImage = {\n            src: nodeData.backgroundImageSrc,\n            width: nodeData.backgroundImageWidth,\n            height: nodeData.backgroundImageHeight\n        };\n\n        const srcsetValue = getSrcsetAttribute({...bgImage, options});\n        const srcset = srcsetValue ? `srcset=\"${srcsetValue}\"` : '';\n\n        imgTemplate = `\n            <picture><img class=\"kg-header-card-image\" src=\"${bgImage.src}\" ${srcset} loading=\"lazy\" alt=\"\" /></picture>\n        `;\n    }\n\n    const header = () => {\n        if (nodeData.header) {\n            return `<h2 id=\"${slugify(nodeData.header)}\" class=\"kg-header-card-heading\" style=\"color: ${nodeData.textColor};\" data-text-color=\"${nodeData.textColor}\">${nodeData.header}</h2>`;\n        }\n        return '';\n    };\n\n    const subheader = () => {\n        if (nodeData.subheader) {\n            return `<p id=\"${slugify(nodeData.subheader)}\" class=\"kg-header-card-subheading\" style=\"color: ${nodeData.textColor};\" data-text-color=\"${nodeData.textColor}\">${nodeData.subheader}</p>`;\n        }\n        return '';\n    };\n\n    const button = () => {\n        if (nodeData.buttonEnabled && nodeData.buttonUrl && nodeData.buttonUrl.trim() !== '') {\n            return `<a href=\"${nodeData.buttonUrl}\" class=\"kg-header-card-button ${buttonAccent}\" style=\"${buttonStyle}color: ${nodeData.buttonTextColor};\" data-button-color=\"${nodeData.buttonColor}\" data-button-text-color=\"${nodeData.buttonTextColor}\">${nodeData.buttonText}</a>`;\n        }\n        return '';\n    };\n\n    const wrapperStyle = backgroundImageStyle ? `style=\"${backgroundImageStyle};\"` : '';\n\n    return `\n        <div class=\"${cardClasses} ${backgroundAccent}\" ${wrapperStyle} data-background-color=\"${nodeData.backgroundColor}\">\n            ${nodeData.layout !== 'split' ? imgTemplate : ''}\n            <div class=\"kg-header-card-content\">\n                ${nodeData.layout === 'split' ? imgTemplate : ''}\n                <div class=\"kg-header-card-text ${alignment}\">\n                    ${header()}\n                    ${subheader()}\n                    ${button()}\n                </div>\n            </div>\n        </div>\n        `;\n}\n\nfunction emailTemplate(nodeData, options) {\n    const backgroundAccent = nodeData.backgroundColor === 'accent' ? `background-color: ${nodeData.accentColor};` : '';\n    let buttonAccent = nodeData.buttonColor === 'accent' ? `background-color: ${nodeData.accentColor};` : nodeData.buttonColor;\n    let buttonStyle = nodeData.buttonColor !== 'accent' ? `background-color: ${nodeData.buttonColor};` : '';\n    let buttonTextColor = nodeData.buttonTextColor;\n    const alignment = nodeData.alignment === 'center' ? 'text-align: center;' : '';\n    const backgroundImageStyle = nodeData.backgroundImageSrc ? (nodeData.layout !== 'split' ? `background-image: url(${nodeData.backgroundImageSrc}); background-size: cover; background-position: center center;` : `background-color: ${nodeData.backgroundColor};`) : `background-color: ${nodeData.backgroundColor};`;\n    const splitImageStyle = `background-image: url(${nodeData.backgroundImageSrc}); background-size: ${nodeData.backgroundSize !== 'contain' ? 'cover' : '50%'}; background-position: center`;\n\n    if (\n        (options?.feature?.emailCustomization || options?.feature?.emailCustomizationAlpha) &&\n        options?.design?.buttonStyle === 'outline'\n    ) {\n        if (nodeData.buttonColor === 'accent') {\n            buttonAccent = '';\n            buttonStyle = `\n                border: 1px solid ${nodeData.accentColor};\n                background-color: transparent;\n                color: ${nodeData.accentColor} !important;\n            `;\n            buttonTextColor = nodeData.accentColor;\n        } else {\n            buttonStyle = `\n                border: 1px solid ${nodeData.buttonColor};\n                background-color: transparent;\n                color: ${nodeData.buttonColor} !important;\n            `;\n            buttonTextColor = nodeData.buttonColor;\n        }\n    }\n\n    if (options?.feature?.emailCustomization || options?.feature?.emailCustomizationAlpha) {\n        return (\n            `\n            <div class=\"kg-header-card kg-v2\" style=\"color:${nodeData.textColor}; ${alignment} ${backgroundImageStyle} ${backgroundAccent}\">\n                ${nodeData.layout === 'split' && nodeData.backgroundImageSrc ? `\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                        <tr>\n                            <td background=\"${nodeData.backgroundImageSrc}\" style=\"${splitImageStyle}\" class=\"kg-header-card-image\"></td>\n                        </tr>\n                    </table>\n                ` : ''}\n                <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"color:${nodeData.textColor}; ${alignment} ${backgroundImageStyle} ${backgroundAccent}\">\n                    <tr>\n                        <td class=\"kg-header-card-content\" style=\"${nodeData.layout === 'split' && nodeData.backgroundSize === 'contain' ? 'padding-top: 0;' : ''}\">\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                <tr>\n                                    <td align=\"${nodeData.alignment}\">\n                                        <h2 class=\"kg-header-card-heading\" style=\"color:${nodeData.textColor};\">${nodeData.header}</h2>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td class=\"kg-header-card-subheading-wrapper\" align=\"${nodeData.alignment}\">\n                                        <p class=\"kg-header-card-subheading\" style=\"color:${nodeData.textColor};\">${nodeData.subheader}</p>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    ${nodeData.buttonEnabled && nodeData.buttonUrl && nodeData.buttonUrl.trim() !== '' ? `\n                                        <td class=\"kg-header-button-wrapper\">\n                                            <table class=\"btn\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"${nodeData.alignment}\">\n                                                <tr>\n                                                    <td align=\"center\" style=\"${buttonStyle} ${buttonAccent}\">\n                                                        <a href=\"${nodeData.buttonUrl}\" style=\"color: ${buttonTextColor};\">${nodeData.buttonText}</a>\n                                                    </td>\n                                                </tr>\n                                            </table>\n                                        </td>\n                                    ` : ''}\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            `\n        );\n    }\n\n    return (\n        `\n        <div class=\"kg-header-card kg-v2\" style=\"color:${nodeData.textColor}; ${alignment} ${backgroundImageStyle} ${backgroundAccent}\">\n            ${nodeData.layout === 'split' && nodeData.backgroundImageSrc ? `\n                <div class=\"kg-header-card-image\" background=\"${nodeData.backgroundImageSrc}\" style=\"${splitImageStyle}\"></div>\n            ` : ''}\n            <div class=\"kg-header-card-content\" style=\"${nodeData.layout === 'split' && nodeData.backgroundSize === 'contain' ? 'padding-top: 0;' : ''}\">\n                <h2 class=\"kg-header-card-heading\" style=\"color:${nodeData.textColor};\">${nodeData.header}</h2>\n                <p class=\"kg-header-card-subheading\" style=\"color:${nodeData.textColor};\">${nodeData.subheader}</p>\n                ${nodeData.buttonEnabled && nodeData.buttonUrl && nodeData.buttonUrl.trim() !== '' ? `\n                    <a class=\"kg-header-card-button\" href=\"${nodeData.buttonUrl}\" style=\"color: ${nodeData.buttonTextColor}; ${buttonStyle} ${buttonAccent}\">${nodeData.buttonText}</a>\n                ` : ''}\n            </div>\n        </div>\n        `\n    );\n}\n\nexport function renderHeaderNodeV2(dataset, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const node = {\n        alignment: dataset.__alignment,\n        buttonText: dataset.__buttonText,\n        buttonEnabled: dataset.__buttonEnabled,\n        buttonUrl: dataset.__buttonUrl,\n        header: dataset.__header,\n        subheader: dataset.__subheader,\n        backgroundImageSrc: dataset.__backgroundImageSrc,\n        backgroundImageWidth: dataset.__backgroundImageWidth,\n        backgroundImageHeight: dataset.__backgroundImageHeight,\n        backgroundSize: dataset.__backgroundSize,\n        backgroundColor: dataset.__backgroundColor,\n        buttonColor: dataset.__buttonColor,\n        layout: dataset.__layout,\n        textColor: dataset.__textColor,\n        buttonTextColor: dataset.__buttonTextColor,\n        swapped: dataset.__swapped,\n        accentColor: dataset.__accentColor\n    };\n\n    if (options.target === 'email') {\n        const emailDoc = options.createDocument();\n        const emailDiv = emailDoc.createElement('div');\n\n        emailDiv.innerHTML = emailTemplate(node, options)?.trim();\n\n        return {element: emailDiv.firstElementChild};\n    }\n\n    const htmlString = cardTemplate(node, options);\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString?.trim();\n\n    if (node.header === '') {\n        const h2Element = element.querySelector('.kg-header-card-heading');\n        if (h2Element) {\n            h2Element.remove();\n        }\n    }\n\n    if (node.subheader === '') {\n        const pElement = element.querySelector('.kg-header-card-subheading');\n        if (pElement) {\n            pElement.remove();\n        }\n    }\n\n    return {element: element.firstElementChild};\n}\n\nexport function getCardClasses(nodeData) {\n    let cardClasses = ['kg-card kg-header-card kg-v2'];\n\n    if (nodeData.layout && nodeData.layout !== 'split') {\n        cardClasses.push(`kg-width-${nodeData.layout}`);\n    }\n\n    if (nodeData.layout === 'split') {\n        cardClasses.push('kg-layout-split kg-width-full');\n    }\n\n    if (nodeData.swapped && nodeData.layout === 'split') {\n        cardClasses.push('kg-swapped');\n    }\n\n    if (nodeData.layout && nodeData.layout === 'full') {\n        cardClasses.push(`kg-content-wide`);\n    }\n\n    if (nodeData.layout === 'split') {\n        if (nodeData.backgroundSize === 'contain') {\n            cardClasses.push('kg-content-wide');\n        }\n    }\n\n    return cardClasses;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderHeaderNodeV1} from './renderers/v1/header-renderer';\nimport {parseHeaderNode} from './parsers/header-parser';\n// V2 imports below\nimport {renderHeaderNodeV2} from './renderers/v2/header-renderer';\n\n// This is our first node that has a custom version property\nexport class HeaderNode extends generateDecoratorNode({\n    nodeType: 'header',\n    properties: [\n        {name: 'size', default: 'small'},\n        {name: 'style', default: 'dark'},\n        {name: 'buttonEnabled', default: false},\n        {name: 'buttonUrl', default: '', urlType: 'url'},\n        {name: 'buttonText', default: ''},\n        {name: 'header', default: '', urlType: 'html', wordCount: true},\n        {name: 'subheader', default: '', urlType: 'html', wordCount: true},\n        {name: 'backgroundImageSrc', default: '', urlType: 'url'},\n        // we need to initialize a new version property here so that we can separate v1 and v2\n        // we should never remove old properties, only add new ones, as this could break & corrupt existing content\n        // ref https://lexical.dev/docs/concepts/serialization#versioning--breaking-changes\n        {name: 'version', default: 1},\n        {name: 'accentColor', default: '#FF1A75'}, // this is used to have the accent color hex for email\n        // v2 properties\n        {name: 'alignment', default: 'center'},\n        {name: 'backgroundColor', default: '#000000'},\n        {name: 'backgroundImageWidth', default: null},\n        {name: 'backgroundImageHeight', default: null},\n        {name: 'backgroundSize', default: 'cover'},\n        {name: 'textColor', default: '#FFFFFF'},\n        {name: 'buttonColor', default: '#ffffff'},\n        {name: 'buttonTextColor', default: '#000000'},\n        {name: 'layout', default: 'full'}, // replaces size\n        {name: 'swapped', default: false}\n    ],\n    defaultRenderFn: {\n        1: renderHeaderNodeV1,\n        2: renderHeaderNodeV2\n    }\n}) {\n    static importDOM() {\n        return parseHeaderNode(this);\n    }\n}\n\nexport const $createHeaderNode = (dataset) => {\n    return new HeaderNode(dataset);\n};\n\nexport function $isHeaderNode(node) {\n    return node instanceof HeaderNode;\n}\n","export function parsePaywallNode(PaywallNode) {\n    return {\n        '#comment': (nodeElem) => {\n            if (nodeElem.nodeType === 8 && nodeElem.nodeValue.trim() === 'members-only') {\n                return {\n                    conversion() {\n                        const node = new PaywallNode();\n                        return {node};\n                    },\n                    priority: 0\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nexport function renderPaywallNode(_, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n    const element = document.createElement('div');\n\n    element.innerHTML = '<!--members-only-->';\n\n    // `type: 'inner'` will render only the innerHTML of the element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element, type: 'inner'};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parsePaywallNode} from './paywall-parser';\nimport {renderPaywallNode} from './paywall-renderer';\n\nexport class PaywallNode extends generateDecoratorNode({\n    nodeType: 'paywall',\n    defaultRenderFn: renderPaywallNode\n}) {\n    static importDOM() {\n        return parsePaywallNode(this);\n    }\n}\n\nexport const $createPaywallNode = (dataset) => {\n    return new PaywallNode(dataset);\n};\n\nexport function $isPaywallNode(node) {\n    return node instanceof PaywallNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element';\n\nexport function parseProductNode(ProductNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgProductCard = nodeElem.classList?.contains('kg-product-card');\n            if (nodeElem.tagName === 'DIV' && isKgProductCard) {\n                return {\n                    conversion(domNode) {\n                        const title = readCaptionFromElement(domNode, {selector: '.kg-product-card-title'});\n                        const description = readCaptionFromElement(domNode, {selector: '.kg-product-card-description'});\n\n                        const payload = {\n                            productButtonEnabled: false,\n                            productRatingEnabled: false,\n                            productTitle: title,\n                            productDescription: description\n                        };\n\n                        const img = domNode.querySelector('.kg-product-card-image');\n                        if (img && img.getAttribute('src')) {\n                            payload.productImageSrc = img.getAttribute('src');\n\n                            if (img.getAttribute('width')) {\n                                payload.productImageWidth = img.getAttribute('width');\n                            }\n\n                            if (img.getAttribute('height')) {\n                                payload.productImageHeight = img.getAttribute('height');\n                            }\n                        }\n\n                        const stars = [...domNode.querySelectorAll('.kg-product-card-rating-active')].length;\n                        if (stars) {\n                            payload.productRatingEnabled = true;\n                            payload.productStarRating = stars;\n                        }\n\n                        const button = domNode.querySelector('a');\n\n                        if (button) {\n                            const buttonUrl = button.getAttribute('href');\n                            const buttonText = getButtonText(button);\n\n                            if (buttonUrl && buttonText) {\n                                payload.productButtonEnabled = true;\n                                payload.productButton = buttonText;\n                                payload.productUrl = buttonUrl;\n                            }\n                        }\n\n                        if (!title && !description && !img && !button) {\n                            return null;\n                        }\n\n                        const node = new ProductNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n\nfunction getButtonText(node) {\n    let buttonText = node.textContent;\n    if (buttonText) {\n        buttonText = buttonText.replace(/\\n/g, ' ').replace(/\\s+/g, ' ').trim();\n    }\n    return buttonText;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport {getResizedImageDimensions} from '../../utils/get-resized-image-dimensions';\n\nexport function renderProductNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (node.isEmpty()) {\n        return renderEmptyContainer(document);\n    }\n\n    let buttonBorderRadius = '5px';\n\n    // we're switching to 6px by default as part of settings being added\n    // TODO: remove 'rounded' check and switch default above to 6px\n    if (options.design?.buttonCorners === 'rounded') {\n        buttonBorderRadius = '6px';\n    } else if (options.design?.buttonCorners === 'square') {\n        buttonBorderRadius = '0px';\n    } else if (options.design?.buttonCorners === 'pill') {\n        buttonBorderRadius = '9999px';\n    }\n\n    const templateData = {\n        ...node.getDataset(),\n        starIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12.729,1.2l3.346,6.629,6.44.638a.805.805,0,0,1,.5,1.374l-5.3,5.253,1.965,7.138a.813.813,0,0,1-1.151.935L12,19.934,5.48,23.163a.813.813,0,0,1-1.151-.935L6.294,15.09.99,9.837a.805.805,0,0,1,.5-1.374l6.44-.638L11.271,1.2A.819.819,0,0,1,12.729,1.2Z\"/></svg>`,\n        buttonBorderRadius\n    };\n\n    const starActiveClasses = 'kg-product-card-rating-active';\n    for (let i = 1; i <= 5; i++) {\n        templateData['star' + i] = '';\n        if (node.productStarRating >= i) {\n            templateData['star' + i] = starActiveClasses;\n        }\n    }\n\n    const htmlString = options.target === 'email'\n        ? emailCardTemplate({data: templateData, feature: options.feature})\n        : cardTemplate({data: templateData, feature: options.feature});\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString.trim();\n\n    return {element: element.firstElementChild};\n}\n\nexport function cardTemplate({data}) {\n    return (\n        `\n        <div class=\"kg-card kg-product-card\">\n            <div class=\"kg-product-card-container\">\n                ${data.productImageSrc ? `<img src=\"${data.productImageSrc}\" ${data.productImageWidth ? `width=\"${data.productImageWidth}\"` : ''} ${data.productImageHeight ? `height=\"${data.productImageHeight}\"` : ''} class=\"kg-product-card-image\" loading=\"lazy\" />` : ''}\n                <div class=\"kg-product-card-title-container\">\n                    <h4 class=\"kg-product-card-title\">${data.productTitle}</h4>\n                </div>\n                ${data.productRatingEnabled ? `\n                    <div class=\"kg-product-card-rating\">\n                        <span class=\"${data.star1} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star2} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star3} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star4} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star5} kg-product-card-rating-star\">${data.starIcon}</span>\n                    </div>\n                ` : ''}\n\n                <div class=\"kg-product-card-description\">${data.productDescription}</div>\n                ${data.productButtonEnabled ? `\n                    <a href=\"${data.productUrl}\" class=\"kg-product-card-button kg-product-card-btn-accent\" target=\"_blank\" rel=\"noopener noreferrer\"><span>${data.productButton}</span></a>\n                ` : ''}\n            </div>\n        </div>\n    `\n    );\n}\n\nexport function emailCardTemplate({data, feature}) {\n    let imageDimensions;\n\n    if (data.productImageWidth && data.productImageHeight) {\n        imageDimensions = {\n            width: data.productImageWidth,\n            height: data.productImageHeight\n        };\n\n        if (data.productImageWidth >= 560) {\n            imageDimensions = getResizedImageDimensions(imageDimensions, {width: 560});\n        }\n    }\n\n    if (feature?.emailCustomization || feature?.emailCustomizationAlpha) {\n        return (\n            `\n            <table class=\"kg-product-card\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n                <tr>\n                    <td class=\"kg-product-card-container\">\n                        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n                            ${data.productImageSrc ? `\n                                <tr>\n                                    <td class=\"kg-product-image\" align=\"center\">\n                                        <img src=\"${data.productImageSrc}\" ${imageDimensions ? `width=\"${imageDimensions.width}\"` : ''} ${imageDimensions ? `height=\"${imageDimensions.height}\"` : ''} border=\"0\"/>\n                                    </td>\n                                </tr>\n                            ` : ''}\n                            <tr>\n                                <td valign=\"top\">\n                                    <h4 class=\"kg-product-title\">${data.productTitle}</h4>\n                                </td>\n                            </tr>\n                            ${data.productRatingEnabled ? `\n                                <tr class=\"kg-product-rating\">\n                                    <td valign=\"top\">\n                                        <img src=\"${`https://static.ghost.org/v4.0.0/images/star-rating-${data.productStarRating}.png`}\" border=\"0\" />\n                                    </td>\n                                </tr>\n                            ` : ''}\n                            <tr>\n                                <td class=\"kg-product-description-wrapper\">${data.productDescription}</td>\n                            </tr>\n                            ${data.productButtonEnabled ? `\n                                <tr>\n                                    <td class=\"kg-product-button-wrapper\">\n                                        <table class=\"btn btn-accent\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n                                            <tr>\n                                                <td align=\"center\" width=\"100%\">\n                                                    <a href=\"${data.productUrl}\">${data.productButton}</a>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </td>\n                                </tr>\n                            ` : ''}\n                        </table>\n                    </td>\n                </tr>\n            </table>\n            `\n        );\n    }\n\n    return (\n        `\n         <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"width:100%; padding:20px; border:1px solid #E9E9E9; border-radius: 5px; margin: 0 0 1.5em; width: 100%;\">\n            ${data.productImageSrc ? `\n                <tr>\n                    <td align=\"center\" style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                        <img src=\"${data.productImageSrc}\" ${imageDimensions ? `width=\"${imageDimensions.width}\"` : ''} ${imageDimensions ? `height=\"${imageDimensions.height}\"` : ''} style=\"display: block; width: 100%; height: auto; max-width: 100%; border: none; padding-bottom: 16px;\" border=\"0\"/>\n                    </td>\n                </tr>\n            ` : ''}\n            <tr>\n                <td valign=\"top\">\n                    <h4 style=\"font-size: 22px !important; margin-top: 0 !important; margin-bottom: 0 !important; font-weight: 700;\">${data.productTitle}</h4>\n                </td>\n            </tr>\n            ${data.productRatingEnabled ? `\n                <tr style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                    <td valign=\"top\">\n                        <img src=\"${`https://static.ghost.org/v4.0.0/images/star-rating-${data.productStarRating}.png`}\" style=\"border: none; width: 96px;\" border=\"0\" />\n                    </td>\n                </tr>\n            ` : ''}\n            <tr>\n                <td style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                    <div style=\"padding-top: 8px; opacity: 0.7; font-size: 17px; line-height: 1.4; margin-bottom: -24px;\">${data.productDescription}</div>\n                </td>\n            </tr>\n            ${data.productButtonEnabled ? `\n                <tr>\n                    <td style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                        <div class=\"btn btn-accent\" style=\"box-sizing: border-box;display: table;width: 100%;padding-top: 16px;\">\n                            <a href=\"${data.productUrl}\" style=\"overflow-wrap: anywhere;border: solid 1px;border-radius: ${data.buttonBorderRadius};box-sizing: border-box;cursor: pointer;display: inline-block;font-size: 14px;font-weight: bold;margin: 0;padding: 0;text-decoration: none;color: #FFFFFF; width: 100%; text-align: center;\"><span style=\"display: block;padding: 12px 25px;\">${data.productButton}</span></a>\n                        </div>\n                    </td>\n                </tr>\n            ` : ''}\n        </table>\n        `\n    );\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseProductNode} from './product-parser';\nimport {renderProductNode} from './product-renderer';\n\nexport class ProductNode extends generateDecoratorNode({\n    nodeType: 'product',\n    properties: [\n        {name: 'productImageSrc', default: '', urlType: 'url'},\n        {name: 'productImageWidth', default: null},\n        {name: 'productImageHeight', default: null},\n        {name: 'productTitle', default: '', urlType: 'html', wordCount: true},\n        {name: 'productDescription', default: '', urlType: 'html', wordCount: true},\n        {name: 'productRatingEnabled', default: false},\n        {name: 'productStarRating', default: 5},\n        {name: 'productButtonEnabled', default: false},\n        {name: 'productButton', default: ''},\n        {name: 'productUrl', default: ''}\n    ],\n    defaultRenderFn: renderProductNode\n}) {\n    /* override */\n    exportJSON() {\n        // checks if src is a data string\n        const {productImageSrc, productImageWidth, productImageHeight, productTitle, productDescription, productRatingEnabled, productStarRating, productButtonEnabled, productButton, productUrl} = this;\n        const isBlob = productImageSrc && productImageSrc.startsWith('data:');\n\n        const dataset = {\n            type: 'product',\n            version: 1,\n            productImageSrc: isBlob ? '<base64String>' : productImageSrc,\n            productImageWidth,\n            productImageHeight,\n            productTitle,\n            productDescription,\n            productRatingEnabled,\n            productStarRating,\n            productButtonEnabled,\n            productButton,\n            productUrl\n\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        return parseProductNode(this);\n    }\n\n    isEmpty() {\n        const isButtonFilled = this.__productButtonEnabled && this.__productUrl && this.__productButton;\n        return !this.__productTitle && !this.__productDescription && !isButtonFilled && !this.__productImageSrc && !this.__productRatingEnabled;\n    }\n}\n\nexport const $createProductNode = (dataset) => {\n    return new ProductNode(dataset);\n};\n\nexport function $isProductNode(node) {\n    return node instanceof ProductNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element.js';\n\n// TODO: add NFT card parser\nexport function parseEmbedNode(EmbedNode) {\n    return {\n        figure: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'FIGURE') {\n                const iframe = nodeElem.querySelector('iframe');\n                if (iframe) {\n                    return {\n                        conversion(domNode) {\n                            const payload = _createPayloadForIframe(iframe);\n\n                            if (!payload) {\n                                return null;\n                            }\n\n                            payload.caption = readCaptionFromElement(domNode);\n\n                            const node = new EmbedNode(payload);\n                            return {node};\n                        },\n                        priority: 1\n                    };\n                }\n                const blockquote = nodeElem.querySelector('blockquote');\n                if (blockquote) {\n                    return {\n                        conversion(domNode) {\n                            const link = domNode.querySelector('a');\n                            if (!link) {\n                                return null;\n                            }\n\n                            let url = link.getAttribute('href');\n\n                            // If we don't have a url, or it's not an absolute URL, we can't handle this\n                            if (!url || !url.match(/^https?:\\/\\//i)) {\n                                return null;\n                            }\n\n                            let payload = {url: url};\n\n                            // append caption, remove element from blockquote\n                            payload.caption = readCaptionFromElement(domNode);\n                            let figcaption = domNode.querySelector('figcaption');\n                            figcaption?.remove();\n\n                            payload.html = domNode.innerHTML;\n\n                            const node = new EmbedNode(payload);\n                            return {node};\n                        },\n                        priority: 1\n                    };\n                }\n            }\n            return null;\n        },\n        iframe: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'IFRAME') {\n                return {\n                    conversion(domNode) {\n                        const payload = _createPayloadForIframe(domNode);\n\n                        if (!payload) {\n                            return null;\n                        }\n\n                        const node = new EmbedNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n\nfunction _createPayloadForIframe(iframe) {\n    // If we don't have a src Or it's not an absolute URL, we can't handle this\n    // This regex handles http://, https:// or //\n    if (!iframe.src || !iframe.src.match(/^(https?:)?\\/\\//i)) {\n        return;\n    }\n\n    // if it's a schemaless URL, convert to https\n    if (iframe.src.match(/^\\/\\//)) {\n        iframe.src = `https:${iframe.src}`;\n    }\n\n    let payload = {\n        url: iframe.src\n    };\n\n    payload.html = iframe.outerHTML;\n\n    return payload;\n}","import {DateTime} from 'luxon';\nimport toArray from 'lodash/toArray';\n\nexport default function render(node, document, options) {\n    const metadata = node.metadata;\n\n    const figure = document.createElement('figure');\n    figure.setAttribute('class', 'kg-card kg-embed-card');\n\n    let html = node.html;\n\n    const tweetData = metadata && metadata.tweet_data;\n    const isEmail = options.target === 'email';\n\n    if (tweetData && isEmail) {\n        const tweetId = tweetData.id;\n        const numberFormatter = new Intl.NumberFormat('en-US', {\n            style: 'decimal',\n            notation: 'compact',\n            unitDisplay: 'narrow',\n            maximumFractionDigits: 1\n        });\n        const retweetCount = numberFormatter.format(tweetData.public_metrics.retweet_count);\n        const likeCount = numberFormatter.format(tweetData.public_metrics.like_count);\n        const authorUser = tweetData.users && tweetData.users.find(user => user.id === tweetData.author_id);\n        const tweetTime = DateTime.fromISO(tweetData.created_at).toLocaleString(DateTime.TIME_SIMPLE);\n        const tweetDate = DateTime.fromISO(tweetData.created_at).toLocaleString(DateTime.DATE_MED);\n\n        const mentions = tweetData.entities && tweetData.entities.mentions || [];\n        const urls = tweetData.entities && tweetData.entities.urls || [];\n        const hashtags = tweetData.entities && tweetData.entities.hashtags || [];\n        const entities = mentions.concat(urls).concat(hashtags).sort((a, b) => a.start - b.start);\n        let tweetContent = tweetData.text;\n\n        let tweetImageUrl = null;\n        const hasImageOrVideo = tweetData.attachments && tweetData.attachments && tweetData.attachments.media_keys;\n        if (hasImageOrVideo) {\n            tweetImageUrl = tweetData.includes.media[0].preview_image_url || tweetData.includes.media[0].url;\n        }\n        const hasPoll = tweetData.attachments && tweetData.attachments && tweetData.attachments.poll_ids;\n\n        if (mentions) {\n            let last = 0;\n            let parts = [];\n            let content = toArray(tweetContent);\n            for (const entity of entities) {\n                let type = 'text';\n                let data = content.slice(entity.start, entity.end + 1).join('').replace(/\\n/g, '<br>');\n                if (entity.url) {\n                    if (!entity.display_url || entity.display_url.startsWith('pic.twitter.com')) {\n                        type = 'img_url';\n                    } else {\n                        type = 'url';\n                        data = data.replace(entity.url, entity.display_url);\n                    }\n                }\n                if (entity.username) {\n                    type = 'mention';\n                }\n                if (entity.tag) {\n                    type = 'hashtag';\n                }\n                parts.push({\n                    type: 'text',\n                    data: content.slice(last, entity.start).join('').replace(/\\n/g, '<br>')\n                });\n                parts.push({\n                    type: type,\n                    data: data\n                });\n                last = entity.end + 1;\n            }\n            parts.push({\n                type: 'text',\n                data: content.slice(last, content.length).join('').replace(/\\n/g, '<br>')\n            });\n\n            tweetContent = parts.reduce((partContent, part) => {\n                if (part.type === 'text') {\n                    return partContent + part.data;\n                }\n                if (part.type === 'mention') {\n                    return partContent + `<span style=\"color: #1DA1F2;\">${part.data}</span>`;\n                }\n                if (part.type === 'hashtag') {\n                    return partContent + `<span style=\"color: #1DA1F2;\">${part.data}</span>`;\n                }\n                if (part.type === 'url') {\n                    return partContent + `<span style=\"color: #1DA1F2; word-break: break-all;\">${part.data}</span>`;\n                }\n                return partContent;\n            }, '');\n        }\n\n        html = `\n        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"kg-twitter-card\">\n            <tr>\n                <td>\n                    <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                        ${authorUser ? `\n                            <tr>\n                                ${authorUser.profile_image_url ? `<td width=\"48\" style=\"width: 48px;\">\n                                    <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-left: 16px; padding-top: 16px;\"><img src=\"${authorUser.profile_image_url}\" style=\"max-width: 512px; border: none; width: 48px; height: 48px; border-radius: 999px;\" border=\"0\"></a>\n                                </td>` : ''}\n                                ${authorUser.name ? `\n                                <td style=\"line-height: 1.3em; width: 100%;\">\n                                    <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"font-size: 15px !important; font-weight: 600; width: 100%; padding-top: 20px; padding-bottom: 18px;\">${authorUser.name} <br> <span style=\"color: #ABB4BE; font-size: 14px; font-weight: 500;\">@${authorUser.username}</span></a>\n                                </td>` : ''}\n                                <td align=\"right\" width=\"24\" style=\"width: 24px;\">\n                                    <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-right: 16px; padding-top: 20px; width: 24px; height: 38px;\"><img src=\"https://static.ghost.org/v4.0.0/images/twitter-logo-small.png\" width=\"24\" border=\"0\"></a>\n                                </td>\n                            </tr>\n                        ` : ''}\n                        <tr>\n                            <td colspan=\"3\">\n                                <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"font-size: 15px; line-height: 1.4em; padding-top: 8px; padding-left: 16px; padding-right: 16px; padding-bottom: 16px;\">${tweetContent}\n                                ${hasPoll ? `<br><span style=\"color: #1DA1F2;\">View poll &rarr;</span>` : ''}\n                                </a>\n                            </td>\n                        </tr>\n                        ${hasImageOrVideo ? `<tr>\n                            <td colspan=\"3\" align=\"center\" style=\"width: 100%;\">\n                                <a href=\"https://twitter.com/twitter/status/${tweetId}\" style=\"display: block; padding-top: 0; padding-left: 16px; padding-right: 16px; padding-bottom: 0;\"><img src=\"${tweetImageUrl}\" style=\"width: 100%; border: 1px solid #E9E9E9; max-width: 528px; border-radius: 10px;\" border=\"0\"></a>\n                            </td>\n                        </tr>` : ''}\n                        <tr>\n                            <td colspan=\"3\" style=\"width: 100%;\">\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                                    <tr>\n                                        <td>\n                                        <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-top: 4px; padding-right: 16px; padding-bottom: 12px; padding-left: 16px;\"><span style=\"color: #838383;\">${tweetTime} &bull; ${tweetDate}</span></a>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td colspan=\"3\" style=\"width: 100%;\">\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"border-top: 1px solid #E9E9E9;\">\n                                    <tr>\n                                        <td>\n                                            <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-top: 12px; padding-right: 16px; padding-bottom: 12px; padding-left: 16px;\">\n                                                <span style=\"font-weight: 600;\">${likeCount}</span> <span style=\"color: #838383;\">likes &bull;</span>\n                                                <span style=\"font-weight: 600;\">${retweetCount}</span> <span style=\"color: #838383;\">retweets</span>\n                                            </a>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n        </table>\n        `;\n    }\n\n    figure.innerHTML = html.trim();\n\n    const caption = node.caption;\n    if (caption) {\n        const figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = caption;\n        figure.appendChild(figcaption);\n        figure.setAttribute('class', `${figure.getAttribute('class')} kg-card-hascaption`);\n    }\n\n    return {element: figure};\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport twitterRenderer from './types/twitter';\n\nexport function renderEmbedNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n    const embedType = node.embedType;\n\n    if (embedType === 'twitter') {\n        return twitterRenderer(node, document, options);\n    }\n\n    return renderTemplate(node, document, options);\n}\n\nfunction renderTemplate(node, document, options) {\n    if (node.isEmpty()) {\n        return renderEmptyContainer(document);\n    }\n    const isEmail = options.target === 'email';\n    const metadata = node.metadata;\n    const url = node.url;\n    const isVideoWithThumbnail = node.embedType === 'video' && metadata && metadata.thumbnail_url;\n    const figure = document.createElement('figure');\n    figure.setAttribute('class', 'kg-card kg-embed-card');\n\n    if (isEmail && isVideoWithThumbnail) {\n        const emailTemplateMaxWidth = 600;\n        const thumbnailAspectRatio = metadata.thumbnail_width / metadata.thumbnail_height;\n        const spacerWidth = Math.round(emailTemplateMaxWidth / 4);\n        const spacerHeight = Math.round(emailTemplateMaxWidth / thumbnailAspectRatio);\n        const html = `\n            <!--[if !mso !vml]-->\n            <a class=\"kg-video-preview\" href=\"${url}\" aria-label=\"Play video\" style=\"mso-hide: all\">\n                <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" width=\"100%\" background=\"${metadata.thumbnail_url}\" role=\"presentation\" style=\"background: url('${metadata.thumbnail_url}') left top / cover; mso-hide: all\">\n                    <tr style=\"mso-hide: all\">\n                        <td width=\"25%\" style=\"visibility: hidden; mso-hide: all\">\n                            <img src=\"https://img.spacergif.org/v1/${spacerWidth}x${spacerHeight}/0a/spacer.png\" alt=\"\" width=\"100%\" border=\"0\" style=\"display:block; height: auto; opacity: 0; visibility: hidden; mso-hide: all;\">\n                        </td>\n                        <td width=\"50%\" align=\"center\" valign=\"middle\" style=\"vertical-align: middle; mso-hide: all;\">\n                            <div class=\"kg-video-play-button\" style=\"mso-hide: all\"><div style=\"mso-hide: all\"></div></div>\n                        </td>\n                        <td width=\"25%\" style=\"mso-hide: all\">&nbsp;</td>\n                    </tr>\n                </table>\n            </a>\n            <!--[endif]-->\n\n            <!--[if vml]>\n            <v:group xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" coordsize=\"${emailTemplateMaxWidth},${spacerHeight}\" coordorigin=\"0,0\" href=\"${url}\" style=\"width:${emailTemplateMaxWidth}px;height:${spacerHeight}px;\">\n                <v:rect fill=\"t\" stroked=\"f\" style=\"position:absolute;width:${emailTemplateMaxWidth};height:${spacerHeight};\"><v:fill src=\"${metadata.thumbnail_url}\" type=\"frame\"/></v:rect>\n                <v:oval fill=\"t\" strokecolor=\"white\" strokeweight=\"4px\" style=\"position:absolute;left:${Math.round((emailTemplateMaxWidth / 2) - 39)};top:${Math.round((spacerHeight / 2) - 39)};width:78;height:78\"><v:fill color=\"black\" opacity=\"30%\" /></v:oval>\n                <v:shape coordsize=\"24,32\" path=\"m,l,32,24,16,xe\" fillcolor=\"white\" stroked=\"f\" style=\"position:absolute;left:${Math.round((emailTemplateMaxWidth / 2) - 11)};top:${Math.round((spacerHeight / 2) - 17)};width:30;height:34;\" />\n            </v:group>\n            <![endif]-->\n        `;\n        figure.innerHTML = html.trim();\n    } else {\n        figure.innerHTML = node.html;\n    }\n\n    const caption = node.caption;\n    if (caption) {\n        const figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = caption;\n        figure.appendChild(figcaption);\n        figure.setAttribute('class', `${figure.getAttribute('class')} kg-card-hascaption`);\n    }\n\n    return {element: figure};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseEmbedNode} from './embed-parser';\nimport {renderEmbedNode} from './embed-renderer';\n\nexport class EmbedNode extends generateDecoratorNode({\n    nodeType: 'embed',\n    properties: [\n        {name: 'url', default: '', urlType: 'url'},\n        {name: 'embedType', default: ''},\n        {name: 'html', default: ''},\n        {name: 'metadata', default: {}},\n        {name: 'caption', default: '', wordCount: true}\n    ],\n    defaultRenderFn: renderEmbedNode\n}) {\n    static importDOM() {\n        return parseEmbedNode(this);\n    }\n\n    isEmpty() {\n        return !this.__url && !this.__html;\n    }\n}\n\nexport const $createEmbedNode = (dataset) => {\n    return new EmbedNode(dataset);\n};\n\nexport function $isEmbedNode(node) {\n    return node instanceof EmbedNode;\n}\n","/**\n * Removes consecutive whitespaces and newlines\n * @param {string} html\n * @returns {string}\n */\nexport function removeSpaces(html) {\n    return html.replace(/\\n/g, ' ').replace(/\\s+/g, ' ').trim();\n}\n\n/**\n * Wraps replacement strings with %%\n * This helps to prevent conflicts between code samples and our replacement strings\n * Example: {foo} -> %%{foo}%%\n * @param {string} html\n * @returns {string}\n */\nexport function wrapReplacementStrings(html) {\n    return html.replace(/\\{(\\w*?)(?:,? *\"(.*?)\")?\\}/g, '%%$&%%');\n}\n\n/**\n * Removes any <code> wrappers around replacement strings {foo}\n * Example input:  <code><span>{foo}</span></code>\n * Example output:       <span>{foo}</span>\n * @param {string} html\n * @returns {string}\n */\nexport function removeCodeWrappersFromHelpers(html,document) {\n    // parse html to make patterns easier to match\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n\n    const codeElements = tempDiv.querySelectorAll('code');\n    codeElements.forEach((codeElement) => {\n        const codeTextContent = codeElement.textContent;\n        // extract the content of the code element if it follows the helper pattern (e.g. {foo})\n        if (codeTextContent.match(/((.*?){.*?}(.*?))/gi)) {\n            const codeContent = codeElement.innerHTML; \n            codeElement.parentNode.replaceChild(document.createRange().createContextualFragment(codeContent), codeElement);\n        }\n    });\n\n    const cleanedHtml = tempDiv.innerHTML;\n    return cleanedHtml;\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {removeSpaces, removeCodeWrappersFromHelpers, wrapReplacementStrings} from '../../utils/replacement-strings';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderEmailNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const html = node.html;\n\n    if (!html || options.target !== 'email') {\n        return renderEmptyContainer(document);\n    }\n\n    const cleanedHtml = wrapReplacementStrings(removeCodeWrappersFromHelpers(removeSpaces(html),document));\n\n    const element = document.createElement('div');\n    element.innerHTML = cleanedHtml;\n\n    // `type: 'inner'` will render only the innerHTML of the element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element, type: 'inner'};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderEmailNode} from './email-renderer';\n\nexport class EmailNode extends generateDecoratorNode({\n    nodeType: 'email',\n    properties: [\n        {name: 'html', default: '', urlType: 'html'}\n    ],\n    defaultRenderFn: renderEmailNode\n}) {\n}\n\nexport const $createEmailNode = (dataset) => {\n    return new EmailNode(dataset);\n};\n\nexport function $isEmailNode(node) {\n    return node instanceof EmailNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element.js';\nimport {readImageAttributesFromElement} from '../../utils/read-image-attributes-from-element.js';\n\nfunction readGalleryImageAttributesFromElement(element, imgNum) {\n    const image = readImageAttributesFromElement(element);\n\n    image.fileName = element.src.match(/[^/]*$/)[0];\n    image.row = Math.floor(imgNum / 3);\n\n    return image;\n}\n\nexport function parseGalleryNode(GalleryNode) {\n    return {\n        figure: (nodeElem) => {\n            // Koenig gallery card\n            if (nodeElem.classList?.contains('kg-gallery-card')) {\n                return {\n                    conversion(domNode) {\n                        const payload = {};\n                        const imgs = Array.from(domNode.querySelectorAll('img'));\n\n                        payload.images = imgs.map(readGalleryImageAttributesFromElement);\n                        payload.caption = readCaptionFromElement(domNode);\n\n                        const node = new GalleryNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            return null;\n        },\n        div: (nodeElem) => {\n            // Medium \"graf\" galleries\n            function isGrafGallery(node) {\n                return node.tagName === 'DIV'\n                        && node.dataset?.paragraphCount\n                        && node.querySelectorAll('img').length > 0;\n            }\n\n            if (isGrafGallery(nodeElem)) {\n                return {\n                    conversion(domNode) {\n                        const payload = {\n                            caption: readCaptionFromElement(domNode)\n                        };\n\n                        // These galleries exist as a series of divs containing multiple figure+img.\n                        // Grab the first set of imgs...\n                        let imgs = Array.from(domNode.querySelectorAll('img'));\n\n                        // ...and then iterate over any remaining divs until we run out of matches\n                        let nextNode = domNode.nextElementSibling;\n                        while (nextNode && isGrafGallery(nextNode)) {\n                            let currentNode = nextNode;\n                            imgs = imgs.concat(Array.from(currentNode.querySelectorAll('img')));\n\n                            const currentNodeCaption = readCaptionFromElement(currentNode);\n                            if (currentNodeCaption) {\n                                payload.caption = `${payload.caption} / ${currentNodeCaption}`;\n                            }\n\n                            nextNode = currentNode.nextElementSibling;\n\n                            // remove nodes as we go so that they don't go through the parser\n                            currentNode.remove();\n                        }\n\n                        payload.images = imgs.map(readGalleryImageAttributesFromElement);\n\n                        const node = new GalleryNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            // Squarespace SQS galleries\n            function isSqsGallery(node) {\n                return node.tagName === 'DIV'\n                        && node.className.match(/sqs-gallery-container/)\n                        && !node.className.match(/summary-/);\n            }\n\n            if (isSqsGallery(nodeElem)) {\n                return {\n                    conversion(domNode) {\n                        const payload = {};\n\n                        // Each image exists twice...\n                        // The first image is wrapped in `<noscript>`\n                        // The second image contains image dimensions but the src property needs to be taken from `data-src`.\n                        let imgs = Array.from(domNode.querySelectorAll('img.thumb-image'));\n\n                        imgs = imgs.map((img) => {\n                            if (!img.getAttribute('src')) {\n                                if (img.previousElementSibling.tagName === 'NOSCRIPT' && img.previousElementSibling.getElementsByTagName('img').length) {\n                                    const prevNode = img.previousElementSibling;\n                                    img.setAttribute('src', img.getAttribute('data-src'));\n                                    prevNode.remove();\n                                } else {\n                                    return undefined;\n                                }\n                            }\n\n                            return img;\n                        }).filter(img => img !== undefined);\n\n                        // Process nodes into the payload\n                        payload.images = imgs.map(readGalleryImageAttributesFromElement);\n\n                        payload.caption = readCaptionFromElement(domNode, {selector: '.meta-title'});\n\n                        const node = new GalleryNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {getAvailableImageWidths} from '../../utils/get-available-image-widths';\nimport {isLocalContentImage} from '../../utils/is-local-content-image';\nimport {isUnsplashImage} from '../../utils/is-unsplash-image';\nimport {getResizedImageDimensions} from '../../utils/get-resized-image-dimensions';\nimport {setSrcsetAttribute} from '../../utils/srcset-attribute';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nconst MAX_IMG_PER_ROW = 3;\n\nfunction isValidImage(image) {\n    return image.fileName\n        && image.src\n        && image.width\n        && image.height;\n}\n\nfunction buildStructure(images) {\n    const rows = [];\n    const noOfImages = images.length;\n\n    images.forEach((image, idx) => {\n        let row = image.row;\n\n        if (noOfImages > 1 && (noOfImages % MAX_IMG_PER_ROW === 1) && (idx === (noOfImages - 2))) {\n            row = row + 1;\n        }\n        if (!rows[row]) {\n            rows[row] = [];\n        }\n\n        rows[row].push(image);\n    });\n\n    return rows;\n}\n\nexport function renderGalleryNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const validImages = node.images.filter(isValidImage);\n    if (!validImages.length) {\n        return renderEmptyContainer(document);\n    }\n\n    const figure = document.createElement('figure');\n    figure.setAttribute('class', 'kg-card kg-gallery-card kg-width-wide');\n\n    const container = document.createElement('div');\n    container.setAttribute('class', 'kg-gallery-container');\n    figure.appendChild(container);\n\n    const rows = buildStructure(validImages);\n\n    rows.forEach((row) => {\n        const rowDiv = document.createElement('div');\n        rowDiv.setAttribute('class', 'kg-gallery-row');\n\n        row.forEach((image) => {\n            const imgDiv = document.createElement('div');\n            imgDiv.setAttribute('class', 'kg-gallery-image');\n\n            const img = document.createElement('img');\n            img.setAttribute('src', image.src);\n            img.setAttribute('width', image.width);\n            img.setAttribute('height', image.height);\n            img.setAttribute('loading', 'lazy');\n            img.setAttribute('alt', image.alt || '');\n            if (image.title) {\n                img.setAttribute('title', image.title);\n            }\n\n            // images can be resized to max width, if that's the case output\n            // the resized width/height attrs to ensure 3rd party gallery plugins\n            // aren't affected by differing sizes\n            const {canTransformImage} = options;\n            const {defaultMaxWidth} = options.imageOptimization || {};\n            if (\n                defaultMaxWidth &&\n                image.width > defaultMaxWidth &&\n                isLocalContentImage(image.src, options.siteUrl) &&\n                canTransformImage &&\n                canTransformImage(image.src)\n            ) {\n                const {width, height} = getResizedImageDimensions(image, {width: defaultMaxWidth});\n                img.setAttribute('width', width);\n                img.setAttribute('height', height);\n            }\n\n            // add srcset+sizes except for email clients which do not have good support for either\n            if (options.target !== 'email') {\n                setSrcsetAttribute(img, image, options);\n\n                if (img.getAttribute('srcset') && image.width >= 720) {\n                    if (rows.length === 1 && row.length === 1 && image.width >= 1200) {\n                        img.setAttribute('sizes', '(min-width: 1200px) 1200px');\n                    } else {\n                        img.setAttribute('sizes', '(min-width: 720px) 720px');\n                    }\n                }\n            }\n\n            // Outlook is unable to properly resize images without a width/height\n            // so we modify those to fit max width (600px) and use appropriately\n            // resized images if available\n            if (options.target === 'email') {\n                // only resize if needed, width/height always exists for gallery image unline image cards\n                if (image.width > 600) {\n                    const newImageDimensions = getResizedImageDimensions(image, {width: 600});\n                    img.setAttribute('width', newImageDimensions.width);\n                    img.setAttribute('height', newImageDimensions.height);\n                }\n\n                if (isLocalContentImage(image.src, options.siteUrl) && options.canTransformImage && options.canTransformImage(image.src)) {\n                    // find available image size next up from 2x600 so we can use it for the \"retina\" src\n                    const availableImageWidths = getAvailableImageWidths(image, options.imageOptimization.contentImageSizes);\n                    const srcWidth = availableImageWidths.find(width => width >= 1200);\n\n                    if (!srcWidth || srcWidth === image.width) {\n                        // do nothing, width is smaller than retina or matches the original payload src\n                    } else {\n                        const [, imagesPath, filename] = image.src.match(/(.*\\/content\\/images)\\/(.*)/);\n                        img.setAttribute('src', `${imagesPath}/size/w${srcWidth}/${filename}`);\n                    }\n                }\n\n                if (isUnsplashImage(image.src)) {\n                    const unsplashUrl = new URL(image.src);\n                    unsplashUrl.searchParams.set('w', 1200);\n                    img.setAttribute('src', unsplashUrl.href);\n                }\n            }\n\n            if (image.href) {\n                const a = document.createElement('a');\n                a.setAttribute('href', image.href);\n                a.appendChild(img);\n                imgDiv.appendChild(a);\n            } else {\n                imgDiv.appendChild(img);\n            }\n            rowDiv.appendChild(imgDiv);\n        });\n\n        container.appendChild(rowDiv);\n    });\n\n    if (node.caption) {\n        let figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = node.caption;\n        figure.appendChild(figcaption);\n        figure.setAttribute('class', `${figure.getAttribute('class')} kg-card-hascaption`);\n    }\n\n    return {element: figure};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseGalleryNode} from './gallery-parser';\nimport {renderGalleryNode} from './gallery-renderer';\nexport class GalleryNode extends generateDecoratorNode({\n    nodeType: 'gallery',\n    properties: [\n        {name: 'images', default: []},\n        {name: 'caption', default: '', wordCount: true}\n    ],\n    defaultRenderFn: renderGalleryNode\n}) {\n    /* override */\n    static get urlTransformMap() {\n        return {\n            caption: 'html',\n            images: {\n                src: 'url',\n                caption: 'html'\n            }\n        };\n    }\n\n    static importDOM() {\n        return parseGalleryNode(this);\n    }\n\n    hasEditMode() {\n        return false;\n    }\n}\n\nexport const $createGalleryNode = (dataset) => {\n    return new GalleryNode(dataset);\n};\n\nexport function $isGalleryNode(node) {\n    return node instanceof GalleryNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {removeCodeWrappersFromHelpers, removeSpaces, wrapReplacementStrings} from '../../utils/replacement-strings';\nimport {escapeHtml} from '../../utils/escape-html';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderEmailCtaNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n    const {html, buttonText, buttonUrl, showButton, alignment, segment, showDividers} = node;\n    const hasButton = showButton && !!buttonText && !!buttonUrl;\n\n    if ((!html && !hasButton) || options.target !== 'email') {\n        return renderEmptyContainer(document);\n    }\n\n    const element = document.createElement('div');\n\n    if (segment) {\n        element.setAttribute('data-gh-segment', segment);\n    }\n\n    if (alignment === 'center') {\n        element.setAttribute('class', 'align-center');\n    }\n\n    if (showDividers) {\n        element.appendChild(document.createElement('hr'));\n    }\n\n    const cleanedHtml = wrapReplacementStrings(removeCodeWrappersFromHelpers(removeSpaces(html),document));\n    element.innerHTML = element.innerHTML + cleanedHtml;\n\n    if (hasButton) {\n        const buttonTemplate = `\n            <div class=\"btn btn-accent\">\n                <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"${escapeHtml(alignment)}\">\n                    <tbody>\n                        <tr>\n                            <td align=\"center\">\n                                <a href=\"${escapeHtml(buttonUrl)}\">${escapeHtml(buttonText)}</a>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <p></p>\n        `; // the inline <p> element is so we get a line break if there's no separators/hr used\n\n        const cleanedButton = wrapReplacementStrings(removeCodeWrappersFromHelpers(removeSpaces(buttonTemplate),document));\n        element.innerHTML = element.innerHTML + cleanedButton;\n    }\n\n    if (showDividers) {\n        element.appendChild(document.createElement('hr'));\n    }\n\n    return {element};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderEmailCtaNode} from './email-cta-renderer';\n\nexport class EmailCtaNode extends generateDecoratorNode({\n    nodeType: 'email-cta',\n    properties: [\n        {name: 'alignment', default: 'left'},\n        {name: 'buttonText', default: ''},\n        {name: 'buttonUrl', default: '', urlType: 'url'},\n        {name: 'html', default: '', urlType: 'html'},\n        {name: 'segment', default: 'status:free'},\n        {name: 'showButton', default: false},\n        {name: 'showDividers', default: true}\n    ],\n    defaultRenderFn: renderEmailCtaNode\n}) {\n}\n\nexport const $createEmailCtaNode = (dataset) => {\n    return new EmailCtaNode(dataset);\n};\n\nexport function $isEmailCtaNode(node) {\n    return node instanceof EmailCtaNode;\n}\n","import {rgbToHex} from '../../utils/rgb-to-hex';\n\nfunction getLayout(domNode) {\n    if (domNode.classList.contains('kg-layout-split')) {\n        return 'split';\n    } else if (domNode.classList.contains('kg-layout-full')) {\n        return 'full';\n    } else if (domNode.classList.contains('kg-layout-wide')) {\n        return 'wide';\n    } else {\n        return 'regular';\n    }\n}\n\nexport function signupParser(SignupNode) {\n    return {\n        div: (nodeElem) => {\n            const isSignupNode = nodeElem.dataset?.lexicalSignupForm === '';\n            if (nodeElem.tagName === 'DIV' && isSignupNode) {\n                return {\n                    conversion(domNode) {\n                        const layout = getLayout(domNode);\n                        const header = domNode.querySelector('h2')?.textContent || '';\n                        const subheader = domNode.querySelector('h3')?.textContent || '';\n                        const disclaimer = domNode.querySelector('p')?.textContent || '';\n                        const backgroundImageSrc = domNode.querySelector('.kg-signup-card-image')?.getAttribute('src');\n                        const backgroundColor = domNode.style.backgroundColor || '';\n                        const buttonColor = domNode.querySelector('.kg-signup-card-button')?.style.backgroundColor || '';\n                        const buttonText = domNode.querySelector('.kg-signup-card-button-default')?.textContent?.trim() || 'Subscribe';\n                        const buttonTextColor = domNode.querySelector('.kg-signup-card-button')?.style.color || '';\n                        const textColor = domNode.querySelector('.kg-signup-card-success')?.style.color || '';\n                        const alignment = domNode.querySelector('.kg-signup-card-text')?.classList.contains('kg-align-center') ? 'center' : 'left';\n                        const successMessage = domNode.querySelector('.kg-signup-card-success')?.textContent?.trim() || '';\n                        const labels = [...domNode.querySelectorAll('input[data-members-label]')].map(input => input.value);\n\n                        const isAccentBackground = domNode.classList?.contains('kg-style-accent') ?? false;\n                        const isAccentButton = domNode.querySelector('.kg-signup-card-button')?.classList?.contains('kg-style-accent') ?? false;\n\n                        const isSwapped = domNode.classList.contains('kg-swapped');\n                        const backgroundSize = domNode.classList.contains('kg-content-wide') ? 'contain' : 'cover';\n\n                        const payload = {\n                            layout,\n                            buttonText,\n                            header,\n                            subheader,\n                            disclaimer,\n                            backgroundImageSrc,\n                            backgroundSize,\n                            backgroundColor: isAccentBackground ? 'accent' : (rgbToHex(backgroundColor) || '#ffffff'),\n                            buttonColor: isAccentButton ? 'accent' : (rgbToHex(buttonColor) || '#ffffff'),\n                            textColor: rgbToHex(textColor) || '#ffffff',\n                            buttonTextColor: rgbToHex(buttonTextColor) || '#000000',\n                            alignment,\n                            successMessage,\n                            labels,\n                            swapped: isSwapped\n                        };\n\n                        const node = new SignupNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\n// ref https://ghost.org/docs/themes/members#signup-forms\n\nfunction cardTemplate(nodeData) {\n    const cardClasses = getCardClasses(nodeData).join(' ');\n\n    const backgroundAccent = getAccentClass(nodeData); // don't apply accent style if there's a background image\n    const buttonAccent = nodeData.buttonColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonStyle = nodeData.buttonColor !== 'accent' ? `background-color: ${nodeData.buttonColor};` : ``;\n    const alignment = nodeData.alignment === 'center' ? 'kg-align-center' : '';\n    const backgroundImageStyle = nodeData.backgroundColor !== 'accent' && (!nodeData.backgroundImageSrc || nodeData.layout === 'split') ? `background-color: ${nodeData.backgroundColor}` : '';\n\n    const imgTemplate = nodeData.backgroundImageSrc ? `\n        <picture><img class=\"kg-signup-card-image\" src=\"${nodeData.backgroundImageSrc}\" alt=\"\" /></picture>\n    ` : ``;\n\n    const formTemplate = `\n        <form class=\"kg-signup-card-form\" data-members-form=\"signup\">\n            ${nodeData.labels.map(label => `<input data-members-label type=\"hidden\" value=\"${label}\" />`).join('\\n')}\n            <div class=\"kg-signup-card-fields\">\n                <input class=\"kg-signup-card-input\" id=\"email\" data-members-email=\"\" type=\"email\" required=\"true\" placeholder=\"Your email\" />\n                <button class=\"kg-signup-card-button ${buttonAccent}\" style=\"${buttonStyle}color: ${nodeData.buttonTextColor};\" type=\"submit\">\n                    <span class=\"kg-signup-card-button-default\">${nodeData.buttonText || 'Subscribe'}</span>\n                    <span class=\"kg-signup-card-button-loading\">${loadingIcon()}</span>\n                </button>\n            </div>\n            <div class=\"kg-signup-card-success\" ${nodeData.textColor ? `style=\"color: ${nodeData.textColor};\"` : ''}>\n                ${nodeData.successMessage || 'Thanks! Now check your email to confirm.'}\n            </div>\n            <div class=\"kg-signup-card-error\" ${nodeData.textColor ? `style=\"color: ${nodeData.textColor};\"` : ''} data-members-error></div>\n        </form>\n        `;\n\n    return `\n        <div class=\"${cardClasses} ${backgroundAccent}\" data-lexical-signup-form style=\"${backgroundImageStyle}; display: none;\">\n            ${nodeData.layout !== 'split' ? imgTemplate : ''}\n            <div class=\"kg-signup-card-content\">\n                ${nodeData.layout === 'split' ? imgTemplate : ''}\n                <div class=\"kg-signup-card-text ${alignment}\">\n                    <h2 class=\"kg-signup-card-heading\" ${nodeData.textColor ? `style=\"color: ${nodeData.textColor};\"` : ''}>${nodeData.header}</h2>\n                    <p class=\"kg-signup-card-subheading\" ${nodeData.textColor ? `style=\"color: ${nodeData.textColor};\"` : ''}>${nodeData.subheader}</p>\n                    ${formTemplate}\n                    <p class=\"kg-signup-card-disclaimer\" ${nodeData.textColor ? `style=\"color: ${nodeData.textColor};\"` : ''}>${nodeData.disclaimer}</p>\n                </div>\n            </div>\n        </div>\n        `;\n}\n\nfunction loadingIcon() {\n    return `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" width=\"24\" viewBox=\"0 0 24 24\">\n        <g stroke-linecap=\"round\" stroke-width=\"2\" fill=\"currentColor\" stroke=\"none\" stroke-linejoin=\"round\" class=\"nc-icon-wrapper\">\n            <g class=\"nc-loop-dots-4-24-icon-o\">\n                <circle cx=\"4\" cy=\"12\" r=\"3\"></circle>\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                <circle cx=\"20\" cy=\"12\" r=\"3\"></circle>\n            </g>\n            <style data-cap=\"butt\">\n                .nc-loop-dots-4-24-icon-o{--animation-duration:0.8s}\n                .nc-loop-dots-4-24-icon-o *{opacity:.4;transform:scale(.75);animation:nc-loop-dots-4-anim var(--animation-duration) infinite}\n                .nc-loop-dots-4-24-icon-o :nth-child(1){transform-origin:4px 12px;animation-delay:-.3s;animation-delay:calc(var(--animation-duration)/-2.666)}\n                .nc-loop-dots-4-24-icon-o :nth-child(2){transform-origin:12px 12px;animation-delay:-.15s;animation-delay:calc(var(--animation-duration)/-5.333)}\n                .nc-loop-dots-4-24-icon-o :nth-child(3){transform-origin:20px 12px}\n                @keyframes nc-loop-dots-4-anim{0%,100%{opacity:.4;transform:scale(.75)}50%{opacity:1;transform:scale(1)}}\n            </style>\n        </g>\n    </svg>`;\n}\n\nexport function renderSignupCardToDOM(dataset, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const node = {\n        alignment: dataset.__alignment,\n        buttonText: dataset.__buttonText,\n        header: dataset.__header,\n        subheader: dataset.__subheader,\n        disclaimer: dataset.__disclaimer,\n        backgroundImageSrc: dataset.__backgroundImageSrc,\n        backgroundSize: dataset.__backgroundSize,\n        backgroundColor: dataset.__backgroundColor,\n        buttonColor: dataset.__buttonColor,\n        labels: dataset.__labels,\n        layout: dataset.__layout,\n        textColor: dataset.__textColor,\n        buttonTextColor: dataset.__buttonTextColor,\n        successMessage: dataset.__successMessage,\n        swapped: dataset.__swapped\n    };\n\n    if (options.target === 'email') {\n        return {element: document.createElement('div')}; // Return an empty element since we don't want to render the card in email\n    }\n\n    const htmlString = cardTemplate(node);\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString?.trim();\n\n    if (node.header === '') {\n        const h2Element = element.querySelector('.kg-signup-card-heading');\n        if (h2Element) {\n            h2Element.remove();\n        }\n    }\n\n    if (node.subheader === '') {\n        const h3Element = element.querySelector('.kg-signup-card-subheading');\n        if (h3Element) {\n            h3Element.remove();\n        }\n    }\n\n    if (node.disclaimer === '') {\n        const pElement = element.querySelector('.kg-signup-card-disclaimer');\n        if (pElement) {\n            pElement.remove();\n        }\n    }\n    return {element: element.firstElementChild};\n}\n\nexport function getCardClasses(nodeData) {\n    let cardClasses = ['kg-card kg-signup-card'];\n\n    if (nodeData.layout && nodeData.layout !== 'split') {\n        cardClasses.push(`kg-width-${nodeData.layout}`);\n    }\n\n    if (nodeData.layout === 'split') {\n        cardClasses.push('kg-layout-split kg-width-full');\n    }\n\n    if (nodeData.swapped && nodeData.layout === 'split') {\n        cardClasses.push('kg-swapped');\n    }\n\n    if (nodeData.layout && nodeData.layout === 'full') {\n        cardClasses.push(`kg-content-wide`);\n    }\n\n    if (nodeData.layout === 'split') {\n        if (nodeData.backgroundSize === 'contain') {\n            cardClasses.push('kg-content-wide');\n        }\n    }\n\n    return cardClasses;\n}\n\n// In general, we don't want to apply the accent style if there's a background image\n//  but with the split format we display both an image and a background color\nconst getAccentClass = (nodeData) => {\n    if (nodeData.layout === 'split' && nodeData.backgroundColor === 'accent') {\n        return 'kg-style-accent';\n    } else if (nodeData.layout !== 'split' && !nodeData.backgroundImageSrc && nodeData.backgroundColor === 'accent') {\n        return 'kg-style-accent';\n    } else {\n        return '';\n    }\n};","/* eslint-disable ghost/filenames/match-exported-class */\nimport {signupParser} from './signup-parser';\nimport {renderSignupCardToDOM} from './signup-renderer';\nimport {generateDecoratorNode} from '../../generate-decorator-node';\n\nexport class SignupNode extends generateDecoratorNode({\n    nodeType: 'signup',\n    properties: [\n        {name: 'alignment', default: 'left'},\n        {name: 'backgroundColor', default: '#F0F0F0'},\n        {name: 'backgroundImageSrc', default: ''},\n        {name: 'backgroundSize', default: 'cover'},\n        {name: 'textColor', default: ''},\n        {name: 'buttonColor', default: 'accent'},\n        {name: 'buttonTextColor', default: '#FFFFFF'},\n        {name: 'buttonText', default: 'Subscribe'},\n        {name: 'disclaimer', default: '', wordCount: true},\n        {name: 'header', default: '', wordCount: true},\n        {name: 'labels', default: []},\n        {name: 'layout', default: 'wide'},\n        {name: 'subheader', default: '', wordCount: true},\n        {name: 'successMessage', default: 'Email sent! Check your inbox to complete your signup.'},\n        {name: 'swapped', default: false}\n    ],\n    defaultRenderFn: renderSignupCardToDOM\n}) {\n    /* override */\n    constructor({alignment, backgroundColor, backgroundImageSrc, backgroundSize, textColor, buttonColor, buttonTextColor, buttonText, disclaimer, header, labels, layout, subheader, successMessage, swapped} = {}, key) {\n        super(key);\n        this.__alignment = alignment || 'left';\n        this.__backgroundColor = backgroundColor || '#F0F0F0';\n        this.__backgroundImageSrc = backgroundImageSrc || '';\n        this.__backgroundSize = backgroundSize || 'cover';\n        this.__textColor = (backgroundColor === 'transparent' && (layout === 'split' || !backgroundImageSrc)) ? '' : textColor || '#000000'; // text color should inherit with a transparent bg color unless we're using an image for the background (which supercedes the bg color)\n        this.__buttonColor = buttonColor || 'accent';\n        this.__buttonTextColor = buttonTextColor || '#FFFFFF';\n        this.__buttonText = buttonText || 'Subscribe';\n        this.__disclaimer = disclaimer || '';\n        this.__header = header || '';\n        this.__labels = labels || [];\n        this.__layout = layout || 'wide';\n        this.__subheader = subheader || '';\n        this.__successMessage = successMessage || 'Email sent! Check your inbox to complete your signup.';\n        this.__swapped = swapped || false;\n    }\n\n    static importDOM() {\n        return signupParser(this);\n    }\n\n    // keeping some custom methods for labels as it requires some special handling\n\n    setLabels(labels) {\n        if (!Array.isArray(labels) || !labels.every(item => typeof item === 'string')) {\n            throw new Error('Invalid argument: Expected an array of strings.'); // eslint-disable-line\n        }\n\n        const writable = this.getWritable();\n        writable.__labels = labels;\n    }\n\n    addLabel(label) {\n        const writable = this.getWritable();\n        writable.__labels.push(label);\n    }\n\n    removeLabel(label) {\n        const writable = this.getWritable();\n        writable.__labels = writable.__labels.filter(l => l !== label);\n    }\n}\n\nexport const $createSignupNode = (dataset) => {\n    return new SignupNode(dataset);\n};\n\nexport function $isSignupNode(node) {\n    return node instanceof SignupNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {$isTextNode, TextNode} from 'lexical';\n\n// Since the TextNode is foundational to all Lexical packages, including the\n// plain text use case. Handling any rich text logic is undesirable. This creates\n// the need to override the TextNode to handle serialization and deserialization\n// of HTML/CSS styling properties to achieve full fidelity between JSON <-> HTML.\n//\n// https://lexical.dev/docs/concepts/serialization#handling-extended-html-styling\n\nexport const extendedTextNodeReplacement = {replace: TextNode, with: node => new ExtendedTextNode(node.__text)};\n\nexport class ExtendedTextNode extends TextNode {\n    constructor(text, key) {\n        super(text, key);\n    }\n\n    static getType() {\n        return 'extended-text';\n    }\n\n    static clone(node) {\n        return new ExtendedTextNode(node.__text, node.__key);\n    }\n\n    static importDOM() {\n        const importers = TextNode.importDOM();\n        return {\n            ...importers,\n            span: () => ({\n                conversion: patchConversion(importers?.span, convertSpanElement),\n                priority: 1\n            })\n        };\n    }\n\n    static importJSON(serializedNode) {\n        return TextNode.importJSON(serializedNode);\n    }\n\n    exportJSON() {\n        const json = super.exportJSON();\n        json.type = 'extended-text';\n        return json;\n    }\n\n    isSimpleText() {\n        return (\n            (this.__type === 'text' || this.__type === 'extended-text') &&\n            this.__mode === 0\n        );\n    }\n\n    isInline() {\n        return true;\n    }\n}\n\nfunction patchConversion(originalDOMConverter, convertFn) {\n    return (node) => {\n        const original = originalDOMConverter?.(node);\n        if (!original) {\n            return null;\n        }\n        const originalOutput = original.conversion(node);\n\n        if (!originalOutput) {\n            return originalOutput;\n        }\n\n        return {\n            ...originalOutput,\n            forChild: (lexicalNode, parent) => {\n                const originalForChild = originalOutput?.forChild ?? (x => x);\n                const result = originalForChild(lexicalNode, parent);\n                if ($isTextNode(result)) {\n                    return convertFn(result, node);\n                }\n                return result;\n            }\n        };\n    };\n}\n\nfunction convertSpanElement(lexicalNode, domNode) {\n    const span = domNode;\n\n    // Word uses span tags + font-weight for bold text\n    const hasBoldFontWeight = span.style.fontWeight === 'bold' || span.parentElement?.style.fontWeight === 'bold';\n    // Word uses span tags + font-style for italic text\n    const hasItalicFontStyle = span.style.fontStyle === 'italic' || span.parentElement?.style.fontStyle === 'italic';\n    // Word uses span tags + text-decoration for underline text\n    const hasUnderlineTextDecoration = span.style.textDecoration === 'underline' || span.parentElement?.style.textDecoration === 'underline';\n    // Word uses span tags + \"Strikethrough\" class for strikethrough text\n    const hasStrikethroughClass = span.classList.contains('Strikethrough') || span.parentElement?.classList.contains('Strikethrough');\n    // Word uses span tags + \"Highlight\" class for highlighted text\n    const hasHighlightClass = span.classList.contains('Highlight') || span.parentElement?.classList.contains('Highlight');\n\n    if (hasBoldFontWeight && !lexicalNode.hasFormat('bold')) {\n        lexicalNode = lexicalNode.toggleFormat('bold');\n    }\n\n    if (hasItalicFontStyle && !lexicalNode.hasFormat('italic')) {\n        lexicalNode = lexicalNode.toggleFormat('italic');\n    }\n\n    if (hasUnderlineTextDecoration && !lexicalNode.hasFormat('underline')) {\n        lexicalNode = lexicalNode.toggleFormat('underline');\n    }\n\n    if (hasStrikethroughClass && !lexicalNode.hasFormat('strikethrough')) {\n        lexicalNode = lexicalNode.toggleFormat('strikethrough');\n    }\n\n    if (hasHighlightClass && !lexicalNode.hasFormat('highlight')) {\n        lexicalNode = lexicalNode.toggleFormat('highlight');\n    }\n\n    return lexicalNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {HeadingNode} from '@lexical/rich-text';\n\n// Since the HeadingNode is foundational to Lexical rich-text, only using a\n// custom HeadingNode is undesirable as it means every package would need to\n// be updated to work with the custom node. Instead we can use Lexical's node\n// override/replacement mechanism to extend the default with our custom parsing\n// logic.\n//\n// https://lexical.dev/docs/concepts/serialization#handling-extended-html-styling\n\nexport const extendedHeadingNodeReplacement = {replace: HeadingNode, with: node => new ExtendedHeadingNode(node.__tag)};\n\nexport class ExtendedHeadingNode extends HeadingNode {\n    constructor(tag, key) {\n        super(tag, key);\n    }\n\n    static getType() {\n        return 'extended-heading';\n    }\n\n    static clone(node) {\n        return new ExtendedHeadingNode(node.__tag, node.__key);\n    }\n\n    static importDOM() {\n        const importers = HeadingNode.importDOM();\n        return {\n            ...importers,\n            p: patchParagraphConversion(importers?.p)\n        };\n    }\n\n    static importJSON(serializedNode) {\n        return HeadingNode.importJSON(serializedNode);\n    }\n\n    exportJSON() {\n        const json = super.exportJSON();\n        json.type = 'extended-heading';\n        return json;\n    }\n}\n\nfunction patchParagraphConversion(originalDOMConverter) {\n    return (node) => {\n        // Original matches Google Docs p node to a null conversion so it's\n        // child span is parsed as a heading. Don't prevent that here\n        const original = originalDOMConverter?.(node);\n        if (original) {\n            return original;\n        }\n\n        const p = node;\n\n        // Word uses paragraphs with role=\"heading\" to represent headings\n        // and an aria-level=\"x\" to represent the heading level\n        const hasAriaHeadingRole = p.getAttribute('role') === 'heading';\n        const hasAriaLevel = p.getAttribute('aria-level');\n\n        if (hasAriaHeadingRole && hasAriaLevel) {\n            const level = parseInt(hasAriaLevel, 10);\n            if (level > 0 && level < 7) {\n                return {\n                    conversion: () => {\n                        return {\n                            node: new ExtendedHeadingNode(`h${level}`)\n                        };\n                    },\n                    priority: 1\n                };\n            }\n        }\n\n        return null;\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {QuoteNode} from '@lexical/rich-text';\nimport {$createLineBreakNode, $isParagraphNode} from 'lexical';\n\n// Since the QuoteNode is foundational to Lexical rich-text, only using a\n// custom QuoteNode is undesirable as it means every package would need to\n// be updated to work with the custom node. Instead we can use Lexical's node\n// override/replacement mechanism to extend the default with our custom parsing\n// logic.\n//\n// https://lexical.dev/docs/concepts/serialization#handling-extended-html-styling\n\nexport const extendedQuoteNodeReplacement = {replace: QuoteNode, with: () => new ExtendedQuoteNode()};\n\nexport class ExtendedQuoteNode extends QuoteNode {\n    constructor(key) {\n        super(key);\n    }\n\n    static getType() {\n        return 'extended-quote';\n    }\n\n    static clone(node) {\n        return new ExtendedQuoteNode(node.__key);\n    }\n\n    static importDOM() {\n        const importers = QuoteNode.importDOM();\n        return {\n            ...importers,\n            blockquote: convertBlockquoteElement\n        };\n    }\n\n    static importJSON(serializedNode) {\n        return QuoteNode.importJSON(serializedNode);\n    }\n\n    exportJSON() {\n        const json = super.exportJSON();\n        json.type = 'extended-quote';\n        return json;\n    }\n\n    /* c8 ignore start */\n    extractWithChild() {\n        return true;\n    }\n    /* c8 ignore end */\n}\n\nfunction convertBlockquoteElement() {\n    return {\n        conversion: () => {\n            const node = new ExtendedQuoteNode();\n            return {\n                node,\n                after: (childNodes) => {\n                    // Blockquotes can have nested paragraphs. In our original mobiledoc\n                    // editor we parsed all of the nested paragraphs into a single blockquote\n                    // separating each paragraph with two line breaks. We replicate that\n                    // here so we don't have a breaking change in conversion behaviour.\n                    const newChildNodes = [];\n\n                    childNodes.forEach((child) => {\n                        if ($isParagraphNode(child)) {\n                            if (newChildNodes.length > 0) {\n                                newChildNodes.push($createLineBreakNode());\n                                newChildNodes.push($createLineBreakNode());\n                            }\n\n                            newChildNodes.push(...child.getChildren());\n                        } else {\n                            newChildNodes.push(child);\n                        }\n                    });\n\n                    return newChildNodes;\n                }\n            };\n        },\n        priority: 1\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {$applyNodeReplacement, TextNode} from 'lexical';\n\nexport class TKNode extends TextNode {\n    static getType() {\n        return 'tk';\n    }\n\n    static clone(node) {\n        return new TKNode(node.__text, node.__key);\n    }\n\n    constructor(text, key) {\n        super(text, key);\n    }\n\n    createDOM(config) {\n        const element = super.createDOM(config);\n        const classes = config.theme.tk?.split(' ') || [];\n        element.classList.add(...classes);\n        element.dataset.kgTk = true;\n        return element;\n    }\n\n    static importJSON(serializedNode) {\n        const node = $createTKNode(serializedNode.text);\n        node.setFormat(serializedNode.format);\n        node.setDetail(serializedNode.detail);\n        node.setMode(serializedNode.mode);\n        node.setStyle(serializedNode.style);\n        return node;\n    }\n\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            type: 'tk'\n        };\n    }\n\n    canInsertTextBefore() {\n        return false;\n    }\n\n    isTextEntity() {\n        return true;\n    }\n}\n\n/**\n * Generates a TKNode, which is a string following the format of a # followed by some text, eg. #lexical.\n * @param text - The text used inside the TKNode.\n * @returns - The TKNode with the embedded text.\n */\nexport function $createTKNode(text) {\n    return $applyNodeReplacement(new TKNode(text));\n}\n\n/**\n * Determines if node is a TKNode.\n * @param node - The node to be checked.\n * @returns true if node is a TKNode, false otherwise.\n */\nexport function $isTKNode(node) {\n    return node instanceof TKNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {$applyNodeReplacement, ElementNode} from 'lexical';\nimport linkSVG from './kg-link.svg';\n// Container element for a link search query. Temporary node used only inside\n// the editor that will be replaced with a LinkNode when the search is complete.\nexport class AtLinkNode extends ElementNode {\n    // We keep track of the format that was applied to the original '@' character\n    // so we can re-apply that when converting to a LinkNode\n    __linkFormat = null;\n\n    static getType() {\n        return 'at-link';\n    }\n\n    constructor(linkFormat, key) {\n        super(key);\n        this.__linkFormat = linkFormat;\n    }\n\n    static clone(node) {\n        return new AtLinkNode(node.__linkFormat, node.__key);\n    }\n\n    // This is a temporary node, it should never be serialized but we need\n    // to implement just in case and to match expected types. The AtLinkPlugin\n    // should take care of replacing this node with it's children when needed.\n    static importJSON({linkFormat}) {\n        return $createAtLinkNode(linkFormat);\n    }\n\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            type: 'at-link',\n            version: 1,\n            linkFormat: this.__linkFormat\n        };\n    }\n\n    createDOM(config) {\n        const span = document.createElement('span');\n        const atLinkClasses = (config.theme.atLink || '').split(' ').filter(Boolean);\n        const atLinkIconClasses = (config.theme.atLinkIcon || '').split(' ').filter(Boolean);\n\n        span.classList.add(...atLinkClasses);\n\n        const svgElement = new DOMParser().parseFromString(linkSVG, 'image/svg+xml').documentElement;\n        svgElement.classList.add(...atLinkIconClasses);\n\n        span.appendChild(svgElement);\n\n        return span;\n    }\n\n    updateDOM() {\n        return false;\n    }\n\n    // should not render anything - this is a placeholder node\n    exportDOM() {\n        return null;\n    }\n\n    /* c8 ignore next 3 */\n    static importDOM() {\n        return null;\n    }\n\n    getTextContent() {\n        return '';\n    }\n\n    isInline() {\n        return true;\n    }\n\n    canBeEmpty() {\n        return false;\n    }\n\n    setLinkFormat(linkFormat) {\n        const self = this.getWritable();\n        self.__linkFormat = linkFormat;\n    }\n\n    getLinkFormat() {\n        const self = this.getLatest();\n        return self.__linkFormat;\n    }\n}\n\nexport function $createAtLinkNode(linkFormat) {\n    return $applyNodeReplacement(new AtLinkNode(linkFormat));\n}\n\nexport function $isAtLinkNode(node) {\n    return node instanceof AtLinkNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {$applyNodeReplacement, TextNode} from 'lexical';\n\n// Represents the search query string inside an AtLinkNode. Used in place of a\n// regular TextNode to allow for :after styling to be applied to work as a placeholder\nexport class AtLinkSearchNode extends TextNode {\n    __placeholder = null;\n\n    defaultPlaceholder = 'Find a post, tag or author';\n\n    static getType() {\n        return 'at-link-search';\n    }\n\n    constructor(text, placeholder, key) {\n        super(text, key);\n        this.__placeholder = placeholder;\n    }\n\n    static clone(node) {\n        return new AtLinkSearchNode(\n            node.__text,\n            node.__placeholder,\n            node.__key\n        );\n    }\n\n    // This is a temporary node, it should never be serialized but we need\n    // to implement just in case and to match expected types. The AtLinkPlugin\n    // should take care of replacing this node when needed.\n    static importJSON({text, placeholder}) {\n        return $createAtLinkSearchNode(text, placeholder);\n    }\n\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            type: 'at-link-search',\n            version: 1,\n            placeholder: this.__placeholder\n        };\n    }\n\n    createDOM(config) {\n        const span = super.createDOM(config);\n        span.dataset.placeholder = '';\n        if (!this.__text) {\n            span.dataset.placeholder =\n                this.__placeholder ?? this.defaultPlaceholder;\n        } else {\n            span.dataset.placeholder = this.__placeholder || '';\n        }\n        span.classList.add(...config.theme.atLinkSearch.split(' '));\n\n        return span;\n    }\n\n    updateDOM(prevNode, dom) {\n        if (this.__text) {\n            dom.dataset.placeholder = this.__placeholder ?? '';\n        }\n\n        return super.updateDOM(...arguments);\n    }\n\n    // should not render anything - this is a placeholder node\n    exportDOM() {\n        return null;\n    }\n\n    /* c8 ignore next 3 */\n    static importDOM() {\n        return null;\n    }\n\n    canHaveFormat() {\n        return false;\n    }\n\n    setPlaceholder(text) {\n        const self = this.getWritable();\n        self.__placeholder = text;\n    }\n\n    getPlaceholder() {\n        const self = this.getLatest();\n        return self.__placeholder;\n    }\n\n    // Lexical will incorrectly pick up this node as an element node when the\n    // cursor is placed by the SVG icon element in the parent AtLinkNode. We\n    // need these methods to avoid throwing errors in that case but otherwise\n    // behaviour is unaffected.\n    getChildrenSize() {\n        return 0;\n    }\n\n    getChildAtIndex() {\n        return null;\n    }\n}\n\nexport function $createAtLinkSearchNode(text = '', placeholder = null) {\n    return $applyNodeReplacement(new AtLinkSearchNode(text, placeholder));\n}\n\nexport function $isAtLinkSearchNode(node) {\n    return node instanceof AtLinkSearchNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {TextNode} from 'lexical';\n\n// This is used in places where we need an extra cursor position at the\n// beginning of an element node as it prevents Lexical normalizing the\n// cursor position to the end of the previous node.\nexport class ZWNJNode extends TextNode {\n    static getType() {\n        return 'zwnj';\n    }\n\n    static clone(node) {\n        return new ZWNJNode('', node.__key);\n    }\n\n    createDOM(config) {\n        const span = super.createDOM(config);\n        span.innerHTML = '&zwnj;';\n        return span;\n    }\n\n    updateDOM() {\n        return false;\n    }\n\n    exportJSON() {\n        return {\n            ...super.exportJSON(),\n            type: 'zwnj',\n            version: 1\n        };\n    }\n\n    getTextContent() {\n        return '';\n    }\n\n    isToken() {\n        return true;\n    }\n}\n\nexport function $createZWNJNode() {\n    return new ZWNJNode('');\n}\n\nexport function $isZWNJNode(node) {\n    return node instanceof ZWNJNode;\n}\n","export default {\n    import: {\n        br: (node) => {\n            const isGoogleDocs = !!node.closest('[id^=\"docs-internal-guid-\"]');\n            const previousNodeName = node.previousElementSibling?.nodeName;\n            const nextNodeName = node.nextElementSibling?.nodeName;\n            const headings = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n            const lists = ['UL', 'OL', 'DL'];\n\n            // Remove empty paragraphs when copy/pasting from Google docs:\n            // - Between two paragraphs (P and P)\n            // - Between multiple linebreaks (BR and BR)\n            // - Between a list and a paragraph (UL/OL/DL and P), and vice versa\n            // - Between a heading and a paragraph (H1-H6 and P), and vice versa\n            if (isGoogleDocs) {\n                if (\n                    (previousNodeName === 'P' && nextNodeName === 'P') ||\n                    (previousNodeName === 'BR' || nextNodeName === 'BR') ||\n                    ([...headings, ...lists].includes(previousNodeName) && nextNodeName === 'P') ||\n                    (previousNodeName === 'P' && [...headings, ...lists].includes(nextNodeName))\n                ) {\n                    return {\n                        conversion: () => null,\n                        priority: 1\n                    };\n                }\n            }\n\n            // allow lower priority converter to handle (i.e. default LineBreakNode.importDOM)\n            return null;\n        }\n    }\n};\n","export default {\n    import: {\n        p: (node) => {\n            const isGoogleDocs = !!node.closest('[id^=\"docs-internal-guid-\"]');\n\n            // Google docs wraps dividers in paragraphs, without text content\n            // Remove them to avoid creating empty paragraphs in the editor\n            if (isGoogleDocs && node.textContent === '') {\n                return {\n                    conversion: () => null,\n                    priority: 1\n                };\n            }\n\n            return null;\n        }\n    }\n};\n","import * as image from './nodes/image/ImageNode';\nimport * as codeblock from './nodes/codeblock/CodeBlockNode';\nimport * as markdown from './nodes/markdown/MarkdownNode';\nimport * as video from './nodes/video/VideoNode';\nimport * as audio from './nodes/audio/AudioNode';\nimport * as callout from './nodes/callout/CalloutNode';\nimport * as callToAction from './nodes/call-to-action/CallToActionNode';\nimport * as aside from './nodes/aside/AsideNode';\nimport * as horizontalrule from './nodes/horizontalrule/HorizontalRuleNode';\nimport * as html from './nodes/html/HtmlNode';\nimport * as toggle from './nodes/toggle/ToggleNode';\nimport * as button from './nodes/button/ButtonNode';\nimport * as bookmark from './nodes/bookmark/BookmarkNode';\nimport * as file from './nodes/file/FileNode';\nimport * as header from './nodes/header/HeaderNode';\nimport * as paywall from './nodes/paywall/PaywallNode';\nimport * as product from './nodes/product/ProductNode';\nimport * as embed from './nodes/embed/EmbedNode';\nimport * as email from './nodes/email/EmailNode';\nimport * as gallery from './nodes/gallery/GalleryNode';\nimport * as emailCta from './nodes/email-cta/EmailCtaNode';\nimport * as signup from './nodes/signup/SignupNode';\nimport * as textnode from './nodes/ExtendedTextNode';\nimport * as headingnode from './nodes/ExtendedHeadingNode';\nimport * as quotenode from './nodes/ExtendedQuoteNode';\nimport * as tk from './nodes/TKNode';\nimport * as atLink from './nodes/at-link/index.js';\nimport * as zwnj from './nodes/zwnj/ZWNJNode.js';\n\nimport linebreakSerializers from './serializers/linebreak';\nimport paragraphSerializers from './serializers/paragraph';\n\n// re-export everything for easier importing\nexport * from './KoenigDecoratorNode';\nexport * from './nodes/image/ImageNode';\nexport * from './nodes/codeblock/CodeBlockNode';\nexport * from './nodes/markdown/MarkdownNode';\nexport * from './nodes/video/VideoNode';\nexport * from './nodes/audio/AudioNode';\nexport * from './nodes/callout/CalloutNode';\nexport * from './nodes/aside/AsideNode';\nexport * from './nodes/horizontalrule/HorizontalRuleNode';\nexport * from './nodes/html/HtmlNode';\nexport * from './nodes/toggle/ToggleNode';\nexport * from './nodes/button/ButtonNode';\nexport * from './nodes/bookmark/BookmarkNode';\nexport * from './nodes/file/FileNode';\nexport * from './nodes/header/HeaderNode';\nexport * from './nodes/paywall/PaywallNode';\nexport * from './nodes/product/ProductNode';\nexport * from './nodes/embed/EmbedNode';\nexport * from './nodes/email/EmailNode';\nexport * from './nodes/gallery/GalleryNode';\nexport * from './nodes/email-cta/EmailCtaNode';\nexport * from './nodes/signup/SignupNode';\nexport * from './nodes/call-to-action/CallToActionNode';\nexport * from './nodes/ExtendedTextNode';\nexport * from './nodes/ExtendedHeadingNode';\nexport * from './nodes/ExtendedQuoteNode';\nexport * from './nodes/TKNode';\nexport * from './nodes/at-link/index.js';\nexport * from './nodes/zwnj/ZWNJNode';\n\n// export utility functions that are useful in other packages or tests\nimport * as visibilityUtils from './utils/visibility';\nimport * as taggedTemplateFns from './utils/tagged-template-fns.mjs';\nimport {generateDecoratorNode} from './generate-decorator-node.js';\nimport {rgbToHex} from './utils/rgb-to-hex.js';\nexport const utils = {\n    generateDecoratorNode,\n    visibility: visibilityUtils,\n    rgbToHex,\n    taggedTemplateFns\n};\n\nexport const serializers = {\n    linebreak: linebreakSerializers,\n    paragraph: paragraphSerializers\n};\n\nexport const DEFAULT_CONFIG = {\n    html: {\n        import: {\n            ...serializers.linebreak.import,\n            ...serializers.paragraph.import\n        }\n    }\n};\n\n// export convenience objects for use elsewhere\nexport const DEFAULT_NODES = [\n    textnode.ExtendedTextNode,\n    textnode.extendedTextNodeReplacement,\n    headingnode.ExtendedHeadingNode,\n    headingnode.extendedHeadingNodeReplacement,\n    quotenode.ExtendedQuoteNode,\n    quotenode.extendedQuoteNodeReplacement,\n    codeblock.CodeBlockNode,\n    image.ImageNode,\n    markdown.MarkdownNode,\n    video.VideoNode,\n    audio.AudioNode,\n    callout.CalloutNode,\n    callToAction.CallToActionNode,\n    aside.AsideNode,\n    horizontalrule.HorizontalRuleNode,\n    html.HtmlNode,\n    file.FileNode,\n    toggle.ToggleNode,\n    button.ButtonNode,\n    header.HeaderNode,\n    bookmark.BookmarkNode,\n    paywall.PaywallNode,\n    product.ProductNode,\n    embed.EmbedNode,\n    email.EmailNode,\n    gallery.GalleryNode,\n    emailCta.EmailCtaNode,\n    signup.SignupNode,\n    tk.TKNode,\n    atLink.AtLinkNode,\n    atLink.AtLinkSearchNode,\n    zwnj.ZWNJNode\n];\n"],"names":["KoenigDecoratorNode","DecoratorNode","$isKoenigCard","node","readTextContent","property","propertyName","propertyEditorName","value","toString","getEditorState","text","read","$getRoot","getTextContent","renderEmptyContainer","document","emptyContainer","createElement","element","type","ALL_MEMBERS_SEGMENT","PAID_MEMBERS_SEGMENT","FREE_MEMBERS_SEGMENT","NO_MEMBERS_SEGMENT","DEFAULT_VISIBILITY","web","nonMember","memberSegment","email","isNullish","undefined","buildDefaultVisibility","JSON","parse","stringify","isOldVisibilityFormat","visibility","Object","prototype","hasOwnProperty","call","isVisibilityRestricted","showOnEmail","showOnWeb","emailOnly","segment","migrateOldVisibilityFormat","newVisibility","renderWithVisibility","originalRenderOutput","options","ownerDocument","content","_getRenderContent","target","_renderWithEmailVisibility","isNotVisibleOnWeb","hasWebVisibilityRestrictions","_renderWithWebVisibility","innerHTML","outerHTML","emailVisibility","container","setAttribute","classList","add","webVisibility","wrappedContent","textarea","validateArguments","nodeType","properties","Error","message","forEach","prop","urlType","includes","wordCount","generateDecoratorNode","defaultRenderFn","version","hasVisibility","map","privateName","name","push","default","GeneratedDecoratorNode","constructor","data","key","getType","clone","getDataset","__key","getPropertyDefaults","reduce","obj","urlTransformMap","urlPath","self","getLatest","dataset","importJSON","serializedNode","exportJSON","exportDOM","nodeVersion","__version","nodeRenderers","render","versionRenderer","createDOM","updateDOM","isInline","hasDynamicData","hasEditMode","propertiesWithText","filter","Boolean","join","getIsVisibilityActive","some","__visibility","defineProperty","get","set","newVal","writable","getWritable","buildCleanBasicHtmlForElement","domNode","_cleanBasicHtml","html","additionalOptions","cleanedHtml","cleanBasicHtml","createDocument","_html","newDoc","implementation","createHTMLDocument","body","readCaptionFromElement","selector","caption","figcaptions","Array","from","querySelectorAll","length","figcaption","cleanHtml","readImageAttributesFromElement","attrs","src","width","parseInt","height","getAttribute","exec","alt","title","parentNode","tagName","href","parseImageNode","ImageNode","img","conversion","priority","figure","nodeElem","querySelector","kgClass","className","match","grafClass","payload","cardWidth","getAvailableImageWidths","image","imageSizes","imageWidths","values","sort","a","b","availableImageWidths","isLocalContentImage","url","siteUrl","normalizedSiteUrl","replace","imagePath","test","isUnsplashImage","getSrcsetAttribute","imageOptimization","srcsets","contentImageSizes","canTransformImage","srcsetWidths","imagesPath","filename","srcs","srcsetWidth","unsplashUrl","URL","searchParams","setSrcsetAttribute","elem","srcset","getResizedImageDimensions","desiredWidth","desiredHeight","ratio","resizedHeight","Math","round","resizedWidth","addCreateDocumentOption","dom","window","renderImageNode","trim","figureClasses","defaultMaxWidth","imageDimensions","imgAttributes","srcWidth","find","appendChild","isBlob","startsWith","importDOM","$createImageNode","$isImageNode","parseCodeBlockNode","CodeBlockNode","pre","code","textContent","preClass","codeClass","langRegex","languageMatches","language","toLowerCase","codeElement","children","renderCodeBlockNode","createTextNode","isEmpty","__code","$createCodeBlockNode","$isCodeBlockNode","renderMarkdownNode","markdownHtmlRenderer","markdown","MarkdownNode","__markdown","$createMarkdownNode","$isMarkdownNode","parseVideoNode","VideoNode","isKgVideoCard","contains","videoNode","durationNode","videoSrc","videoWidth","videoHeight","durationText","captionText","loop","getCardWidth","minutes","seconds","split","duration","e","kgThumbnail","thumbnailSrc","kgCustomThumbnail","customThumbnailSrc","renderVideoNode","cardClasses","getCardClasses","htmlString","emailCardTemplate","cardTemplate","firstElementChild","posterSpacerSrc","autoplayAttr","hideControlsClass","formattedDuration","emailTemplateMaxWidth","aspectRatio","emailSpacerWidth","emailSpacerHeight","outlookCircleLeft","outlookCircleTop","outlookPlayLeft","outlookPlayTop","postUrl","fileName","mimeType","thumbnailWidth","thumbnailHeight","floor","paddedSeconds","String","padStart","$createVideoNode","$isVideoNode","parseAudioNode","AudioNode","div","isKgAudioCard","titleNode","audioNode","thumbnailNode","audioSrc","renderAudioNode","thumbnailCls","getThumbnailCls","emptyThumbnailCls","getEmptyThumbnailCls","emailTemplate","frontendTemplate","emptyThumbnailDiv","svg","createElementNS","path1","path2","path3","audioPlayerContainer","audioElement","audioTitle","audioPlayer","audioPlayIcon","audioPlayIconSvg","playPath","audioPauseIcon","audioPauseIconSvg","rectSvg","rectSvg2","audioDuration","audioDurationTotal","audioDUrationNode","audioSlider","playbackRate","unmuteIcon","unmuteIconSvg","unmutePath","muteIcon","muteIconSvg","mutePath","volumeSlider","getFormattedDuration","$createAudioNode","$isAudioNode","cleanDOM","allowedTags","i","childNodes","child","firstChild","insertBefore","removeChild","renderCalloutNode","backgroundColor","calloutEmoji","emojiElement","textElement","temporaryContainer","calloutText","getColorTag","colorClass","parseCalloutNode","CalloutNode","isKgCalloutCard","textNode","emojiNode","color","__calloutText","__calloutEmoji","__backgroundColor","$isCalloutNode","$createCalloutNode","showButton","buttonUrl","buttonText","wrapWithLink","ctaCardTemplate","buttonColor","buttonAccent","buttonStyle","buttonTextColor","layout","showDividers","imageUrl","linkColor","alignment","hasSponsorLabel","sponsorLabel","imageWidth","imageHeight","textValue","emailCTATemplate","buttonLinkStyle","feature","emailCustomization","emailCustomizationAlpha","design","iconSize","internalImageSizes","renderContent","renderCallToActionNode","emailDoc","emailDiv","firstChildInnerContent","rgbToHex","rgb","r","g","red","green","blue","hex","parseCallToActionNode","CallToActionNode","isCallToActionElement","textValueElement","buttonElement","buttonStyles","style","sponsorLabelElement","bgMatch","imageContainer","imageElement","imageData","$createCallToActionNode","$isCallToActionNode","AsideParser","NodeClass","DOMConversionMap","blockquote","isBigQuote","AsideNode","ElementNode","setFormat","format","setIndent","indent","setDirection","direction","parser","extractWithChild","$createAsideNode","$isAsideNode","renderHorizontalRuleNode","_","parseHorizontalRuleNode","HorizontalRuleNode","hr","$createHorizontalRuleNode","$isHorizontalRuleNode","renderHtmlNode","wrappedHtml","contentVisibility","renderOutput","parseHtmlNode","HtmlNode","nodeValue","nextNode","nextSibling","isHtmlEndComment","currentNode","remove","table","__html","$createHtmlNode","$isHtmlNode","parseToggleNode","ToggleNode","isKgToggleCard","headingNode","heading","contentNode","oneline","strings","result","acc","str","renderToggleNode","$createToggleNode","$isToggleNode","parseButtonNode","ButtonNode","isButtonCard","alignmentClass","buttonNode","renderEmailButton","buttonClasses","clsx","renderButtonNode","cardDiv","button","cardHtml","buttonHtml","$createButtonNode","$isButtonNode","parseBookmarkNode","BookmarkNode","isKgBookmarkCard","icon","description","author","publisher","thumbnail","metadata","anchorElement","titleElement","descElement","imgElement","escapeHtml","unsafe","truncateHtml","maxLength","maxLengthMobile","ellipsis","substring","renderBookmarkNode","cardClass","thumbnailDiv","figCaption","__url","__icon","__title","__description","__author","__publisher","__thumbnail","__caption","$createBookmarkNode","$isBookmarkNode","sizeToBytes","size","sizes","sizeParts","sizeNumber","parseFloat","sizeUnit","sizeUnitIndex","indexOf","pow","bytesToSize","bytes","log","renderFileNode","iconCls","fileTitle","fileCaption","fileSize","card","contents","filesize","formattedFileSize","defs","polyline","line","circle","parseFileNode","FileNode","isKgFileCard","link","$isFileNode","$createFileNode","slugify","renderHeaderNodeV1","header","subheader","buttonEnabled","templateData","headerSlug","subheaderSlug","hasHeader","hasSubheader","backgroundImageStyle","backgroundImageSrc","headerElement","subheaderElement","parseHeaderNode","HeaderNode","isHeaderCardv1","isHeaderCardv2","textColor","nodeData","backgroundAccent","imgTemplate","bgImage","backgroundImageWidth","backgroundImageHeight","srcsetValue","wrapperStyle","accentColor","splitImageStyle","backgroundSize","renderHeaderNodeV2","__alignment","__buttonText","__buttonEnabled","__buttonUrl","__header","__subheader","__backgroundImageSrc","__backgroundImageWidth","__backgroundImageHeight","__backgroundSize","__buttonColor","__layout","__textColor","__buttonTextColor","swapped","__swapped","__accentColor","h2Element","pElement","$createHeaderNode","$isHeaderNode","parsePaywallNode","PaywallNode","renderPaywallNode","$createPaywallNode","$isPaywallNode","parseProductNode","ProductNode","isKgProductCard","productButtonEnabled","productRatingEnabled","productTitle","productDescription","productImageSrc","productImageWidth","productImageHeight","stars","productStarRating","getButtonText","productButton","productUrl","renderProductNode","buttonBorderRadius","buttonCorners","starIcon","starActiveClasses","star1","star2","star3","star4","star5","isButtonFilled","__productButtonEnabled","__productUrl","__productButton","__productTitle","__productDescription","__productImageSrc","__productRatingEnabled","$createProductNode","$isProductNode","parseEmbedNode","EmbedNode","iframe","_createPayloadForIframe","tweetData","tweet_data","isEmail","tweetId","id","numberFormatter","Intl","NumberFormat","notation","unitDisplay","maximumFractionDigits","retweetCount","public_metrics","retweet_count","likeCount","like_count","authorUser","users","user","author_id","tweetTime","DateTime","fromISO","created_at","toLocaleString","TIME_SIMPLE","tweetDate","DATE_MED","mentions","entities","urls","hashtags","concat","start","tweetContent","tweetImageUrl","hasImageOrVideo","attachments","media_keys","media","preview_image_url","hasPoll","poll_ids","last","parts","toArray","entity","slice","end","display_url","username","tag","partContent","part","profile_image_url","renderEmbedNode","embedType","twitterRenderer","renderTemplate","isVideoWithThumbnail","thumbnail_url","thumbnailAspectRatio","thumbnail_width","thumbnail_height","spacerWidth","spacerHeight","$createEmbedNode","$isEmbedNode","removeSpaces","wrapReplacementStrings","removeCodeWrappersFromHelpers","tempDiv","codeElements","codeTextContent","codeContent","replaceChild","createRange","createContextualFragment","renderEmailNode","EmailNode","$createEmailNode","$isEmailNode","readGalleryImageAttributesFromElement","imgNum","row","parseGalleryNode","GalleryNode","imgs","images","isGrafGallery","paragraphCount","nextElementSibling","currentNodeCaption","isSqsGallery","previousElementSibling","getElementsByTagName","prevNode","MAX_IMG_PER_ROW","isValidImage","buildStructure","rows","noOfImages","idx","renderGalleryNode","validImages","rowDiv","imgDiv","newImageDimensions","$createGalleryNode","$isGalleryNode","renderEmailCtaNode","hasButton","buttonTemplate","cleanedButton","EmailCtaNode","$createEmailCtaNode","$isEmailCtaNode","getLayout","signupParser","SignupNode","isSignupNode","lexicalSignupForm","disclaimer","successMessage","labels","input","isAccentBackground","isAccentButton","isSwapped","getAccentClass","formTemplate","label","loadingIcon","renderSignupCardToDOM","__disclaimer","__labels","__successMessage","h3Element","setLabels","isArray","every","item","addLabel","removeLabel","l","$createSignupNode","$isSignupNode","extendedTextNodeReplacement","TextNode","with","ExtendedTextNode","__text","importers","span","patchConversion","convertSpanElement","json","isSimpleText","__type","__mode","originalDOMConverter","convertFn","original","originalOutput","forChild","lexicalNode","parent","originalForChild","x","$isTextNode","hasBoldFontWeight","fontWeight","parentElement","hasItalicFontStyle","fontStyle","hasUnderlineTextDecoration","textDecoration","hasStrikethroughClass","hasHighlightClass","hasFormat","toggleFormat","extendedHeadingNodeReplacement","HeadingNode","ExtendedHeadingNode","__tag","p","patchParagraphConversion","hasAriaHeadingRole","hasAriaLevel","level","extendedQuoteNodeReplacement","QuoteNode","ExtendedQuoteNode","convertBlockquoteElement","after","newChildNodes","$isParagraphNode","$createLineBreakNode","getChildren","TKNode","config","classes","theme","tk","kgTk","$createTKNode","setDetail","detail","setMode","mode","setStyle","canInsertTextBefore","isTextEntity","$applyNodeReplacement","$isTKNode","AtLinkNode","__linkFormat","linkFormat","$createAtLinkNode","atLinkClasses","atLink","atLinkIconClasses","atLinkIcon","svgElement","DOMParser","parseFromString","linkSVG","documentElement","canBeEmpty","setLinkFormat","getLinkFormat","$isAtLinkNode","AtLinkSearchNode","__placeholder","defaultPlaceholder","placeholder","$createAtLinkSearchNode","atLinkSearch","arguments","canHaveFormat","setPlaceholder","getPlaceholder","getChildrenSize","getChildAtIndex","$isAtLinkSearchNode","ZWNJNode","isToken","$createZWNJNode","$isZWNJNode","import","br","isGoogleDocs","closest","previousNodeName","nodeName","nextNodeName","headings","lists","utils","visibilityUtils","taggedTemplateFns","serializers","linebreak","linebreakSerializers","paragraph","paragraphSerializers","DEFAULT_CONFIG","DEFAULT_NODES","textnode","headingnode","quotenode","codeblock","video","audio","callout","callToAction","aside","horizontalrule","file","toggle","bookmark","paywall","product","embed","gallery","emailCta","signup","zwnj"],"mappings":"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"}